Eggmonster Change Notes
=======================

6.0
---

* Removed ``eggmonster.__version_info__`` attribute.

5.5.4
-----

* Relaxed restriction on ``jaraco.util`` version. Again.


5.5.3
-----

* Relaxed restriction on ``jaraco.util`` version.

5.4.2 and 5.5.1
---------------

* Restored keyword parameter support for ``Environment.update``.

5.5
---

* Python 3 support

5.4.1
-----

* ``eggmonster.Environment`` now implements a full dictionary API in addition
  to attribute access (should have been a 5.5 release).

5.4
---

* Added spawn support for FakeMonster-launched apps.

5.3
---

* Fixed support for "null" entry points (for initializing the config
  but not running the application) while retaining backward compatibility
  for namespace packages. See `eggmonster.runner.EggmonsterApp` docs
  for details.

5.2
---

* Added FakeMonster, a trimmed down launcher for eggmonster apps.

5.1
---

* `monster_run` now accepts "ENVIRONMENT" or "ENVIRONMENT:<var name>" to
  indicate the configuration path, allowing an environment variable to
  dictate the location of the config.

5.0
---

* Python 2.5 support removed.
* Removed dependencies on httplib2, jaraco.compat, simplejson.
* Removed `eggmonster.environment.Environment._locals`, which was just a
  reference to self.
* Removed `eggmonster.EggmonsterLogHandler`.
* Clients older than 4.1.18 are no longer supported.

Upgrade notes:

Eggmonster clients should update their code to replace calls to
`config.load_config` to use `config.ClusterConfig.from_file` and calls to
`config.load_config_from_yaml` with `config.ClusterConfig.from_yaml`.

Eggmonster clients should also replace references to _locals (if any) to
invoke the Environment object directly.

Eggmonster clients should also replace references to
`eggmonster.EggmonsterLogHandler` with
`eggmonster.log_client.EggmonsterLogHandler`.

4.7
---

Eggmonster server will now monitor the file system for config changes and
update the config in memory accordingly.

4.6
---

Added support for overriding or suppressing the easy_install parameters
used by eggmonster when installing packages.

`emget` now uses argparse for argument parsing.

The `em` command now does proper argument parsing.

`eggmonster.packages.load_dependencies` refactored for
improved reliability and readability. The `just_install` parameter was
removed.

Updated monster_launchd docs.

More use of stdlib APIs instead of local re-implementations (URL parsing,
path separators).

4.5
---

Stricter YAML support.

Improvements to test runners.

Added support for grabbing a revision from the config.

Added an XHTML-based browser in /browser for browsing and diffing config
versions as served by the eggmonster server.

Added config date/time support for served config files.

4.4
---

Eggmonster runner now allows initializing the environment without actually
running any application (if not entry point application name is provided).

Eggmonster internal logging now will log to the host `eggmonster-log` if that
name resolves in DNS and no environment variable is present.

4.3.1
-----

Added the `env.as_obscured_dict` method for obscuring sensitive information
before logging or other output of the configuration.

4.3
---

Fixed error when parsing namespace package names in RunningState._pkg_info.

4.2
---

The eggmonster environment `eggmonster.env` is now also a valid dict so one
can do things like iterate over the keys/values.

Added Python 3 build support.

If monster_launchd has problems spawning emi processes, eggmonster will log
some debug information to help diagnose it.

4.1.31
------

Fixed issue in eggmonster.concurrency where file locks would not be
released if the process was terminated unexpectedly.

4.1.30
------

Added support for namespace packages.

4.1.29
------

A new entry point is supported. Third-party libraries may supply an
entry point `eggmonster_config_updates` which will be called with two
parameters (the old and new config yaml as strings) when the config
is updated by "em edit".

A new parameter 'host-id' may be provided to monster_launchd to
override the default identity of platform.name.

4.1.27
------

Previously to 4.1.27, the eggmonster launchd clients would by default
attempt to setuid to the user by the name "monster" and would always
require being started as root.

Beginning with 4.1.27, the eggmonster launchd clients no longer require
that the process be started by root. Instead, the process will run
in the user context under which it was started unless the `--user`
option is supplied. If `--user` is supplied and is not the same user
as the user that started the process, the process must have been started
by root.

When upgrading to 4.1.27, add `-u monster` or `--user monster` when
starting monster_launchd to maintain compatibility.

4.1.26
------

Beginning with 4.1.26, the eggmonster install lock mechanism (which
prevents other eggmonster instances on the same system from upgrading
packages simultaneously) was changed to be more platform friendly and
work as a context manager.

This change also tweaked the semantic meaning of the lockfile
(`/tmp/eggmonster-install-lock`). In previous versions, the lock file
was kept around, and locks were acquired by setting the EXCLUSIVE flag
on the file. Beginning with 4.1.26, the file is removed after the lock
is released. Thus when upgrading to 4.1.26, one must be careful to
remove the lockfile or subsequent package install operations will fail.
