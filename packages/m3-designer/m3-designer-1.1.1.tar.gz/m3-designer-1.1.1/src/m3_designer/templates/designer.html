<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>M3 дизайнер</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

        <!-- Ext js -->
        <link rel='stylesheet' type='text/css' href='/m3static/vendor/extjs/resources/css/ext-all.css'/>
        <link rel='stylesheet' type='text/css' href='/m3static/vendor/extjs/resources/css/ux/ux-all.css'/>

        <script type="text/javascript" src="/m3static/vendor/extjs/adapter/ext/ext-base.js"></script>
        <script type='text/javascript'>
            // hack hack hackity hack
            if (Ext.isIE6 && /msie 9/.test(navigator.userAgent.toLowerCase())) {
                Ext.isIE6 = Ext.isIE = false;
                Ext.isChrome = Ext.isIE9 = true;
            };
        </script>
        <script type='text/javascript' src='/m3static/vendor/extjs/ext-all-debug.js'></script>
        <script type='text/javascript' src='/m3static/vendor/extjs/ux-all-debug.js'></script>
        <script type='text/javascript' src='/m3static/vendor/extjs/locale/ext-lang-ru.js'></script>

        <!-- М3 -->
        <link rel='stylesheet' type='text/css' href='/m3static/m3/css/m3.css'/>
        <link rel='stylesheet' type='text/css' href='/m3static/m3/css/icons.css'/>

        <script type='text/javascript' src='/m3static/m3/js/m3-debug.js'></script>
        <!-- CodeEditor -->
        <script type="text/javascript" src='/m3static/vendor/codemirror/js/codemirror.js'></script>
        <script type="text/javascript" src='/m3static/vendor/codemirror/js/CodeEditor.js'></script>

        <!-- Дизайнер -->
        <link rel='stylesheet' type='text/css' href='/static/css/designer.css'/>

        <script type="text/javascript" src="/static/designer-src/view.js"></script>
        <script type="text/javascript" src="/static/designer-src/property-editor.js"></script>
        <script type="text/javascript" src="/static/designer-src/transfer.js"></script>
        <script type="text/javascript" src="/static/designer-src/controller.js"></script>
        <script type="text/javascript" src="/static/designer-src/model.js"></script>
        <script type="text/javascript" src="/static/designer-src/ui.js"></script>
        <script type="text/javascript" src="/static/designer-src/utils.js"></script>
        <script type="text/javascript" src="/static/designer-src/model-types.js"></script>
        <script type="text/javascript" src="/static/designer-src/model-types-config.js"></script>
        <script type="text/javascript" src="/static/designer-src/server.js"></script>
        <script type="text/javascript" src="/static/designer-src/code-viewers.js"></script>
        <script type="text/javascript" src="/static/designer-src/workspace.js"></script>
        <script type="text/javascript" src="/static/designer-src/requests.js"></script>
        <script type="text/javascript" src='/static/designer-src/ui-mocks.js'></script>

        <script type="text/javascript">
            Ext.enableForcedBoxModel = true;
            Ext.USE_NATIVE_JSON = true;

            Ext.onReady(function(){
                Ext.QuickTips.init();

                //var starter = new Bootstrapper();
                var workspace = new DesignerWorkspace({
                                dataUrl:'{{data_url}}',
                                saveUrl:'{{save_url}}',
                                previewUrl:'{{code_preview_url}}'
                            });

                new Ext.Viewport({
                    layout:'fit',
                    items:[workspace]
                })
                workspace.loadModel();
            });

        </script>
    </head>
    <body>
    </body>
</html>