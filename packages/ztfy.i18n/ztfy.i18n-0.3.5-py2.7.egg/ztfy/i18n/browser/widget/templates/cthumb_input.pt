<div tal:define="langs view/langs" tal:attributes="class view/klass" i18n:domain="ztfy.i18n">
	<div class="tabs"
		 tal:condition="python:len(langs) > 1"
		 tal:attributes="id string:I18nControl_${view/name}">
		<ul>
			<li style="margin-right: 12px;"><span><a tal:attributes="href string:javascript:i18nTabs.switchTabs('${view/name}');" 
				onmousedown="return false;">&nbsp;<img class="transposer" tal:attributes="src string:/--static--/ztfy.i18n/img/transpose.png" alt="Transpose" i18n:attributes="alt" />&nbsp;</a></span></li>
			<tal:loop repeat="lang langs">
				<li tal:define="label string:${view/name}.${lang}"
					tal:attributes="id string:I18nHeader_${label};
									class python:(repeat['lang'].start() and 'current') or None">
					<span>
						<a tal:attributes="href string:javascript:i18nTabs.displayTab('${label}');"
						   onmousedown="return false;"><img tal:attributes="src string:/--static--/ztfy.i18n/img/flags/${lang}.png; alt string:Language (${lang});" />&nbsp;<span
						   tal:replace="lang" /><span class="notnull" tal:omit-tag="" tal:condition="python:view.hasValue(lang)">...</span></a>
					</span>
				</li>
			</tal:loop>
		</ul>
	</div>
	<div class="tabs_wrapper"
		 tal:omit-tag="python:len(langs) == 1"
		 tal:attributes="id string:I18nPanel_${view/name}">
		<tal:loop repeat="lang langs">
			<div tal:define="label string:${view/name}.${lang}"
				 tal:attributes="id string:I18nTab_${label};
								 label string:${label};
								 class python:(repeat['lang'].start() and 'panel current' or 'panel')">
				<div tal:define="klass python:(not repeat['lang'].start()) and ' notfirst' or ''"
					 tal:attributes="class string:panel_flag${klass};
									 id string:I18nFlag_${label};">
					<img tal:attributes="src string:/--static--/ztfy.i18n/img/flags/${lang}.png; alt string:Language (${lang});" />&nbsp;<span class="lang" tal:content="lang" />
				</div>
				<div class="panel_widget" tal:attributes="id string:I18nWidget_${label}">
					<div class="cthumb-widget">
						<div class="current-value" tal:define="value view/current_value;
															   file python:value.get(lang);"
												   tal:condition="file">
							<tal:var define="img_size file/getImageSize;
											 img_width python:img_size[0];
											 img_height python:img_size[1];
											 adapter python:view.getAdapter(lang);
											 thumb_size python:adapter and adapter.getDisplaySize('thumb') or (32,32);
											 thumb_width python:thumb_size[0];
											 thumb_height python:thumb_size[1];
											 geometry python:view.getGeometry(lang);
											 left python:geometry and geometry.position[0] or 0;
											 top python:geometry and geometry.position[1] or 0;
											 width python:geometry and geometry.size[0] or 32;
											 height python:geometry and geometry.size[1] or 32;">
								<input type="hidden" tal:attributes="name string:${view/name}_${lang}__x; value left;" />
								<input type="hidden" tal:attributes="name string:${view/name}_${lang}__y; value top;" />
								<input type="hidden" tal:attributes="name string:${view/name}_${lang}__w; value width;" />
								<input type="hidden" tal:attributes="name string:${view/name}_${lang}__h; value height;" />
								<div>
									<span i18n:translate="">Current content:</span> <span tal:content="file/contentType" /> &nbsp;&ndash;&nbsp;
									<span tal:content="python:'%d x %d' % (img_width,img_height)" /> px &nbsp;&ndash;&nbsp;
									<span tal:content="python:file.getSize() / 1024" /> <span i18n:translate="">Kb</span><br />
								</div>
								<div class="download-link">
									<img class="thumb" data-ztfy-plugin="$.ZTFY.file.imgAreaSelect"
													   data-img-area-select-parent="DIV.download-link"
													   data-img-area-select-ratio="1:1"
													   data-img-area-select-callback="$.ZTFY.file.cthumb.endSelect"
													   tal:define="display file/++display++thumb"
													   tal:attributes="src display/@@absolute_url;
																	   name string:${view/name}_${lang};
																	   data-img-area-select-image-width thumb_width;
																	   data-img-area-select-image-height thumb_height;
																	   data-img-area-select-left left;
																	   data-img-area-select-top top;
																	   data-img-area-select-width width;
																	   data-img-area-select-height height;" alt="Thumbnail" i18n:attributes="alt" />&nbsp;&nbsp;&nbsp;
									<a target="_blank" tal:attributes="href file/@@absolute_url" alt="" title="Download original image" i18n:attributes="title">
										<img class="cthumb" tal:define="display file/++display++cthumb"
															tal:attributes="src display/@@absolute_url;" alt="Square thumbnail selection" i18n:attributes="alt" />
									</a>
								</div>
							</tal:var>
						</div>
						<div class="delete-value" tal:condition="python:view.deletable(lang)">
							<input type="checkbox" value="on"
								   tal:attributes="id string:${view/name}_${lang}__delete_input;
												   name string:${view/name}_${lang}__delete" />
							<label for=""
								   tal:attributes="for string:${view/name}_${lang}__delete_input" i18n:translate="">Delete current content</label>
						</div>
						<input type="file" id="" name="" class="" title="" lang="" disabled=""
							   readonly="" alt="" tabindex="" accesskey="" size="" maxlength=""
							   tal:attributes="id string:${view/id}-${lang};
											   name string:${view/name}:list;
											   class view/klass;
											   style view/style;
											   title view/title;
											   lang view/lang;
											   onclick view/onclick;
											   ondblclick view/ondblclick;
											   onmousedown view/onmousedown;
											   onmouseup view/onmouseup;
											   onmouseover view/onmouseover;
											   onmousemove view/onmousemove;
											   onmouseout view/onmouseout;
											   onkeypress view/onkeypress;
											   onkeydown view/onkeydown;
											   onkeyup view/onkeyup;
											   disabled view/disabled;
											   tabindex view/tabindex;
											   onfocus view/onfocus;
											   onblur view/onblur;
											   onchange view/onchange;
											   readonly view/readonly;
											   alt view/alt;
											   accesskey view/accesskey;
											   onselect view/onselect;
											   size view/size;
											   maxlength view/maxlength" />
					</div>
				</div>
				<div class="spacer"><!-- IE bugfix - do not remove --></div>
			</div>
		</tal:loop>
	</div>
</div>
