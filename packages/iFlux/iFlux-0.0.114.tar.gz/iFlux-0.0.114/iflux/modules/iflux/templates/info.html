<!DOCTYPE html>
<html>
    <head>
        <title>Iflux Application Info</title>

        <!-- Bootstrap -->
        <link rel="stylesheet" href="/static_assets/css/bootstrap.min.css">
        <link rel="stylesheet" href="/static_assets/css/bootstrap-theme.min.css">
    </head>
    <body>
        <div class="container">
            <h1>Application Info</h1>

            <h2>Tornado</h2>

            Version: {{ tornado_version }}

            <h2>iFlux</h2>

            Root Path: {{ iflux_conf.ROOT }}<br>
            Version: {{ iflux.__version__ }}

            <h3>Data</h3>

            <h4>Connection Handlers</h4>

            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Handler</th>
                    </tr>
                </thead>
                <tbody>
                {% for type, value in iflux_conf.data['connection']['handlers'].items() %}
                    <tr>
                        <td>{{ type }}</td>
                        <td>{{ value['module'] }}.{{ value['handler'] }}</td>
                    </tr>
                </tbody>
                {% end %}
            </table>

            <h4>Connection Instances</h4>

            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Configuration</th>
                    </tr>
                </thead>
                <tbody>
                {% for name, value in iflux_conf.data['connection']['instances'].items() %}
                    <tr>
                        <td>{{ name }}</td>
                        <td>{{ value['type'] }}</td>
                        <td>{{ value }}</td>
                    </tr>
                </tbody>
                {% end %}
            </table>

            <h3>Session</h3>
            session.enabled: {{ iflux_conf.session['enabled'] }}<br>
            {% if iflux_conf.session['enabled'] %}
                session.type: {{ iflux_conf.session['type'] }}<br>
                session.path: {{ iflux_conf.session['path'] }}<br><br>

            <h4>Session Handlers</h4>

            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Module</th>
                        <th>Handler</th>
                    </tr>
                </thead>
                <tbody>
                {% for type, value in iflux_conf.session['handlers'].items() %}
                    <tr>
                        <td>{{ type }}</td>
                        <td>{{ value['module'] }}</td>
                        <td>{{ value['handler'] }}</td>
                    </tr>

                </tbody>
                {% end %}
            </table>
            {% end %}
            <h2>Handlers</h2>

            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Pattern</th>
                        <th>Handler</th>
                        <th>kargs</th>
                    </tr>
                </thead>
                <tbody>
                {% for handler in handlers %}
                    <tr>
                        <td>{{ handler.regex.pattern.replace('$', '') }}</td>
                        <td>{{ handler.handler_class.__module__ }}.{{ handler.handler_class.__name__ }}</td>
                        <td>{{ handler.kwargs }}</td>
                    </tr>

                </tbody>
                {% end %}
            </table>
        </div>
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="/static_assets/js/jquery-2.1.0.min.js"></script>
        <!--script src="/static_assets/js/i18next.min.js"></script-->
        <script src="/static_assets/js/bootstrap.min.js"></script>
        <script src="/static_assets/js/can.custom.2.0.5.jquery.js"></script>
    </body>
</html>
