<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      i18n:domain="ityou.astream">
<body>
    <metal:macro define-macro="astream-tmpl-macro">

        <tal:comment condition="nothing">
        # ------------------------------------------------------------------------------
        #
        # Template f체r Aktivit채ten
        # 
        # Aktivit채t: {
        #   allow_comments: {Boolean},
        #   comments: {Array},
        #   content_creator: {String},
        #   content_title: {String},
        #   content_url: {String},
        #   follow_available: {Boolean},
        #   following: {String},
        #   id: {String},
        #   message: {String},
        #   portal_type: {String},
        #   portrait: {String},
        #   revision: {Number},
        #   site_url: {String},
        #   thumbnail_url: {String},
        #   thumbnails_available: {Boolean},
        #   timestamp: {String},
        #   timestr: {String},
        #   user_email: {String},
        #   user_id: {String},
        #   user_name: {String}
        # }
        #
        #
        # Aufruf in `ityou.esi.theme/src/ityou/esi/theme/esi_theme/jesi-assets/js/ityou/ityou.activitystream.js:367`
        # Aufruf in `ityou.esi.theme/src/ityou/esi/theme/esi_theme/jesi-assets/js/ityou/ityou.activitystream.js:379`
        # Aufruf in `ityou.esi.theme/src/ityou/esi/theme/esi_theme/jesi-assets/js/ityou/ityou.activitystream.js:400`
        #
        # ------------------------------------------------------------------------------
        </tal:comment>
        <script type="text/x-jsrender" id="activity-stream-template">
        <li id="{{:id}}" data-content-id="{{:id}}" data-timestamp="{{:timestamp}}" data-content-creator="{{:content_creator}}" class="activity clearfix {{:following}}" data-revision="{{:revision}}">
            
            <div class="well clearfix">
            
                <div class="clearfix activity-box">
                    <div class="col-xs-11">
                        <div class="clearfix wrapper">
                            <a href="{{:site_url}}/author/{{:user_id}}" class="user-portrait pull-left" data-uid="{{:user_id}}">
                                <img src="{{:portrait}}" class="img-thumbnail pull-left">
                            </a>
                            <div class="user-information">
                                <a href="{{:site_url}}/author/{{:user_id}}" data-uid="{{:user_id}}">{{:user_name}}</a> <small class="client-time">{{:timestr}}</small>
                                <br>
                                <a class="user-message" href="{{:content_url}}">
                                    {{:message}}

                                    {{if thumbnails_available == true}}
                                    <div class="thumbnail-preview {{:portal_type}}">
                                        <a href="{{:content_url}}/@@show_preview" class="linked-document">
                                            <img class="lazy" data-original="{{:thumbnail_url}}">
                                        </a>
                                    </div>
                                    {{/if}}
                                </a>
                            </div>
                        </div>
                    </div>
                            
                    <div class="col-xs-1">
                        <button type="button" class="activity-hide close pull-right" data-parent-id="#{{:id}}"><i class="fa fa-caret-up"></i></button>
                    </div>
                </div>
                
                
                <!-- Kommentare -->
                <ul class="activity-comment-list list-unstyled clearfix">
				    {{for comments tmpl="#comment-stream-template" /}}
			    </ul>
                <!-- // Kommentare -->
                
                
                <div class="col-xs-12 clearfix">
                    <div class="col-xs-6">
					    <button class="btn btn-default comment-show hidden" type="button" data-parent-id="#{{:id}}">
					        show all comments
					    </button>
                    </div>
                    <div class="col-xs-6">
                        {{if allow_comments == true}}
                        <button class="btn btn-default comment-write pull-right" type="button" data-parent-id="#{{:id}}">
                            comment
                        </button>
                        {{/if}}
                    </div>
                </div>
                
                
                <div class="col-xs-12">
                
                    <div class="input-group comment-input-group hidden">
                        <textarea class="form-control comment-textarea can-paste-from-clipboard"></textarea>
                        <span class="input-group-btn">
                            <button class="btn btn-default comment-save" type="button" data-parent-id="#{{:id}}"><i class="fa fa-save"></i></button>
                        </span>
                    </div>
                    
                </div>
            
            </div>
            
        </li>
        </script>


        <tal:comment condition="nothing">
        # ------------------------------------------------------------------------------
        #
        # Template f체r Kommentare
        # 
        # Kommentar: {
        #   comment: {String},
        #   id: {Number},
        #   ownComment: {Boolean},
        #   portrait: {String},
        #   revision: {Number},
        #   revision_old: {Number},
        #   site_url: {String},
        #   timestamp: {String},
        #   timestr: {String},
        #   user_email: {String},
        #   user_id: {String},
        #   user_name: {String},
        #   visible: {Boolean}
        # }
        #
        #
        # Aufruf in `ityou.astream/ityou/astream/browser/templates/tmpl-macros.pt:82`
        # Aufruf in `ityou.esi.theme/src/ityou/esi/theme/esi_theme/jesi-assets/js/ityou/ityou.activitystream.js:478`
        #
        # ------------------------------------------------------------------------------
        </tal:comment>
        <script type="text/x-jsrender" id="comment-stream-template">
        <li id="{{:id}}" data-timestamp="{{:timestamp}}" class="activity-comment clearfix{{if revision_old == true}} older_revision{{/if}} {{if visible == false}}not-{{/if}}activated {{if ownComment}}self{{/if}}" data-revision="{{:revision}}">
            <div class="panel panel-default clearfix">
            
                <div class="panel-body clearfix">
                    <div class="col-xs-11">
                        <div class="clearfix">
                            <a href="{{:site_url}}/author/{{:user_id}}" class="user-portrait pull-left" data-uid="{{:user_id}}">
                                <img src="{{:portrait}}" class="img-thumbnail pull-left">
                            </a>
                            <div class="user-information">
                                <a href="{{:site_url}}/author/{{:user_id}}" data-uid="{{:user_id}}">{{:user_name}}</a> <small class="client-time">{{:timestr}}</small>
                                <br>
                                <p class="user-comment can-copy-to-clipboard">{{:comment}}</p>
                            </div>
                        </div>
                    </div>
                            
                    <div class="col-xs-1">
                        <button type="button" class="comment-hide close pull-right" data-parent-id="#{{:id}}"><i class="fa fa-caret-up"></i></button>
                        {{if ownComment}}
                        <br/><br/>
                        <button type="button" class="copy-to-clipboard close pull-right" data-parent-id="#{{:id}}"><i class="fa fa-copy"></i></button>
                        {{/if}}
                    </div>

                    <div class="col-xs-12">
                        {{if can_delete == true}}
                        <button type="button" class="comment-delete close pull-right" data-parent-id="#{{:id}}"><i class="fa fa-trash-o"></i></button>
                        {{/if}}

                        {{if can_moderate == true}}
                        <button type="button" class="comment-moderate {{if visible == true}}de{{/if}}activate close pull-right" data-parent-id="#{{:id}}">
                            {{if visible == true}}
                                <i class="fa fa-eye-slash"></i>
                            {{else}}
                                <i class="fa fa-eye"></i>
                            {{/if}}
                        </button>
                        {{/if}}
                    </div>
                </div>
            
            </div>
        </li>
        </script>

    </metal:macro>
</body>
</html>
