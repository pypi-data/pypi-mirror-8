{% extends 'base.html' %}

{%- block head -%}
<script type="text/javascript" src="./jquery.js"></script>
<script type="text/javascript" id="js">
  $(document).ready(function() {
      $("tr").mouseover(function() {
          $(this).addClass("hover");
          }).mouseout(function() {
          $(this).removeClass("hover");
          });
  });</script>
{%- endblock -%}

{% block content %}
  <div class="content">

    <div class="header">
        <div class="header-title"><a href="./index.html">Profile Report</a></div>
        <div class="header-time">
          Profile Time on <strong>{{proftime}}</strong><br/>
          Reported Time on <strong>{{reporttime}}</strong>
        </div>
    </div>

    <div class="profile-info">
        <h2>Profile Info</h2>
        <p>
        Profile Data Type: <span class="bold">{{profile_datatype}}</span><br/>
        Total Time: <span class="bold">{{profdata['totaltime']}}</span> CPU second<br/>
        Total Func Call: <span class="bold">{{profdata['totalcalls']}}</span> function calls
        </p>
    </div>

    <hr/>

    <div class="profile-table">
        <h2>Function Caller Table&nbsp;&nbsp;
        <a href="index.html">All function&nbsp;&raquo;</a>
        </h2>

    <table class="prof">
      <thead>
        <tr>
        <th style="width:250px;" class="prof" align="center"
        ><span title="provides the respective data of each function"
        >Dest filename:lineno(function)</span></th>
        <th class="prof"><span title="for the number of calls"
                               >ncalls</span></th>
        <th class="prof"
        ><span title="for the total time spent in the given
 function (and excluding time made in calls to sub-functions)"
        >tottime</span></th>
        <th class="prof"
        ><span title="total time spent in this and all
 subfunctions (from invocation till exit).
 This figure is accurate even for recursive functions.">cumtime</span></th>
        <th style="width:250px;" class="prof" align="center"
        ><span title="provides the respective data of each function"
        >Orig filename:lineno(function)</span></th>
        </tr>
      </thead>
        {%- for items in callers_data %}
          {%- for item in items %}
          <tr>
            {% if item['dst_function'] != '' -%}
            <td class="prof" style="width:300px;" rowspan="{{items|length}}">{{ item['dst_function']|escape }}</td>
            {%- endif -%}
            {% if loop.index == 1 -%}
            <td class="profdata-arrow" style="background-color:{{item['ncallslevel']}}"><span id="callers_{{item['callers_link']}}" title="{{item['dst_function']}}">{{ item['ncalls'] }}</span></td>
            {%- else -%}
            <td class="profdata-arrow" style="background-color:{{item['ncallslevel']}}">{{ item['ncalls'] }}</td>
            {%- endif -%}
            <td class="profdata" style="background-color:{{ item['tottimelevel'] }}">{{ item['tottime'] }}</td>
            <td class="profdata" style="background-color:{{ item['cumtimelevel'] }}">{{ item['cumtime'] }}</td>
            <td class="prof" style="width:300px;">{{ item['org_function']|escape }}</td>
          </tr>
          {%- endfor %}
        {%- endfor %}
    </table>
    </div>

    <div id="footer">
    <p>
    Generated by
    <a href="http://pypi.python.org/pypi/pyprof2html/">pyprof2html</a>: {{version}}
    &nbsp;&nbsp;&nbsp;Powered by <a href="http://www.python.org/">Python</a
    > and <a href="http://jinja.pocoo.org/2/">Jinja2</a>
    </p>
    </div>

  </div>
{% endblock %}
