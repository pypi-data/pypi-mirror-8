ZEO Nagios plugin
=================

ZEO includes a script that provides a nagios monitor plugin:

    >>> import pkg_resources
    >>> nagios = pkg_resources.load_entry_point(
    ...     'ZEO', 'console_scripts', 'zeo-nagios')

In it's simplest form, the script just checks if it can get status:

    >>> import ZEO
    >>> addr, stop = ZEO.server('test.fs')
    >>> saddr = ':'.join(map(str, addr)) # (host, port) -> host:port

    >>> nagios([saddr])
    Empty storage
    1

The storage was empty. In that case, the monitor warned as much.

Let's add some data:

    >>> ZEO.DB(addr).close()
    >>> nagios([saddr])
    OK

If we stop the server, we'll error:

    >>> nagios([saddr])
    Can't connect
    2
