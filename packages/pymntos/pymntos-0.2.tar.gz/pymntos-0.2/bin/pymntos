#!/usr/bin/env python

"""Usage:
    pymntos conduct
    pymntos info [--api-key KEY]
    pymntos next [--api-key KEY]
"""

from docopt import docopt
import os
import pprint
import pymntos

if __name__ == '__main__':
    args = docopt(__doc__)
    
    if args['conduct']:
        pymntos.conduct.display()
    if args['info'] or args['next']:
        key = None
        if args['--api-key']:
            key = args['KEY']
        else:
            try:
                key = os.environ['MEETUP_API_KEY']
            except:
                pass
        if not key:
            print('Must specify an api key via arg or environment variable MEETUP_API_KEY')
            exit(1)
        
        m = pymntos.meetup.Meetup(key)
        if args['info']:
            pprint.pprint(m.group_info())
        if args['next']:
            pprint.pprint(m.next_meeting())
