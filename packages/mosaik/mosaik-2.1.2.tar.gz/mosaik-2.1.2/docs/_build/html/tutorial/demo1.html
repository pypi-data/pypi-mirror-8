

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating and running simple simulation scenarios &mdash; mosaik 2.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'2.0',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="mosaik 2.0 documentation" href="../index.html"/>
        <link rel="up" title="Tutorial" href="index.html"/>
        <link rel="next" title="Adding a control mechanism to a scenario" href="examplectrl.html"/>
        <link rel="prev" title="Integrating a simulation model into the mosaik ecosystem" href="examplesim.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> mosaik</a>
        <form class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#linux">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#os-x">OS X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#what-s-mosaik-supposed-to-do">What&#8217;s mosaik supposed to do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#mosaik-s-main-components">Mosaik&#8217;s main components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystem.html">The mosaik ecosystem</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="examplesim.html">Integrating a simulation model into the mosaik ecosystem</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Creating and running simple simulation scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="examplectrl.html">Adding a control mechanism to a scenario</a></li>
<li class="toctree-l2"><a class="reference internal" href="demo2.html">Integrating a control mechanism</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mosaik-api/index.html">The mosaik API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mosaik-api/overview.html">How mosaik communicates with a simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mosaik-api/low-level.html">The low-level API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mosaik-api/high-level.html">The high-level API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../scenario-definition.html">Scenario definition</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../scenario-definition.html#the-setup">The setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenario-definition.html#starting-simulators">Starting simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenario-definition.html#instantiating-simulation-models">Instantiating simulation models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenario-definition.html#connecting-entities">Connecting entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenario-definition.html#running-the-simulation">Running the simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenario-definition.html#how-to-achieve-bi-directional-data-flows">How to achieve bi-directional data-flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenario-definition.html#how-to-filter-entity-sets">How to filter entity sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenario-definition.html#how-to-create-user-defined-connection-rules">How to create user-defined connection rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenario-definition.html#how-to-retrieve-static-data-from-entities">How to retrieve static data from entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenario-definition.html#how-to-access-topology-and-data-flow-information">How to access topology and data-flow information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenario-definition.html#how-to-destroy-a-world">How to destroy a world</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenario-definition.html#how-to-to-real-time-simulations">How to to real-time simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenario-definition.html#how-to-call-extra-methods-of-a-simulator">How to call extra methods of a simulator</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../simmanager.html">The simulator manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduler.html">Scheduling and simulation execution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html#anatomy-of-a-step">Anatomy of a step</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html#synchronization-and-data-flows">Synchronization and data-flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html#cyclic-data-flows">Cyclic data-flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html#stepping-and-simulation-duration">Stepping and simulation duration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#general-questions">General questions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#coupling-models-with-mosaik">Coupling models with mosaik</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#the-mosaik-demo">The mosaik demo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">Developer&#8217;s Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/setup.html">Development setup and tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/release_process.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/requirements.html">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/design-decisions.html">Discussion of design decisions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/logo-ci.html">Logo and corporate identity</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/mosaik.html"><tt class="docutils literal"><span class="pre">mosaik</span></tt> &#8212; The ende-user API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/mosaik.exceptions.html"><tt class="docutils literal"><span class="pre">mosaik.exceptions</span></tt> &#8212; mosaik specific error types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/mosaik.scenario.html"><tt class="docutils literal"><span class="pre">mosaik.scenario</span></tt> &#8212; Classes related to the scenario creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/mosaik.scheduler.html"><tt class="docutils literal"><span class="pre">mosaik.scheduler</span></tt> &#8212; Coordinate and execute simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/mosaik.simmanager.html"><tt class="docutils literal"><span class="pre">mosaik.simmanager</span></tt> &#8212; Management of external processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/mosaik.util.html"><tt class="docutils literal"><span class="pre">mosaik.util</span></tt> &#8212; Utility classes and functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About mosaik</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/acknowledgements.html">Acknowledgments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/history.html">The history of mosaik</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">mosaik</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="../index.html">Docs</a> &raquo;</li>
  <li><a href="">Creating and running simple simulation scenarios</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="creating-and-running-simple-simulation-scenarios">
<span id="demo1"></span><h1>Creating and running simple simulation scenarios<a class="headerlink" href="#creating-and-running-simple-simulation-scenarios" title="Permalink to this headline">¶</a></h1>
<p>We will now create a simple scenario with mosaik in which we use also use
a simple data collector to get some nice output from our simulation. That
means, we will instantiate a few ExampleModels and a data monitor. We will
then connect the model instances to that monitor and simulate that for some
time.</p>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>You should define the most important configuration values for your simulation
as &#8220;constants&#8221; on top of your scenario file. This makes it easier to
see what&#8217;s going on and change the parameter values.</p>
<p>Two of the most important parameters that you need in almost every simulation
are the <em>simulator configuration</em> and the <em>duration</em> of your simulation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Sim config. and other parameters</span>
<span class="n">SIM_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;ExampleSim&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;python&#39;</span><span class="p">:</span> <span class="s">&#39;simulator_mosaik:ExampleSim&#39;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&#39;Collector&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;cmd&#39;</span><span class="p">:</span> <span class="s">&#39;python collector.py </span><span class="si">%(addr)s</span><span class="s">&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
<span class="n">END</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">60</span>  <span class="c"># 10 minutes</span>
</pre></div>
</div>
<p>The <em>sim config</em> specifies which simulators are available and how to start
them. In the example above, we list our <em>ExampleSim</em> as well as <em>HDF5</em> (the
names are arbitrarily chosen). For each simulator listed, we also specify how
to start it.</p>
<p>Since our example simulator is, like mosaik, written in Python 3, mosaik can
just import it and execute it in-process. The line <tt class="docutils literal"><span class="pre">'python':</span>
<span class="pre">'simulator_mosaik:ExampleSim'</span></tt> tells mosaik to import the package
<tt class="docutils literal"><span class="pre">simulator_mosaik</span></tt> and instantiate the class <tt class="docutils literal"><span class="pre">ExampleSim</span></tt> from it.</p>
<p>The data collector will be started as external process which will communicate
with mosaik via sockets. The line <tt class="docutils literal"><span class="pre">'cmd':</span> <span class="pre">'python</span> <span class="pre">collector.py</span> <span class="pre">%(addr)s'</span></tt>
tells mosaik to start the simulator by executing the command <tt class="docutils literal"><span class="pre">python</span>
<span class="pre">collector.py</span></tt>. Beforehand, mosaik replaces the placeholder <tt class="docutils literal"><span class="pre">%(addr)s</span></tt> with
its actual socket address HOSTNAME:PORT so that the simulator knows where to
connect to.</p>
<p>The section about the <a class="reference internal" href="../simmanager.html"><em>Sim Manager</em></a> explains all this in
detail.</p>
</div>
<div class="section" id="the-world">
<h2>The World<a class="headerlink" href="#the-world" title="Permalink to this headline">¶</a></h2>
<p>The next thing we do is instantiating a <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World" title="mosaik.scenario.World"><tt class="xref py py-class docutils literal"><span class="pre">World</span></tt></a> object. This object will
hold all simulation state. It knows which simulators are available and started,
which entities exist and how they are connected. It also provides most of the
functionality that you need for modelling your scenario:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">mosaik</span>

<span class="n">world</span> <span class="o">=</span> <span class="n">mosaik</span><span class="o">.</span><span class="n">World</span><span class="p">(</span><span class="n">SIM_CONFIG</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="the-scenario">
<h2>The scenario<a class="headerlink" href="#the-scenario" title="Permalink to this headline">¶</a></h2>
<p>Before we can instantiate any simulation models, we first need to start the
respective simulators. This can be done by calling <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World.start" title="mosaik.scenario.World.start"><tt class="xref py py-meth docutils literal"><span class="pre">World.start()</span></tt></a>. It
takes the name of the simulator to start and, optionally, some simulator
parameters which will be passed to the simulators <tt class="docutils literal"><span class="pre">init()</span></tt> method. So lets
start the example simulator and the HDF5 database adapter:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">examplesim</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="s">&#39;ExampleSim&#39;</span><span class="p">,</span> <span class="n">eid_prefix</span><span class="o">=</span><span class="s">&#39;Model_&#39;</span><span class="p">)</span>
<span class="n">collector</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="s">&#39;Collector&#39;</span><span class="p">,</span> <span class="n">step_size</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
<p>We also set the <em>eid_prefix</em> for our example simulator and some configuration
values for the database. It will collect data every minute until the simulation
ends. What gets returned by <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World.start" title="mosaik.scenario.World.start"><tt class="xref py py-meth docutils literal"><span class="pre">World.start()</span></tt></a> is called a <em>model factory</em>.</p>
<p>We can use this factory object to create model instances within the respective
simulator. In your scenario, such an instance is represented as an
<a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.Entity" title="mosaik.scenario.Entity"><tt class="xref py py-class docutils literal"><span class="pre">Entity</span></tt></a>. The model factory presents the available models as if they
were classes within the factory&#8217;s namespace. So this how we can create one
instance of our example model and one database instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">model</span> <span class="o">=</span> <span class="n">examplesim</span><span class="o">.</span><span class="n">ExampleModel</span><span class="p">(</span><span class="n">init_val</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">monitor</span> <span class="o">=</span> <span class="n">collector</span><span class="o">.</span><span class="n">Monitor</span><span class="p">()</span>
</pre></div>
</div>
<p>The <em>init_val</em> parameter that we passed to <tt class="docutils literal"><span class="pre">ExampleModel</span></tt> is the same as in
the <tt class="docutils literal"><span class="pre">create()</span></tt> method of our Sim API implementation. Similarly, the database
has a parameter for its filename.</p>
<p>Now, we need to connect the example model to the monitor. That&#8217;s how we tell
mosaik to send the outputs of the example model to the monotir.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">world</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">monitor</span><span class="p">,</span> <span class="s">&#39;val&#39;</span><span class="p">,</span> <span class="s">&#39;delta&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The method <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World.connect" title="mosaik.scenario.World.connect"><tt class="xref py py-meth docutils literal"><span class="pre">World.connect()</span></tt></a> takes one entity pair – the source and the
destination entity, as well as a list of attributes or attribute tuples. If you
only provide single attribute names, mosaik assumes that the source and
destination use the same attribute name. If they deffer, you can instead pass
a tuple like <tt class="docutils literal"><span class="pre">('val_out',</span> <span class="pre">'val_in')</span></tt>.</p>
<p>Usually, you will neither create single entities nor connect single entity
pairs, but work with large(r) sets of entities. Mosaik allows you to easily
create multiple entities with the same parameters at once. It also provides
some utility functions for connecting sets of entities with each other. So lets
create nine more entities and connect them to our monitor:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">mosaik.util</span>

<span class="n">more_models</span> <span class="o">=</span> <span class="n">examplesim</span><span class="o">.</span><span class="n">ExampleModel</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">init_val</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">mosaik</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">connect_many_to_one</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">more_models</span><span class="p">,</span> <span class="n">monitor</span><span class="p">,</span> <span class="s">&#39;val&#39;</span><span class="p">,</span> <span class="s">&#39;delta&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Instead of instantiating the example model directly, we called its static
method <tt class="docutils literal"><span class="pre">create()</span></tt> and passed the number of instances to it. It returns a list
of entities (nine in this case). We used the utility function
<a class="reference internal" href="../api_reference/mosaik.util.html#mosaik.util.connect_many_to_one" title="mosaik.util.connect_many_to_one"><tt class="xref py py-func docutils literal"><span class="pre">mosaik.util.connect_many_to_one()</span></tt></a> to connect all of them to the
database. This function has a similar signature as <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World.connect" title="mosaik.scenario.World.connect"><tt class="xref py py-meth docutils literal"><span class="pre">World.connect()</span></tt></a>, but
the first two parameters are a <em>world</em> instance and a set (or list) of entities
that are all connected to the <em>dest_entity</em>.</p>
<p>Mosaik also provides the function <a class="reference internal" href="../api_reference/mosaik.util.html#mosaik.util.connect_randomly" title="mosaik.util.connect_randomly"><tt class="xref py py-func docutils literal"><span class="pre">mosaik.util.connect_randomly()</span></tt></a>. This
method randomly connects one set of entities to another set. These two methods
should cover most use cases. For more special ones, you can implement custom
functions based on the primitive <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World.connect" title="mosaik.scenario.World.connect"><tt class="xref py py-meth docutils literal"><span class="pre">World.connect()</span></tt></a>.</p>
</div>
<div class="section" id="the-simulation">
<h2>The simulation<a class="headerlink" href="#the-simulation" title="Permalink to this headline">¶</a></h2>
<p>In order to start the simulation, we call <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World.run" title="mosaik.scenario.World.run"><tt class="xref py py-meth docutils literal"><span class="pre">World.run()</span></tt></a> and specify for
how long we want our simulation to run:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">world</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="n">END</span><span class="p">)</span>
</pre></div>
</div>
<p>Executing the scenario script will then give us the following output:</p>
<div class="highlight-python"><div class="highlight"><pre>{&#39;ExampleSim-0.Model_0&#39;: {&#39;delta&#39;: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                          &#39;val&#39;: [3, 4, 5, 6, 7, 8, 9, 10, 11, 12]},
 &#39;ExampleSim-0.Model_1&#39;: {&#39;delta&#39;: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                          &#39;val&#39;: [4, 5, 6, 7, 8, 9, 10, 11, 12, 13]},
 &#39;ExampleSim-0.Model_2&#39;: {&#39;delta&#39;: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                          &#39;val&#39;: [4, 5, 6, 7, 8, 9, 10, 11, 12, 13]}}
Starting &quot;ExampleSim&quot; as &quot;ExampleSim-0&quot; ...
Starting &quot;Collector&quot; as &quot;Collector-0&quot; ...
Starting simulation.
Simulation finished successfully.
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>This section introduced you to the basic of scenario creation in mosaik. For
more details you can check the <a class="reference internal" href="../scenario-definition.html"><em>guide to scenarios</em></a>.</p>
<p>For your convenience, here is the complete scenario that we created in this
tutorial. You can use this for some more experiments before continuing with
this tutorial:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># demo_1.py</span>
<span class="kn">import</span> <span class="nn">mosaik</span>
<span class="kn">import</span> <span class="nn">mosaik.util</span>


<span class="c"># Sim config. and other parameters</span>
<span class="n">SIM_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;ExampleSim&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;python&#39;</span><span class="p">:</span> <span class="s">&#39;simulator_mosaik:ExampleSim&#39;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&#39;Collector&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;cmd&#39;</span><span class="p">:</span> <span class="s">&#39;python collector.py </span><span class="si">%(addr)s</span><span class="s">&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
<span class="n">END</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">60</span>  <span class="c"># 10 minutes</span>

<span class="c"># Create World</span>
<span class="n">world</span> <span class="o">=</span> <span class="n">mosaik</span><span class="o">.</span><span class="n">World</span><span class="p">(</span><span class="n">SIM_CONFIG</span><span class="p">)</span>

<span class="c"># Start simulators</span>
<span class="n">examplesim</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="s">&#39;ExampleSim&#39;</span><span class="p">,</span> <span class="n">eid_prefix</span><span class="o">=</span><span class="s">&#39;Model_&#39;</span><span class="p">)</span>
<span class="n">collector</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="s">&#39;Collector&#39;</span><span class="p">,</span> <span class="n">step_size</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>

<span class="c"># Instantiate models</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">examplesim</span><span class="o">.</span><span class="n">ExampleModel</span><span class="p">(</span><span class="n">init_val</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">monitor</span> <span class="o">=</span> <span class="n">collector</span><span class="o">.</span><span class="n">Monitor</span><span class="p">()</span>

<span class="c"># Connect entities</span>
<span class="n">world</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">monitor</span><span class="p">,</span> <span class="s">&#39;val&#39;</span><span class="p">,</span> <span class="s">&#39;delta&#39;</span><span class="p">)</span>

<span class="c"># Create more entities</span>
<span class="n">more_models</span> <span class="o">=</span> <span class="n">examplesim</span><span class="o">.</span><span class="n">ExampleModel</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">init_val</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">mosaik</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">connect_many_to_one</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">more_models</span><span class="p">,</span> <span class="n">monitor</span><span class="p">,</span> <span class="s">&#39;val&#39;</span><span class="p">,</span> <span class="s">&#39;delta&#39;</span><span class="p">)</span>

<span class="c"># Run simulation</span>
<span class="n">world</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="n">END</span><span class="p">)</span>
</pre></div>
</div>
<p>The next part of the tutorial will be about integrating control mechanisms into
a simulation.</p>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="examplectrl.html" class="btn btn-neutral float-right" title="Adding a control mechanism to a scenario"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="examplesim.html" class="btn btn-neutral" title="Integrating a simulation model into the mosaik ecosystem"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2013, Stefan Scherfke.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>