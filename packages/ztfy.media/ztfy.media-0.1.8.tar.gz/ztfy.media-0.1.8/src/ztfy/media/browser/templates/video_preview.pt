<div class="centered" i18n:domain="ztfy.media"
	 tal:define="formats python:['video/mp4','video/ogg','video/webm'];
				 size view/size;
				 width python:size[0];
				 height python:size[1];
				 div_height python:height + 5;"
	 tal:attributes="style string:width: ${width}px;; height: ${div_height}px;;">
	<video tal:attributes="width width; height height;"
		   tal:omit-tag="not:python:view.conversions.hasConversion(formats)"
		   controls="controls">
		<tal:loop repeat="type formats">
			<source tal:define="source python:view.conversions.getConversion(type)" tal:condition="source"
					tal:attributes="src source/@@absolute_url; type type;" />
		</tal:loop>
		<object tal:define="flv python:view.conversions.getConversion('video/x-flv')" tal:condition="flv"
				tal:attributes="width width; height height;"
				data="/--static--/ztfy.media/swf/flowplayer-3.2.15.swf" type="application/x-shockwave-flash">
			<param name="allowfullscreen" value="true" />
			<param name="allowscriptaccess" value="always" />
			<param name="quality" value="high" />
			<param name="cachebusting" value="true" />
			<param name="bgcolor" value="#000000" />
			<param name="flashvars" tal:define="url flv/@@absolute_url; target python:url.replace('+','%2B')"
									tal:attributes="value string:config={'playlist':[{'url':'${target}', 'autoPlay':false, 'autoBuffering':false}], 'plugins':{'controls':{'url':'/--static--/ztfy.media/swf/flowplayer.controls-3.2.14.swf', 'stop':true, 'pause':false, 'autoHide':'always', 'width':'98pct', 'left':'50pct', 'bottom':3, 'borderRadius':3, 'durationColor':'#9c9c9c', 'buttonColor':'#ffffff', 'backgroundGradient':'low', 'sliderGradient':'none', 'backgroundColor':'#000', 'timeColor':'#cccccc', 'progressColor':'#ffffff', 'bufferColor':'#5e5e5e', 'buttonOverColor':'#7ec0e7', 'bufferGradient':'none', 'sliderColor':'#000000', 'progressGradient':'medium'}}, 'onStart':null, 'onPause':null, 'onResume':null, 'onStop':null, 'clip':{}}" />
		</object>
	</video>
</div>