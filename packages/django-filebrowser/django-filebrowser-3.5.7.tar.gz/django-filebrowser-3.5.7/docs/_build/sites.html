


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>FileBrowser Sites &mdash; Django FileBrowser 3.5.3 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'',
        VERSION:'3.5.3',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="Django FileBrowser 3.5.3 documentation" href="index.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> Django FileBrowser</a>
        <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#settings">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">Settings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="settings.html#main-url-paths-settings">Main URL/Paths Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#filebrowser-media-tinymce-media">FileBrowser Media, TinyMCE Media</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#extensions-and-formats">Extensions and Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#versions">Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#placeholder">Placeholder</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#extra-settings">Extra Settings</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#filelisting">FileListing</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#fileobject">FileObject</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="fieldswidgets.html">Fields &amp; Widgets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fieldswidgets.html#filebrowsefield">FileBrowseField</a></li>
<li class="toctree-l2"><a class="reference internal" href="fieldswidgets.html#fileinput">FileInput</a></li>
<li class="toctree-l2"><a class="reference internal" href="fieldswidgets.html#clearablefileinput">ClearableFileInput</a></li>
<li class="toctree-l2"><a class="reference internal" href="fieldswidgets.html#django-filefield-and-the-filebrowser">Django FileField and the FileBrowser</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="admin.html">Admin Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="admin.html#filebrowser-site">FileBrowser Site</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin.html#custom-actions">Custom Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin.html#file-storages">File Storages</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin.html#id1">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin.html#signals">Signals</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="versions.html">Versions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="versions.html#defining-versions">Defining Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="versions.html#versions-and-the-admin">Versions and the Admin</a></li>
<li class="toctree-l2"><a class="reference internal" href="versions.html#versions-and-the-frontend">Versions and the Frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="versions.html#versions-in-views">Versions in Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="versions.html#placeholder">Placeholder</a></li>
<li class="toctree-l2"><a class="reference internal" href="versions.html#management-commands">Management Commands</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="help.html">Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="translation.html">Translation</a></li>
<li class="toctree-l2"><a class="reference internal" href="releasenotes.html">FileBrowser 3.5 Release Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="index.html">Django FileBrowser</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="index.html">Docs</a> &raquo;</li>
  <li><a href="">FileBrowser Sites</a></li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="_sources/sites.txt" rel="nofollow"> View page source</a>
      
    </li>
</ul>
<hr/>

          
  <div class="section" id="filebrowser-sites">
<span id="sites"></span><h1>FileBrowser Sites<a class="headerlink" href="#filebrowser-sites" title="Permalink to this headline">¶</a></h1>
<p class="versionadded">
<span class="versionmodified">New in version 3.4.0.</span></p>
<p>The FileBrowser application is respresented by an object of <tt class="docutils literal"><span class="pre">filebrowser.sites.FileBrowserSite</span></tt> (similar to Django&#8217;s admin site). FileBrowser sites allow you to:</p>
<blockquote>
<div><ul class="simple">
<li>associate <a class="reference internal" href="admin.html#actions"><em>Custom Actions</em></a> to a site,</li>
<li>define <a class="reference internal" href="admin.html#storages"><em>File Storages</em></a>,</li>
<li>subclass from FileBrowserSite and redefine the default FileBrowser&#8217;s behavior,</li>
<li>use multiple FileBrowser sites with your project.</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The module variable <tt class="docutils literal"><span class="pre">site</span></tt> from <tt class="docutils literal"><span class="pre">filebrowser.sites</span></tt> is the default FileBrowser application.</p>
</div>
<dl class="docutils">
<dt>FileBrowserSite(name=None, app_name=&#8217;filebrowser&#8217;, storage=default_storage)</dt>
<dd><p class="first">The FileBrowser application is respresented by an object of <tt class="docutils literal"><span class="pre">FileBrowserSite</span></tt> (similar to Django&#8217;s admin site). FileBrowser sites allow you to:</p>
<dl class="last docutils">
<dt>name</dt>
<dd>A name for the site, defaults to None.</dd>
<dt>app_name</dt>
<dd>Defaults to &#8216;filebrowser&#8217;.</dd>
<dt>storage</dt>
<dd>A custom storage engine, defaults to Djangos default storage.</dd>
</dl>
</dd>
</dl>
<p>For example:</p>
<div class="highlight-python"><pre>from django.core.files.storage import DefaultStorage
from filebrowser.sites import import FileBrowserSite

# Default FileBrowser site
site = FileBrowserSite(name='filebrowser', storage=DefaultStorage())

# My Custom FileBrowser site
custom_site = FileBrowserSite(name='custom_filebrowser', storage=DefaultStorage())
custom_site.directory = "custom_uploads/"</pre>
</div>
<div class="section" id="custom-actions">
<span id="actions"></span><h2>Custom Actions<a class="headerlink" href="#custom-actions" title="Permalink to this headline">¶</a></h2>
<p class="versionadded">
<span class="versionmodified">New in version 3.4.0.</span></p>
<p>Similar to Django&#8217;s admin actions, you can define your FileBrowser actions and thus automate the typical tasks of your users. Registered custom actions are listed in the detail view of a file and a user can select a single action at a time. The selected action will then be applied to the file.</p>
<p>The default FileBrowser image actions, such as &#8220;Flip Vertical&#8221; or &#8220;Rotate 90° Clockwise&#8221; are in fact implemented as custom actions (see the module  <tt class="docutils literal"><span class="pre">filebrowser.actions</span></tt>).</p>
<div class="section" id="writing-your-own-actions">
<h3>Writing Your Own Actions<a class="headerlink" href="#writing-your-own-actions" title="Permalink to this headline">¶</a></h3>
<p>Custom actions are simple functions:</p>
<div class="highlight-python"><pre>def foo(request, fileobjects):
    # Do something with the fileobjects</pre>
</div>
<p>The first parameter is a <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> object (representing the submitted form in which a user selected the action) and the second parameter is a list of <tt class="docutils literal"><span class="pre">FileObjects</span></tt> to which the action should be applied.</p>
<p>The list contains exactly one instance of FileObject (representing the file from the detail view), but this may change in the future, as custom actions may become available also in browse views (similar to admin actions applied to a list of checked objects).</p>
</div>
<div class="section" id="registering-an-action">
<h3>Registering an Action<a class="headerlink" href="#registering-an-action" title="Permalink to this headline">¶</a></h3>
<p>In order to make your action visible, you need to register it with a FileBrowser site:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">site</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
</pre></div>
</div>
<p>Once registered, the action will appear in the detail view of a file. You can also give your action a short description:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">foo</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s">&#39;Do foo with the File&#39;</span>
</pre></div>
</div>
<p>This short description will then appear in the list of available actions. If you do not provide a short description, the function name will be used instead and FileBrowser will replace any underscores in the function name with spaces.</p>
</div>
<div class="section" id="associating-actions-with-specific-files">
<h3>Associating Actions with Specific Files<a class="headerlink" href="#associating-actions-with-specific-files" title="Permalink to this headline">¶</a></h3>
<p>Each custom action can be associated with a specific file type (e.g., images, audio file, etc) to which it applies. In order to do that, you need to define a predicate/filter function, which takes a single argument (FileObject) and returns <tt class="docutils literal"><span class="pre">True</span></tt> if your action is applicable to that FileObject. Finally, you need to register this filter function with your action:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">foo</span><span class="o">.</span><span class="n">applies_to</span><span class="p">(</span><span class="k">lambda</span> <span class="n">fileobject</span><span class="p">:</span> <span class="n">fileobject</span><span class="o">.</span><span class="n">filetype</span> <span class="o">==</span> <span class="s">&#39;Image&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In the above example, foo will appear in the action list only for image files. If you do not specify any filter function for your action, FileBrowser considers the action as applicable to all files.</p>
</div>
<div class="section" id="messages-intermediate-pages">
<h3>Messages &amp; Intermediate Pages<a class="headerlink" href="#messages-intermediate-pages" title="Permalink to this headline">¶</a></h3>
<p>You can provide a feedback to a user about a successful or failed execution of an action by using a message. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">messages</span>

<span class="k">def</span> <span class="nf">desaturate_image</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">fileobjects</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fileobjects</span><span class="p">:</span>
        <span class="c"># Desaturate the image</span>
        <span class="n">messages</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">&quot;Image &#39;</span><span class="si">%s</span><span class="s">&#39; was desaturated.&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">f</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
<p>Some actions may require user confirmation (e.g., in order to prevent accidental and irreversible modification to files). In order to that, follow the same pattern as with Django&#8217;s admin action and return a <tt class="docutils literal"><span class="pre">HttpResponse</span></tt> object from your action. Good practice for intermediate pages is to implement a confirm view and have your action return <tt class="docutils literal"><span class="pre">HttpResponseRedirect</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">crop_image</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">fileobjects</span><span class="p">):</span>
    <span class="n">files</span> <span class="o">=</span> <span class="s">&#39;&amp;f=&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">f</span><span class="o">.</span><span class="n">path_relative</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fileobjects</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="s">&#39;/confirm/?action=crop_image&amp;f=</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">files</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="file-storages">
<span id="storages"></span><h2>File Storages<a class="headerlink" href="#file-storages" title="Permalink to this headline">¶</a></h2>
<p class="versionadded">
<span class="versionmodified">New in version 3.4.0.</span></p>
<p>You have the option to specify which file storage engine a FileBrowser should use to browse/upload/modify your media files. This enables you to use a FileBrowser even if your media files are located at some remote system. See also the Django&#8217;s documentation on storages <a class="reference external" href="https://docs.djangoproject.com/en/dev/topics/files/">https://docs.djangoproject.com/en/dev/topics/files/</a>.</p>
<p>To associate a FileBrowser site with a particular storage engine, set the <tt class="docutils literal"><span class="pre">storage</span></tt> property of a site object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.core.files.storage</span> <span class="kn">import</span> <span class="n">FileSystemStorage</span>
<span class="n">site</span><span class="o">.</span><span class="n">storage</span> <span class="o">=</span> <span class="n">FileSystemStorage</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="s">&#39;/path/to/media/directory&#39;</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="s">&#39;/media/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For storage classes other than FileSystemStorage (or those that inherit from that class), there&#8217;s more effort involved in providing a storage object that can be used with FileBrowser. See <a class="reference internal" href="admin.html#mixin"><em>StorageMixin Class</em></a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Prior FileBrowser 3.4, the way to specify FileBrowser&#8216;s  MEDIA_ROOT and MEDIA_URL was via settings.py. Starting from version 3.4, those variables are associated with the storage instance and you can set them as illustrated in the above example.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">For the reason of backward compatibility, FileBrowser settings FILEBROWSER_MEDIA_ROOT and FILEBROWSER_MEDIA_URL can still be used to customize FileBrowser as long as you&#8217;re using the default FileBrowser&#8216;s site without having changed its storage engine. In the next major release of FileBrowser these settings will be removed.</p>
</div>
<div class="section" id="storagemixin-class">
<span id="mixin"></span><h3>StorageMixin Class<a class="headerlink" href="#storagemixin-class" title="Permalink to this headline">¶</a></h3>
<p>A FileBrowser uses the Django&#8217;s Storage class to access media files. However, the API of the Storage class does not provide all methods necessary for FileBrowser&#8217;s functionality. A <tt class="docutils literal"><span class="pre">StorageMixin</span></tt> class from <tt class="docutils literal"><span class="pre">filebrowser.storage</span></tt> module therefore defines all the additional methods that a FileBrowser requires:</p>
<dl class="function">
<dt>
<tt class="descname">isdir(self, name):</tt></dt>
<dd><p>Returns true if name exists and is a directory.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descname">isfile(self, name):</tt></dt>
<dd><p>Returns true if name exists and is a regular file.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descname">move(self, old_file_name, new_file_name, allow_overwrite=False):</tt></dt>
<dd><p>Moves safely a file from one location to another. If <tt class="docutils literal"><span class="pre">allow_ovewrite==False</span></tt> and <tt class="docutils literal"><span class="pre">new_file_name</span></tt> exists, raises an exception.</p>
</dd></dl>

<dl class="function">
<dt>
<tt class="descname">makedirs(self, name):</tt></dt>
<dd><p>Creates all missing directories specified by name. Analogue to os.mkdirs().</p>
</dd></dl>

</div>
</div>
</div>


          <footer>
  

  <hr/>

  <p>
      &copy; Copyright 2011, Patrick Kranzlmueller.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>