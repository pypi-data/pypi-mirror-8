

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Versions &mdash; Django FileBrowser 3.5.7 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Django FileBrowser 3.5.7 documentation" href="index.html"/>
        <link rel="next" title="Help" href="help.html"/>
        <link rel="prev" title="Admin Interface" href="admin.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Django FileBrowser</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#settings">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">Settings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="settings.html#main-url-paths-settings">Main URL/Paths Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#filebrowser-media-tinymce-media">FileBrowser Media, TinyMCE Media</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#extensions-and-formats">Extensions and Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#versions">Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#placeholder">Placeholder</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#extra-settings">Extra Settings</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="filelisting.html">FileListing</a></li>
<li class="toctree-l2"><a class="reference internal" href="fileobject.html">FileObject</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="fieldswidgets.html">Fields &amp; Widgets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fieldswidgets.html#filebrowsefield">FileBrowseField</a></li>
<li class="toctree-l2"><a class="reference internal" href="fieldswidgets.html#fileinput">FileInput</a></li>
<li class="toctree-l2"><a class="reference internal" href="fieldswidgets.html#clearablefileinput">ClearableFileInput</a></li>
<li class="toctree-l2"><a class="reference internal" href="fieldswidgets.html#django-filefield-and-the-filebrowser">Django FileField and the FileBrowser</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="admin.html">Admin Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="admin.html#filebrowser-site">FileBrowser Site</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin.html#custom-actions">Custom Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin.html#file-storages">File Storages</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin.html#views">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin.html#signals">Signals</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Versions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#defining-versions">Defining Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#versions-and-the-admin">Versions and the Admin</a></li>
<li class="toctree-l2"><a class="reference internal" href="#versions-and-the-frontend">Versions and the Frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="#versions-in-views">Versions in Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="#placeholder">Placeholder</a></li>
<li class="toctree-l2"><a class="reference internal" href="#management-commands">Management Commands</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="help.html">Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="translation.html">Translation</a></li>
<li class="toctree-l2"><a class="reference internal" href="releasenotes.html">FileBrowser 3.5 Release Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Django FileBrowser</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Versions</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/versions.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="versions">
<span id="id1"></span><h1>Versions<a class="headerlink" href="#versions" title="Permalink to this headline">¶</a></h1>
<p>With the FileBrowser, you are able to define different versions/sizes for images. This enables you to save an original image on your server while having different versions of that image to automatically fit your websites grid. Versions are also useful for responsive/adaptive layouts.</p>
<div class="section" id="defining-versions">
<h2>Defining Versions<a class="headerlink" href="#defining-versions" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span>New in version 3.4.0: </span><tt class="docutils literal"><span class="pre">methods</span></tt></p>
</div>
<p>First you need to know which versions/sizes of an image you&#8217;d like to generate with your website. Let&#8217;s say you&#8217;re using a 12 column grid with 60px for each column and 20px margin (which is a total of 940px). With this grid, you could (for example) define these image versions.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">FILEBROWSER_VERSIONS_BASEDIR</span> <span class="o">=</span> <span class="s">&#39;_versions&#39;</span>
<span class="n">FILEBROWSER_VERSIONS</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">&#39;admin_thumbnail&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="s">&#39;Admin Thumbnail&#39;</span><span class="p">,</span> <span class="s">&#39;width&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s">&#39;opts&#39;</span><span class="p">:</span> <span class="s">&#39;crop&#39;</span><span class="p">},</span>
  <span class="s">&#39;thumbnail&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="s">&#39;Thumbnail (1 col)&#39;</span><span class="p">,</span> <span class="s">&#39;width&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s">&#39;opts&#39;</span><span class="p">:</span> <span class="s">&#39;crop&#39;</span><span class="p">},</span>
  <span class="s">&#39;small&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="s">&#39;Small (2 col)&#39;</span><span class="p">,</span> <span class="s">&#39;width&#39;</span><span class="p">:</span> <span class="mi">140</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;opts&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">},</span>
  <span class="s">&#39;medium&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="s">&#39;Medium (4col )&#39;</span><span class="p">,</span> <span class="s">&#39;width&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;opts&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">},</span>
  <span class="s">&#39;big&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="s">&#39;Big (6 col)&#39;</span><span class="p">,</span> <span class="s">&#39;width&#39;</span><span class="p">:</span> <span class="mi">460</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;opts&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">},</span>
  <span class="s">&#39;large&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="s">&#39;Large (8 col)&#39;</span><span class="p">,</span> <span class="s">&#39;width&#39;</span><span class="p">:</span> <span class="mi">680</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;opts&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Use the <tt class="docutils literal"><span class="pre">methods</span></tt> argument, if you need to add a filter:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">grayscale</span><span class="p">(</span><span class="n">im</span><span class="p">):</span>
    <span class="s">&quot;Convert image to grayscale&quot;</span>
    <span class="k">if</span> <span class="n">im</span><span class="o">.</span><span class="n">mode</span> <span class="o">!=</span> <span class="s">&quot;L&quot;</span><span class="p">:</span>
        <span class="n">im</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s">&quot;L&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">im</span>

<span class="n">FILEBROWSER_VERSIONS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;big&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="s">&#39;Big (6 col)&#39;</span><span class="p">,</span> <span class="s">&#39;width&#39;</span><span class="p">:</span> <span class="mi">460</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;opts&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;methods&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">grayscale</span><span class="p">]},</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="versions-and-the-admin">
<h2>Versions and the Admin<a class="headerlink" href="#versions-and-the-admin" title="Permalink to this headline">¶</a></h2>
<p>When using the FileBrowser with the admin interface, you need to define <tt class="docutils literal"><span class="pre">ADMIN_VERSIONS</span></tt> and <tt class="docutils literal"><span class="pre">ADMIN_THUMBNAIL</span></tt> (see <a class="reference internal" href="settings.html#settings"><em>Settings</em></a>). <tt class="docutils literal"><span class="pre">ADMIN_VERSIONS</span></tt> are available with the admin, i.e. you are able to see these versions with the image detail view and you are able to select the versions with the <a class="reference internal" href="fieldswidgets.html#filebrowsefield"><em>FileBrowseField</em></a> model field.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">FILEBROWSER_ADMIN_VERSIONS</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;thumbnail&#39;</span><span class="p">,</span> <span class="s">&#39;small&#39;</span><span class="p">,</span> <span class="s">&#39;medium&#39;</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span class="p">,</span> <span class="s">&#39;large&#39;</span><span class="p">]</span>
<span class="n">FILEBROWSER_ADMIN_THUMBNAIL</span> <span class="o">=</span> <span class="s">&#39;admin_thumbnail&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="versions-and-the-frontend">
<h2>Versions and the Frontend<a class="headerlink" href="#versions-and-the-frontend" title="Permalink to this headline">¶</a></h2>
<p>With your templates, you have two different tags to choose from: <tt class="docutils literal"><span class="pre">version</span></tt> and <tt class="docutils literal"><span class="pre">version_object</span></tt>. With both tags, the version will be generated if it doesn&#8217;t already exist OR if the original image is newer than the version. In order to update an image, you just overwrite the original image and the versions will be generated automatically (as you request them within your template).</p>
<p>A Model example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">filebrowser.fields</span> <span class="kn">import</span> <span class="n">FileBrowseField</span>

<span class="k">class</span> <span class="nc">BlogEntry</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">FileBrowseField</span><span class="p">(</span><span class="s">&quot;Image&quot;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>With your templates, use <tt class="docutils literal"><span class="pre">version</span></tt> if you simply need to retrieve the URL or <tt class="docutils literal"><span class="pre">version_object</span></tt> if you need to get a <a class="reference internal" href="fileobject.html#fileobject"><em>FileObject</em></a>:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="c">&lt;!-- load filebrowser templatetags --&gt;</span>
{% load fb_versions %}

<span class="c">&lt;!-- get the url with version --&gt;</span>
<span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;{% version blogentry.image &#39;medium&#39; %}&quot;</span> <span class="nt">/&gt;</span>

<span class="c">&lt;!-- get a fileobject with version_object --&gt;</span>
{% version_object blogentry.image &#39;medium&#39; as version_medium %}
{{ version_medium.width }}
<span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;{{ version_medium }}&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="section" id="templatetag-version">
<h3>Templatetag <tt class="docutils literal"><span class="pre">version</span></tt><a class="headerlink" href="#templatetag-version" title="Permalink to this headline">¶</a></h3>
<p>Retrieves/Generates a version and returns an URL:</p>
<div class="highlight-html"><div class="highlight"><pre>{% version model.field_name version_prefix %}
</pre></div>
</div>
</div>
<div class="section" id="templatetag-version-object">
<h3>Templatetag <tt class="docutils literal"><span class="pre">version_object</span></tt><a class="headerlink" href="#templatetag-version-object" title="Permalink to this headline">¶</a></h3>
<p>Retrieves/Generates a version and returns a FileObject:</p>
<div class="highlight-html"><div class="highlight"><pre>{% version_object model.field_name version_prefix as variable %}
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">With both templatetags, <tt class="docutils literal"><span class="pre">version_prefix</span></tt> can either be a string or a variable. If <tt class="docutils literal"><span class="pre">version_prefix</span></tt> is a string, use quotes.</p>
</div>
</div>
</div>
<div class="section" id="versions-in-views">
<h2>Versions in Views<a class="headerlink" href="#versions-in-views" title="Permalink to this headline">¶</a></h2>
<p>If you have a <tt class="docutils literal"><span class="pre">FileObject</span></tt> you can generate/retrieve a version with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">v</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">version_generate</span><span class="p">(</span><span class="n">version_prefix</span><span class="p">)</span> <span class="c"># returns a FileObject</span>
</pre></div>
</div>
</div>
<div class="section" id="placeholder">
<h2>Placeholder<a class="headerlink" href="#placeholder" title="Permalink to this headline">¶</a></h2>
<p>When developing on a locale machine or a development-server, you might not have all the images (resp. media-files) available that are on your production instance and downloading these files on a regular basis might not be an option.</p>
<p>In that case, you can use a placeholder instead of a version. You just need to define the <tt class="docutils literal"><span class="pre">PLACEHOLDER</span></tt> and overwrite the settings <tt class="docutils literal"><span class="pre">SHOW_PLACEHOLDER</span></tt> and/or <tt class="docutils literal"><span class="pre">FORCE_PLACEHOLDER</span></tt> (see <a class="reference internal" href="settings.html#settingsplaceholder"><em>Placeholder</em></a>).</p>
</div>
<div class="section" id="management-commands">
<h2>Management Commands<a class="headerlink" href="#management-commands" title="Permalink to this headline">¶</a></h2>
<dl class="option">
<dt>
<tt class="descname">fb_version_generate</tt></dt>
<dd><p>If you need to generate certain (or all) versions, type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">fb_version_generate</span>
</pre></div>
</div>
</dd></dl>

<dl class="option">
<dt>
<tt class="descname">fb_version_remove</tt></dt>
<dd><p>If you need to generate certain (or all) versions, type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">fb_version_generate</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Please be very careful with this command.</p>
</div>
</dd></dl>

</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="help.html" class="btn btn-neutral float-right" title="Help"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="admin.html" class="btn btn-neutral" title="Admin Interface"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2011, Patrick Kranzlmueller.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'3.5.7',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>