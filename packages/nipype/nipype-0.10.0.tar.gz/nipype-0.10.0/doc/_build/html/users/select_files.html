<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Neuroimaging in Python - Pipelines and Interfaces &mdash; nipy pipeline and interfaces package</title>
    
    <link rel="stylesheet" href="../_static/nipype.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.10.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="nipy pipeline and interfaces package" href="../index.html" />
 
<meta name="keywords" content="nipype, neuroimaging, pipeline, workflow, parallel, python, neuroscience">
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-339450-7', 'nipy.org/nipype');
  ga('send', 'pageview');
</script>

  </head>
  <body>
<div class="header-wrapper">
    <div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
            <a href="../index.html">
            <img src="../_static/nipype-banner-bg.png" alt="NIPY logo"  border="0" />
        <div style="margin-top: 1em;
                border-top: 1px solid #AAA;
                border-bottom: 1px solid #AAA;
                border-radius: 5px;
                padding: 3px 1em;">
            <link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css" />
<style type="text/css">
    a.navbar {
    color: ;
    letter-spacing: .05em;
    font-weight: bold;
        }
</style>

<a class="navbar" href="../index.html">Home</a> ·
<a class="navbar" href="../quickstart.html">Quickstart</a> ·
<a class="navbar" href="../documentation.html">Documentation</a> ·
<a class="navbar" href="../about.html">Citation</a> ·
<a class="navbar" href="http://nipy.org">NiPy</a>

        </div>
    </div>
</div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<style type="text/css">
    input.gsc-input {
        border-color: #BCCDF0;
    }
    input.gsc-search-button {
        border-color: #666666;
        background-color: #CECECE;
        padding: 0;
    }
    div.sphinxsidebar .tile {
        border: 1px solid #D1DDE2;
        border-radius: 10px;
        background-color: #E1E8EC;
        padding-left: 0.5em;
        margin: 1em 0;
    }
    div.sphinxsidebar input[type="text"] {
        width: 100%;
    }
    div.sphinxsidebar input[type="submit"] {
        width: 100%;
    }
</style>

<div class="sidebarblock">
    <div id="cse-search-form">Loading</div>

    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript">
        google.load('search', '1', {language : 'en'});
        google.setOnLoadCallback(function() {
            var customSearchControl = new google.search.CustomSearchControl(
                    '010960497803984932957:u8pmqf7fdoq');

            customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
            var options = new google.search.DrawOptions();
            options.enableSearchboxOnly("../searchresults.html");
            customSearchControl.draw('cse-search-form', options);
        }, true);
    </script>
</div>

<style type="text/css">
    div.sphinxsidebar .tile {
        border: 1px solid #D1DDE2;
        border-radius: 10px;
        background-color: #E1E8EC;
        padding-left: 0.5em;
        margin: 1em 0;
    }
</style>
<div class="sidebarblock">
    <h3>Versions</h3>

    <div class="tile">
        <table style="width: 100%;">
            <tr style="font-weight: bold;">
                <td align="left">Release</td><td align="right">Devel</td>
            </tr>
            <tr>
                <td align="left">0.10.0</td><td align="right">1.0-dev</td>
            </tr>
            <tr>
                <td align="left"><a href="install.html">Download</a></td>
                <td align="right"><a href="https://github.com/nipy/nipype">Github</a></td>
            </tr>
        </table>
    </div>

    <div id="buttons">
        <div id="ohloh-use" style="margin-right: 25px; margin-top: -2px; float: left;">
            <script type="text/javascript"
                    src="http://www.ohloh.net/p/480871/widgets/project_users_logo.js">
            </script>
        </div><!-- use -->
        <g:plusone size="medium" annotation="none"></g:plusone>
        <div class="clear"></div>
    </div><!-- buttons container -->
</div>


<script type="text/javascript">
    (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
</script>

<h3>Links</h3>

<ul>
    <li>Docs: <a href="http://nipy.org/nipype">Stable</a> · <a href="http://www.mit.edu/~satra/nipype-nightly/">Nightly</a></li>
    <li>Code: <a href="http://github.com/nipy/nipype">Github</a> · <a href="http://github.com/nipy/nipype/issues">Bugs-Requests</a></li>
    <li>Forum: <a href="http://neurostars.org/t/nipype">User</a> · <a href="http://projects.scipy.org/mailman/listinfo/nipy-devel">Developer</a></li>
    <li><a href="http://nipy.org/software/license/index.html"><img src="https://pypip.in/license/nipype/badge.png" alt="License"></a> · <a href="http://nipy.org/about/funding.html">Funding</a></li>
    <li><a href="https://travis-ci.org/nipy/nipype"><img src="https://travis-ci.org/nipy/nipype.png?branch=master" alt="travis"></a> · <a href='https://coveralls.io/r/nipy/nipype'><img src='https://coveralls.io/repos/nipy/nipype/badge.png' alt='Coverage Status' /></a></li>
    <li><a href="https://pypi.python.org/pypi/nipype/"><img src="https://pypip.in/download/nipype/badge.png" alt="Downloads"></a> · <a href='https://pypi.python.org/pypi/nipype/'><img src='https://pypip.in/py_versions/nipype/badge.png' alt='Python Versions' /></a></li>
</ul>


        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="the-selectfiles-interfaces">
<span id="select-files"></span><h1>The SelectFiles Interfaces<a class="headerlink" href="#the-selectfiles-interfaces" title="Permalink to this headline">¶</a></h1>
<p>Nipype 0.9 introduces a new interface for intelligently finding files on the
disk and feeding them into your workflows: <a class="reference internal" href="../interfaces/generated/nipype.interfaces.io.html#nipype-interfaces-io-selectfiles"><em>SelectFiles</em></a>. SelectFiles is intended as a simpler
alternative to the <em class="xref std std-ref">DataGrabber</em>
interface that was discussed previously in <a class="reference internal" href="grabbing_and_sinking.html"><em>DataGrabber and DataSink explained</em></a>.</p>
<p>SelectFiles is built on Python <a class="reference external" href="http://docs.python.org/2/library/string.html#format-string-syntax">format strings</a>, which
are similar to the Python string interpolation feature you are likely already
familiar with, but advantageous in several respects. Format strings allow you
to replace named sections of template strings set off by curly braces (<cite>{}</cite>),
possibly filtered through a set of functions that control how the values are
rendered into the string. As a very basic example, we could write</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;This workflow uses {package}&quot;</span>
</pre></div>
</div>
<p>and then format it with keyword arguments:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package</span><span class="o">=</span><span class="s">&quot;FSL&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>SelectFiles only requires that you provide templates that can be used to find
your data; the actual formatting happens behind the scenes.</p>
<p>Consider a basic example in which you want to select a T1 image and multple
functional images for a number of subjects. Invoking SelectFiles in this case
is quite straightforward:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">nipype</span> <span class="kn">import</span> <span class="n">SelectFiles</span>
<span class="n">templates</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">T1</span><span class="o">=</span><span class="s">&quot;data/{subject_id}/struct/T1.nii&quot;</span><span class="p">,</span>
                 <span class="n">epi</span><span class="o">=</span><span class="s">&quot;data/{subject_id}/func/epi_run*.nii&quot;</span><span class="p">)</span>
<span class="n">sf</span> <span class="o">=</span> <span class="n">SelectFiles</span><span class="p">(</span><span class="n">templates</span><span class="p">)</span>
</pre></div>
</div>
<p>SelectFiles will take the <cite>templates</cite> dictionary and parse it to determine its
own inputs and oututs. Specifically, each name used in the format spec (here
just <cite>subject_id</cite>) will become an interface input, and each key in the
dictionary (here <cite>T1</cite> and <cite>epi</cite>) will become interface outputs. The <cite>templates</cite>
dictionary thus succinctly links the node inputs to the appropriate outputs.
You&#8217;ll also note that, as was the case with DataGrabber, you can use basic
<a class="reference external" href="http://docs.python.org/2.7/library/glob.html">glob</a> syntax to match multiple
files for a given output field. Additionally, any of the conversions outlined in the Python documentation for format strings can be used in the templates.</p>
<p>There are a few other options that help make SelectFiles flexible enough to
deal with any situation where you need to collect data. Like DataGrabber,
SelectFiles has a <cite>base_directory</cite> parameter that allows you to specify a path
that is common to all of the values in the <cite>templates</cite> dictionary.
Additionally, as <cite>glob</cite> does not return a sorted list, there is also a
<cite>sort_filelist</cite> option, taking a boolean, to control whether sorting should be
applied (it is True by default).</p>
<p>The final input is <cite>force_lists</cite>, which controls how SelectFiles behaves in
cases where only a single file matches the template. The default behavior is
that when a template matches multiple files they are returned as a list, while
a single file is returned as a string. There may be situations where you want
to force the outputs to always be returned as a list (for example, you are
writing a workflow that expects to operate on several runs of data, but some of
your subjects only have a single run). In this case, <cite>force_lists</cite> can be used
to tune the outputs of the interface. You can either use a boolean value, which
will be applied to every output the interface has, or you can provide a list of
the output fields that should be coerced to a list. Returning to our basic
example, you may want to ensure that the <cite>epi</cite> files are returned as a list,
but you only ever will have a single <cite>T1</cite> file. In this case, you would do</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sf</span> <span class="o">=</span> <span class="n">SelectFiles</span><span class="p">(</span><span class="n">templates</span><span class="p">,</span> <span class="n">force_lists</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;epi&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
        &copy; Copyright 2009-14, Neuroimaging in Python team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
</div>

  </body>
</html>