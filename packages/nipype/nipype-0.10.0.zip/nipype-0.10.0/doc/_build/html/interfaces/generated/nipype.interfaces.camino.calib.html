<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Neuroimaging in Python - Pipelines and Interfaces &mdash; nipy pipeline and interfaces package</title>
    
    <link rel="stylesheet" href="../../_static/nipype.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.10.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="top" title="nipy pipeline and interfaces package" href="../../index.html" />
 
<meta name="keywords" content="nipype, neuroimaging, pipeline, workflow, parallel, python, neuroscience">
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-339450-7', 'nipy.org/nipype');
  ga('send', 'pageview');
</script>

  </head>
  <body>
<div class="header-wrapper">
    <div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
            <a href="../../index.html">
            <img src="../../_static/nipype-banner-bg.png" alt="NIPY logo"  border="0" />
        <div style="margin-top: 1em;
                border-top: 1px solid #AAA;
                border-bottom: 1px solid #AAA;
                border-radius: 5px;
                padding: 3px 1em;">
            <link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css" />
<style type="text/css">
    a.navbar {
    color: ;
    letter-spacing: .05em;
    font-weight: bold;
        }
</style>

<a class="navbar" href="../../index.html">Home</a> ·
<a class="navbar" href="../../quickstart.html">Quickstart</a> ·
<a class="navbar" href="../../documentation.html">Documentation</a> ·
<a class="navbar" href="../../about.html">Citation</a> ·
<a class="navbar" href="http://nipy.org">NiPy</a>

        </div>
    </div>
</div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<style type="text/css">
    input.gsc-input {
        border-color: #BCCDF0;
    }
    input.gsc-search-button {
        border-color: #666666;
        background-color: #CECECE;
        padding: 0;
    }
    div.sphinxsidebar .tile {
        border: 1px solid #D1DDE2;
        border-radius: 10px;
        background-color: #E1E8EC;
        padding-left: 0.5em;
        margin: 1em 0;
    }
    div.sphinxsidebar input[type="text"] {
        width: 100%;
    }
    div.sphinxsidebar input[type="submit"] {
        width: 100%;
    }
</style>

<div class="sidebarblock">
    <div id="cse-search-form">Loading</div>

    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript">
        google.load('search', '1', {language : 'en'});
        google.setOnLoadCallback(function() {
            var customSearchControl = new google.search.CustomSearchControl(
                    '010960497803984932957:u8pmqf7fdoq');

            customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
            var options = new google.search.DrawOptions();
            options.enableSearchboxOnly("../../searchresults.html");
            customSearchControl.draw('cse-search-form', options);
        }, true);
    </script>
</div>

  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">interfaces.camino.calib</a><ul>
<li><a class="reference internal" href="#sflutgen">SFLUTGen</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sfpicocalibdata">SFPICOCalibData</a><ul>
<li><a class="reference internal" href="#example-1">Example 1</a></li>
<li><a class="reference internal" href="#example-2">Example 2</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<style type="text/css">
    div.sphinxsidebar .tile {
        border: 1px solid #D1DDE2;
        border-radius: 10px;
        background-color: #E1E8EC;
        padding-left: 0.5em;
        margin: 1em 0;
    }
</style>
<div class="sidebarblock">
    <h3>Versions</h3>

    <div class="tile">
        <table style="width: 100%;">
            <tr style="font-weight: bold;">
                <td align="left">Release</td><td align="right">Devel</td>
            </tr>
            <tr>
                <td align="left">0.10.0</td><td align="right">1.0-dev</td>
            </tr>
            <tr>
                <td align="left"><a href="../../users/install.html">Download</a></td>
                <td align="right"><a href="https://github.com/nipy/nipype">Github</a></td>
            </tr>
        </table>
    </div>

    <div id="buttons">
        <div id="ohloh-use" style="margin-right: 25px; margin-top: -2px; float: left;">
            <script type="text/javascript"
                    src="http://www.ohloh.net/p/480871/widgets/project_users_logo.js">
            </script>
        </div><!-- use -->
        <g:plusone size="medium" annotation="none"></g:plusone>
        <div class="clear"></div>
    </div><!-- buttons container -->
</div>


<script type="text/javascript">
    (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
</script>

<h3>Links</h3>

<ul>
    <li>Docs: <a href="http://nipy.org/nipype">Stable</a> · <a href="http://www.mit.edu/~satra/nipype-nightly/">Nightly</a></li>
    <li>Code: <a href="http://github.com/nipy/nipype">Github</a> · <a href="http://github.com/nipy/nipype/issues">Bugs-Requests</a></li>
    <li>Forum: <a href="http://neurostars.org/t/nipype">User</a> · <a href="http://projects.scipy.org/mailman/listinfo/nipy-devel">Developer</a></li>
    <li><a href="http://nipy.org/software/license/index.html"><img src="https://pypip.in/license/nipype/badge.png" alt="License"></a> · <a href="http://nipy.org/about/funding.html">Funding</a></li>
    <li><a href="https://travis-ci.org/nipy/nipype"><img src="https://travis-ci.org/nipy/nipype.png?branch=master" alt="travis"></a> · <a href='https://coveralls.io/r/nipy/nipype'><img src='https://coveralls.io/repos/nipy/nipype/badge.png' alt='Coverage Status' /></a></li>
    <li><a href="https://pypi.python.org/pypi/nipype/"><img src="https://pypip.in/download/nipype/badge.png" alt="Downloads"></a> · <a href='https://pypi.python.org/pypi/nipype/'><img src='https://pypip.in/py_versions/nipype/badge.png' alt='Python Versions' /></a></li>
</ul>


        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="interfaces-camino-calib">
<h1>interfaces.camino.calib<a class="headerlink" href="#interfaces-camino-calib" title="Permalink to this headline">¶</a></h1>
<span class="target" id="nipype-interfaces-camino-calib-sflutgen"></span><div class="section" id="sflutgen">
<span id="index-0"></span><h2>SFLUTGen<a class="headerlink" href="#sflutgen" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/e63e055194d62d2bdc4665688261c03a42fd0025/nipype/interfaces/camino/calib.py#L174">Link to code</a></p>
<p>Wraps command <strong>sflutgen</strong></p>
<p>Generates PICo lookup tables (LUT) for multi-fibre methods such as
PASMRI and Q-Ball.</p>
<p>SFLUTGen creates the lookup tables for the generalized multi-fibre
implementation of the PICo tractography algorithm.  The outputs of
this utility are either surface or line coefficients up to a given
order. The calibration can be performed for different distributions,
such as the Bingham and Watson distributions.</p>
<p>This utility uses calibration data generated from SFPICOCalibData
and peak information created by SFPeaks.</p>
<p>The utility outputs two lut&#8217;s, <a href="#id1"><span class="problematic" id="id2">*</span></a>_oneFibreSurfaceCoeffs.Bdouble and
<a href="#id3"><span class="problematic" id="id4">*</span></a>_twoFibreSurfaceCoeffs.Bdouble. Each of these files contains big-
endian doubles as standard. The format of the output is:</p>
<blockquote>
<div>dimensions    (1 for Watson, 2 for Bingham)
order         (the order of the polynomial)
coefficient_1
coefficient_2
~~~
coefficient_N</div></blockquote>
<p>In  the case of the Watson, there is a single set of coefficients,
which are ordered:</p>
<blockquote>
<div>constant, x, x^2, ..., x^order.</div></blockquote>
<p>In the case of the Bingham, there are two sets of coefficients (one
for each surface), ordered so that:</p>
<blockquote>
<div><dl class="docutils">
<dt>for j = 1 to order</dt>
<dd><dl class="first last docutils">
<dt>for k = 1 to order</dt>
<dd>coeff_i = x^j * y^k</dd>
</dl>
</dd>
</dl>
<p>where j+k &lt; order</p>
</div></blockquote>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>To create a calibration dataset using the default settings</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nipype.interfaces.camino</span> <span class="kn">as</span> <span class="nn">cam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lutgen</span> <span class="o">=</span> <span class="n">cam</span><span class="o">.</span><span class="n">SFLUTGen</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lutgen</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s">&#39;QSH_peaks.Bdouble&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lutgen</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">info_file</span> <span class="o">=</span> <span class="s">&#39;PICO_calib.info&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lutgen</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>        
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-python"><div class="highlight"><pre>[Mandatory]
in_file: (an existing file name)
        Voxel-order data of the spherical functions peaks.
        flag: -inputfile %s
info_file: (a file name)
        The Info file that corresponds to the calibration datafile used in
        the reconstruction.
        flag: -infofile %s
terminal_output: (&#39;stream&#39; or &#39;allatonce&#39; or &#39;file&#39; or &#39;none&#39;)
        Control terminal output: `stream` - displays to terminal
        immediately, `allatonce` - waits till command is finished to display
        output, `file` - writes output to file, `none` - output is ignored

[Optional]
args: (a string)
        Additional parameters to the command
        flag: %s
binincsize: (an integer)
        Sets the size of the bins. In the case of 2D histograms such as the
        Bingham, the bins are always square. Default is 1.
        flag: -binincsize %d
directmap: (a boolean)
        Use direct mapping between the eigenvalues and the distribution
        parameters instead of the log of the eigenvalues.
        flag: -directmap
environ: (a dictionary with keys which are a value of type &#39;str&#39; and
         with values which are a value of type &#39;str&#39;, nipype default value:
         {})
        Environment variables
ignore_exception: (a boolean, nipype default value: False)
        Print an error message instead of throwing an exception in case the
        interface fails to run
minvectsperbin: (an integer)
        Specifies the minimum number of fibre-orientation estimates a bin
        must contain before it is used in the lut line/surface generation.
        Default is 50. If you get the error &quot;no fibre-orientation estimates
        in histogram!&quot;, the calibration data set is too small to get enough
        samples in any of the histogram bins. You can decrease the minimum
        number per bin to get things running in quick tests, but the sta-
        tistics will not be reliable and for serious applications, you need
        to increase the size of the calibration data set until the error
        goes.
        flag: -minvectsperbin %d
order: (an integer)
        The order of the polynomial fitting the surface. Order 1 is linear.
        Order 2 (default) is quadratic.
        flag: -order %d
out_file: (a file name)
        flag: &gt; %s, position: -1
outputstem: (a string, nipype default value: LUT)
        Define the name of the generated luts. The form of the filenames
        will be [outputstem]_oneFibreSurfaceCoeffs.Bdouble and
        [outputstem]_twoFibreSurfaceCoeffs.Bdouble
        flag: -outputstem %s
pdf: (&#39;bingham&#39; or &#39;watson&#39;, nipype default value: bingham)
        Sets the distribution to use for the calibration. The default is the
        Bingham distribution, which allows elliptical probability density
        contours. Currently supported options are: bingham - The Bingham
        distribution, which allows elliptical probability density contours.
        watson - The Watson distribution. This distribution is rotationally
        symmetric.
        flag: -pdf %s
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-python"><div class="highlight"><pre>lut_one_fibre: (an existing file name)
        PICo lut for one-fibre model
lut_two_fibres: (an existing file name)
        PICo lut for two-fibre model
</pre></div>
</div>
<span class="target" id="nipype-interfaces-camino-calib-sfpicocalibdata"></span></div>
</div>
<div class="section" id="sfpicocalibdata">
<span id="index-1"></span><h2>SFPICOCalibData<a class="headerlink" href="#sfpicocalibdata" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/e63e055194d62d2bdc4665688261c03a42fd0025/nipype/interfaces/camino/calib.py#L64">Link to code</a></p>
<p>Wraps command <strong>sfpicocalibdata</strong></p>
<p>Generates Spherical Function PICo Calibration Data.</p>
<p>SFPICOCalibData creates synthetic data for use with SFLUTGen. The
synthetic data is generated using a mixture of gaussians, in the
same way datasynth generates data.  Each voxel of data models a
slightly different fibre configuration (varying FA and fibre-
crossings) and undergoes a random rotation to help account for any
directional bias in the chosen acquisition scheme.  A second file,
which stores information about the datafile, is generated along with
the datafile.</p>
<div class="section" id="example-1">
<h3>Example 1<a class="headerlink" href="#example-1" title="Permalink to this headline">¶</a></h3>
<p>To create a calibration dataset using the default settings</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nipype.interfaces.camino</span> <span class="kn">as</span> <span class="nn">cam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span> <span class="o">=</span> <span class="n">cam</span><span class="o">.</span><span class="n">SFPICOCalibData</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">scheme_file</span> <span class="o">=</span> <span class="s">&#39;A.scheme&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">snr</span> <span class="o">=</span> <span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">info_file</span> <span class="o">=</span> <span class="s">&#39;PICO_calib.info&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>           
</pre></div>
</div>
<p>The default settings create a large dataset (249,231 voxels), of
which 3401 voxels contain a single fibre population per voxel and
the rest of the voxels contain two fibre-populations. The amount of
data produced can be varied by specifying the ranges and steps of
the parameters for both the one and two fibre datasets used.</p>
</div>
<div class="section" id="example-2">
<h3>Example 2<a class="headerlink" href="#example-2" title="Permalink to this headline">¶</a></h3>
<p>To create a custom calibration dataset</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nipype.interfaces.camino</span> <span class="kn">as</span> <span class="nn">cam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span> <span class="o">=</span> <span class="n">cam</span><span class="o">.</span><span class="n">SFPICOCalibData</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">scheme_file</span> <span class="o">=</span> <span class="s">&#39;A.scheme&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">snr</span> <span class="o">=</span> <span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">info_file</span> <span class="o">=</span> <span class="s">&#39;PICO_calib.info&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">twodtfarange</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">twodtfastep</span> <span class="o">=</span> <span class="mf">0.02</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">twodtanglerange</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.785</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">twodtanglestep</span> <span class="o">=</span> <span class="mf">0.03925</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">twodtmixmax</span> <span class="o">=</span> <span class="mf">0.8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">twodtmixstep</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>              
</pre></div>
</div>
<p>This would provide 76,313 voxels of synthetic data, where 3401 voxels
simulate the one fibre cases and 72,912 voxels simulate the various
two fibre cases. However, care should be taken to ensure that enough
data is generated for calculating the LUT.      # doctest: +SKIP</p>
<p>Inputs:</p>
<div class="highlight-python"><div class="highlight"><pre>[Mandatory]
info_file: (a file name)
        The name to be given to the information output filename.
        flag: -infooutputfile %s
scheme_file: (an existing file name)
        Specifies the scheme file for the diffusion MRI data
        flag: -schemefile %s
terminal_output: (&#39;stream&#39; or &#39;allatonce&#39; or &#39;file&#39; or &#39;none&#39;)
        Control terminal output: `stream` - displays to terminal
        immediately, `allatonce` - waits till command is finished to display
        output, `file` - writes output to file, `none` - output is ignored

[Optional]
args: (a string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a value of type &#39;str&#39; and
         with values which are a value of type &#39;str&#39;, nipype default value:
         {})
        Environment variables
ignore_exception: (a boolean, nipype default value: False)
        Print an error message instead of throwing an exception in case the
        interface fails to run
onedtfarange: (a list of from 2 to 2 items which are a float)
        Minimum and maximum FA for the single tensor synthetic data.
        flag: -onedtfarange %s
onedtfastep: (a float)
        FA step size controlling how many steps there are between the
        minimum and maximum FA settings.
        flag: -onedtfastep %f
out_file: (a file name)
        flag: &gt; %s, position: -1
seed: (a float)
        Specifies the random seed to use for noise generation in simulation
        trials.
        flag: -seed %f
snr: (a float)
        Specifies the signal-to-noise ratio of the non-diffusion-weighted
        measurements to use in simulations.
        flag: -snr %f
trace: (a float)
        Trace of the diffusion tensor(s) used in the test function.
        flag: -trace %f
twodtanglerange: (a list of from 2 to 2 items which are a float)
        Minimum and maximum crossing angles between the two fibres.
        flag: -twodtanglerange %s
twodtanglestep: (a float)
        Angle step size controlling how many steps there are between the
        minimum and maximum crossing angles for the two tensor cases.
        flag: -twodtanglestep %f
twodtfarange: (a list of from 2 to 2 items which are a float)
        Minimum and maximum FA for the two tensor synthetic data. FA is
        varied for both tensors to give all the different permutations.
        flag: -twodtfarange %s
twodtfastep: (a float)
        FA step size controlling how many steps there are between the
        minimum and maximum FA settings for the two tensor cases.
        flag: -twodtfastep %f
twodtmixmax: (a float)
        Mixing parameter controlling the proportion of one fibre population
        to the other. The minimum mixing parameter is (1 - twodtmixmax).
        flag: -twodtmixmax %f
twodtmixstep: (a float)
        Mixing parameter step size for the two tensor cases. Specify how
        many mixing parameter increments to use.
        flag: -twodtmixstep %f
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-python"><div class="highlight"><pre>PICOCalib: (an existing file name)
        Calibration dataset
calib_info: (an existing file name)
        Calibration dataset
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
        &copy; Copyright 2009-14, Neuroimaging in Python team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
</div>

  </body>
</html>