<tal:thumbnail condition="python:'NO_THUMBNAIL' not in context.Subject()" >
    <div id="thumbnail-viewlet"      
         tal:attributes="class view/context/portal_type"
         tal:condition="not: view/context/@@plone_context_state/is_structural_folder" >

        <div tal:condition="python: view.context.portal_type != 'File'">
            <img class="thumbnail" src="++resource++ityou.thumbnails.images/no-thumbnail.png" />
        </div>

        <div tal:condition="python: view.context.portal_type == 'File'">

            <tal:def define="video_formats   python:['.ogg','.ogv','.mpg','.mp4'];
                            filename         python:view.context.getFilename()">


                <div tal:condition="python:filename[-4:] not in video_formats">
	                <a tal:attributes="href view/context/absolute_url"  >
                        <img class="thumbnail" src="++resource++ityou.thumbnails.images/no-thumbnail.png" />
	                </a>
                </div>


                <div tal:condition="python:filename[-4:] in video_formats" tal:on-error="string:XXXXXXXXXXXXXX">
                    <!--   <style type="text/css">#thumbnail-viewlet {display:none !important;}</style> -->

                   <video width="100%" autobuffer  controls>
                        <source tal:condition="python:filename[-3:] == 'ogv'" tal:attributes="src context/absolute_url" type="video/ogg"  />
                        <source tal:condition="python:filename[-3:] == 'mp4'" tal:attributes="src context/absolute_url" type="video/mp4"  />
                        <source tal:condition="python:filename[-3:] == 'mpg'" tal:attributes="src context/absolute_url" type="video/mpg"  />
                  </video>

                </div>

                    
            </tal:def>

        </div>


        <!-- via ajax geladen -->
        <div id="document_path" style="display: none;"  tal:content="view/context/absolute_url"></div>


    </div>


</tal:thumbnail>

