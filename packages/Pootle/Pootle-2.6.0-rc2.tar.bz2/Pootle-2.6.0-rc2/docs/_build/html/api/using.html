<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using Pootle API &mdash; Pootle 2.6.0-rc1 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.6.0-rc1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Pootle 2.6.0-rc1 documentation" href="../index.html" />
    <link rel="up" title="Pootle API" href="index.html" />
    <link rel="next" title="Language resources" href="api_language.html" />
    <link rel="prev" title="Pootle API" href="index.html" /> 
  </head>
  <body>
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="brand" href="../index.html">Pootle</a>
        <span class="navbar-text pull-left"><b>2.6.0</b></span>
          <ul class="nav">
            <li class="divider-vertical"></li>
            
              <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../users/index.html">User&#8217;s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/index.html">Administering a server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">Developers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Pootle API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external_docs.html">External documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>
</ul>
</li>
              
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Using Pootle API</a><ul>
<li><a class="reference internal" href="#how-to-perform-api-queries">How to perform API queries</a><ul>
<li><a class="reference internal" href="#list-matching-a-criteria">List matching a criteria</a></li>
</ul>
</li>
<li><a class="reference internal" href="#authentication">Authentication</a></li>
<li><a class="reference internal" href="#authorization">Authorization</a></li>
<li><a class="reference internal" href="#formats">Formats</a></li>
<li><a class="reference internal" href="#tools-and-libraries">Tools and libraries</a></li>
</ul>
</li>
</ul>
</ul>
</li>
            
            
              
  <li><a href="index.html"
         title="previous chapter">&laquo; Pootle API</a></li>
  <li><a href="api_language.html"
         title="next chapter">Language resources &raquo;</a></li>
            
          </ul>
          <ul class="nav pull-right">
            
              
            
          
            
<form class="navbar-search pull-right" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
          </ul>
        </div>
      </div>
    </div>
  </div>

<div class="container content">
   
  <div class="section" id="using-pootle-api">
<span id="id1"></span><h1>Using Pootle API<a class="headerlink" href="#using-pootle-api" title="Permalink to this headline">¶</a></h1>
<p>In order to use the Pootle API it is necessary to know how some things, like the
supported formats, available authentication methods or basic rules for
performing queries.</p>
<p>Pootle API is created using <a class="reference external" href="http://tastypieapi.org/">Tastypie</a> so you might
need to refer to <a class="reference external" href="http://django-tastypie.readthedocs.org/">its documentation</a>
as well.</p>
<div class="section" id="how-to-perform-api-queries">
<span id="using-pootle-api-how-to-perform-queries"></span><h2>How to perform API queries<a class="headerlink" href="#how-to-perform-api-queries" title="Permalink to this headline">¶</a></h2>
<p>The structure of the API URLs is <tt class="docutils literal"><span class="pre">&lt;SERVER&gt;/api/&lt;API_VERSION&gt;/&lt;QUERY&gt;</span></tt> where:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Placeholder</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&lt;SERVER&gt;</td>
<td>The URL of the Pootle server</td>
</tr>
<tr class="row-odd"><td>&lt;API_VERSION&gt;</td>
<td>Version number of the API</td>
</tr>
<tr class="row-even"><td>&lt;QUERY&gt;</td>
<td>Resource query URI</td>
</tr>
</tbody>
</table>
<p>So the API can be queried using URLs like:</p>
<div class="highlight-python"><div class="highlight"><pre>http://pootle.locamotion.org/api/v1/translation-projects/65/
</pre></div>
</div>
<div class="section" id="list-matching-a-criteria">
<span id="using-pootle-api-list-matching-a-criteria"></span><h3>List matching a criteria<a class="headerlink" href="#list-matching-a-criteria" title="Permalink to this headline">¶</a></h3>
<p>For some resources it is also possible to narrow down the list by providing a
<a class="reference external" href="https://en.wikipedia.org/wiki/Query_string">query string</a> containing filters <a class="reference external" href="http://django-tastypie.readthedocs.org/en/latest/resources.html#basic-filtering">provided by Tastypie</a>
(that actually are <a class="reference external" href="https://docs.djangoproject.com/en/dev/ref/models/querysets/#field-lookups">Django ORM Field Lookups</a>).</p>
<p>In this case the structure of the API URLs is
<tt class="docutils literal"><span class="pre">&lt;SERVER&gt;/api/&lt;API_VERSION&gt;/&lt;RESOURCE&gt;/?&lt;CRITERIA&gt;</span></tt> where <tt class="docutils literal"><span class="pre">&lt;CRITERIA&gt;</span></tt> is
the query string. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>http://pootle.locamotion.org/api/v1/units/?mtime__month=05&amp;mtime__day=12&amp;state__exact=200
</pre></div>
</div>
</div>
</div>
<div class="section" id="authentication">
<span id="using-pootle-api-authentication"></span><h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<p>Pootle requires authentication for accessing its API.</p>
<p>The method used for authentication is <a class="reference external" href="https://en.wikipedia.org/wiki/Basic_access_authentication">HTTP Basic Authentication</a> which requires providing a username and a
password (the same ones used for Pootle login).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Other authentication methods can be added in the future.</p>
</div>
</div>
<div class="section" id="authorization">
<span id="using-pootle-api-authorization"></span><h2>Authorization<a class="headerlink" href="#authorization" title="Permalink to this headline">¶</a></h2>
<p>The Pootle API allows to interact with resources that represent some of the
data handled internally by Pootle. In order to avoid all users access or alter
data they are not meant to, the Pootle API checks if the visitor has enough
permissions to perform the requested actions on the resources. The permissions
used for these checks are the same permissions used in Pootle for regular
users.</p>
<p>For some particular resources some other checks can be done to allow or deny
performing the requested action. For example the visitors can only see the
<a class="reference internal" href="api_user.html#api-user-resources"><em>User resource</em></a> for the user that they used to log
in the Pootle API.</p>
</div>
<div class="section" id="formats">
<span id="using-pootle-api-formats"></span><h2>Formats<a class="headerlink" href="#formats" title="Permalink to this headline">¶</a></h2>
<p>By default Pootle API returns only <a class="reference external" href="https://en.wikipedia.org/wiki/JSON">JSON</a> replies. It is possible to use all
the <a class="reference external" href="https://django-tastypie.readthedocs.org/en/latest/settings.html#settings-tastypie-default-formats" title="(in Tastypie v0.12.1)"><em class="xref std std-ref">formats supported</em></a> by
Tastypie.</p>
</div>
<div class="section" id="tools-and-libraries">
<span id="using-pootle-api-tools-libraries"></span><h2>Tools and libraries<a class="headerlink" href="#tools-and-libraries" title="Permalink to this headline">¶</a></h2>
<p>Translate is currently developing a <a class="reference external" href="https://github.com/translate/pootle-client">client for Pootle API</a>, but there are several other
<a class="reference external" href="https://django-tastypie.readthedocs.org/en/latest/tools.html#ref-tools" title="(in Tastypie v0.12.1)"><em class="xref std std-ref">libraries and programs</em></a> capable of interacting with
Pootle API. For example here is an example script that uses <a class="reference external" href="http://slumber.readthedocs.org/">Slumber</a> to retrieve and print the list of used
languages in Pootle:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">slumber</span>

<span class="c"># Change the following to match your Pootle URL, your username and password.</span>
<span class="n">API_URL</span> <span class="o">=</span> <span class="s">&quot;http://127.0.0.1:8000/api/v1/&quot;</span>
<span class="n">AUTH</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;admin&#39;</span><span class="p">,</span> <span class="s">&#39;admin&#39;</span><span class="p">)</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">slumber</span><span class="o">.</span><span class="n">API</span><span class="p">(</span><span class="n">API_URL</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">AUTH</span><span class="p">)</span>

<span class="c"># Get all languages data.</span>
<span class="n">lang_data</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">languages</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">lang_data</span><span class="p">[</span><span class="s">&quot;objects&quot;</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">lang</span><span class="p">[</span><span class="s">&quot;code&quot;</span><span class="p">])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Remember to <a class="reference external" href="http://slumber.readthedocs.org/">install Slumber</a> in
order to run the previous code.</p>
</div>
</div>
</div>


</div>
<hr>

<footer class="footer">
  <div class="container">
    <p class="pull-right"><a href="#">Back to top ↑</a></p>
    <ul class="unstyled muted">
      <li><small>
        &copy; 2004-2014, Translate.<br/>
      </small></li>
      <li><small>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.1.
      </small></li>
    </ul>
  </div>
</footer>
  </body>
</html>