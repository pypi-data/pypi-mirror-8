<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Hacking &mdash; Pootle 2.6.0-rc1 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.6.0-rc1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Pootle 2.6.0-rc1 documentation" href="../index.html" />
    <link rel="up" title="Developers" href="index.html" />
    <link rel="next" title="Customizing the look" href="customization.html" />
    <link rel="prev" title="Pootle Development Roadmap" href="roadmap.html" /> 
  </head>
  <body>
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="brand" href="../index.html">Pootle</a>
        <span class="navbar-text pull-left"><b>2.6.0</b></span>
          <ul class="nav">
            <li class="divider-vertical"></li>
            
              <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../users/index.html">User&#8217;s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/index.html">Administering a server</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Pootle API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external_docs.html">External documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>
</ul>
</li>
              
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Hacking</a><ul>
<li><a class="reference internal" href="#before-doing-anything">Before doing anything</a></li>
<li><a class="reference internal" href="#setting-up-the-development-environment">Setting up the development environment</a><ul>
<li><a class="reference internal" href="#detailed-setup">Detailed setup</a></li>
</ul>
</li>
<li><a class="reference internal" href="#workflow">Workflow</a></li>
<li><a class="reference internal" href="#commits">Commits</a></li>
</ul>
</li>
</ul>
</ul>
</li>
            
            
              
  <li><a href="roadmap.html"
         title="previous chapter">&laquo; Pootle Development Roadmap</a></li>
  <li><a href="customization.html"
         title="next chapter">Customizing the look &raquo;</a></li>
            
          </ul>
          <ul class="nav pull-right">
            
              
            
          
            
<form class="navbar-search pull-right" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
          </ul>
        </div>
      </div>
    </div>
  </div>

<div class="container content">
   
  <div class="section" id="hacking">
<span id="id1"></span><h1>Hacking<a class="headerlink" href="#hacking" title="Permalink to this headline">¶</a></h1>
<p>Want to fix a bug in Pootle? Want to change the behaviour of an existing
feature or add new ones? This section is all about hacking on Pootle, so if you
are interested on the topic, keep reading.</p>
<div class="section" id="before-doing-anything">
<span id="hacking-before"></span><h2>Before doing anything<a class="headerlink" href="#before-doing-anything" title="Permalink to this headline">¶</a></h2>
<p>Before starting any actual work on the source code, make sure that:</p>
<ul class="simple">
<li>There is nobody working on the bug you are trying to fix. See the <a class="reference external" href="http://bugs.locamotion.org/buglist.cgi?list_id=983&amp;resolution=---&amp;query_format=advanced&amp;bug_status=UNCONFIRMED&amp;bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED&amp;product=Pootle">existing
bug reports</a>
and the <a class="reference external" href="https://github.com/translate/pootle/pulls">existing pull requests</a>. In the situation where
somebody else is working on a fix, you can always offer your help.</li>
<li>If you plan to develop a new feature and want to include it upstream, please
first discuss it with the developers <a class="reference external" href="irc://irc.freenode.net/#pootle">on IRC</a> or in the <a class="reference external" href="https://lists.sourceforge.net/lists/listinfo/translate-pootle">translate-pootle mailing list</a> so that it
doesn&#8217;t interfere in current development plans. Also note that adding new
features is relatively easy, but keeping them updated is harder.</li>
</ul>
</div>
<div class="section" id="setting-up-the-development-environment">
<span id="hacking-setup"></span><h2>Setting up the development environment<a class="headerlink" href="#setting-up-the-development-environment" title="Permalink to this headline">¶</a></h2>
<p>The minimum software packages you need for setting up a development environment
include <a class="reference external" href="http://git-scm.org">git</a> and a <a class="reference external" href="http://www.python.org">Python interpreter</a> along with the <a class="reference external" href="http://www.pip-installer.org/">pip installer</a>. Consult the specifics for your operating
system in order to get each package installed successfully.</p>
<p>Once you have the basic requirements in place, you will need to install
Pootle&#8217;s dependencies, which come in shape of Python packages. Instead of
installing them system-wide, we recommend using <a class="reference external" href="http://www.virtualenv.org">virtualenv</a> (and <a class="reference external" href="http://www.doughellmann.com/projects/virtualenvwrapper/">virtualenvwrapper</a> for easing the
management of multiple virtualenvs). This way you can install all the
dependencies at specific versions without interfering with system-wide
packages. You can test on different Python/Django versions in parallel as well.</p>
<div class="section" id="detailed-setup">
<span id="hacking-detailed-setup"></span><h3>Detailed setup<a class="headerlink" href="#detailed-setup" title="Permalink to this headline">¶</a></h3>
<p>For installing the dependencies in an isolated environment, we will use
virtualenv &#8211; more specifically virtualenvwrapper, which eases the process of
managing and switching between multiple virtual environments. Installing
virtualenwrapper will pull in virtualenv as a dependency.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo pip install virtualenvwrapper
</pre></div>
</div>
<p>virtualenvwrapper will need to be configured in order to specify where to store
the created environments.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">WORKON_HOME</span><span class="o">=</span>~/envs
<span class="nv">$ </span>mkdir -p <span class="nv">$WORKON_HOME</span>
<span class="nv">$ </span><span class="nb">source</span> /usr/local/bin/virtualenvwrapper.sh  <span class="c"># Or /usr/bin/virtualenvwrapper.sh</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may want to add the above-mentioned commands in your
<tt class="file docutils literal"><span class="pre">.bashrc</span></tt> file (or whatever file your shell uses for initializing user
customizations).</p>
</div>
<p>Now the commands provided virtualenv and virtualenvwrapper are available, so we
can start creating our virtual environment.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mkvirtualenv &lt;env-name&gt;
</pre></div>
</div>
<p>Replace <tt class="docutils literal"><span class="pre">&lt;env-name&gt;</span></tt> with a meaningful name that describes the environment
you are creating. <strong class="command">mkvirtualenv</strong> accepts any options that
<strong class="command">virtualenv</strong> accepts. We could for example specify to use the Python
2.6 interpreter by passing the <em class="xref std std-option">-p python2.6</em> option.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>After running <strong class="command">mkvirtualenv</strong>, the newly created environment
is activated. To deactivate it just run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>env-name<span class="o">)</span> <span class="nv">$ </span>deactivate
</pre></div>
</div>
<p>To activate a virtual environment again simply run:</p>
<div class="last highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>workon &lt;env-name&gt;
</pre></div>
</div>
</div>
<p>Time to clone Pootle&#8217;s source code repository. The main repository lives under
<a class="reference external" href="https://github.com/translate/pootle/">translate/pootle in GitHub</a>. If you
have a GitHub account, the best idea is to fork the main repository and to
clone your own fork for hacking. Once you know which way you want to continue
forward, just move to a directory where you want to keep the development files
and run <strong class="command">git clone</strong> by passing the repository&#8217;s URL.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>env-name<span class="o">)</span> <span class="nv">$ </span>git clone https://github.com/translate/pootle.git
</pre></div>
</div>
<p>This will create a directory named <tt class="file docutils literal"><span class="pre">pootle</span></tt> where you will find all the
files that constitute Pootle&#8217;s source code.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have a GitHub account, fork the main <tt class="docutils literal"><span class="pre">translate/pootle</span></tt>
repository and replace the repository URL by your own fork.</p>
</div>
<p>Before running the development server, it&#8217;s necessary to install the software
dependencies/requirements by using pip. For this matter there are some <a class="reference external" href="http://www.pip-installer.org/en/latest/requirements.html">pip
requirements files</a>
within the <tt class="file docutils literal"><span class="pre">requirements</span></tt> directory. We will install the requirements
defined in <tt class="file docutils literal"><span class="pre">requirements/dev.txt</span></tt>, which apart from the minimum will pull
in some extras that will ease the development process.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>env-name<span class="o">)</span> <span class="nv">$ </span><span class="nb">cd </span>pootle
<span class="o">(</span>env-name<span class="o">)</span> <span class="nv">$ </span>pip install -r requirements/dev.txt
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some dependencies might need to build or compile source code in
languages other than Python. You may need to install extra packages on your
system in order to complete the build process and the installation of the
required packages.</p>
</div>
<p>With all the dependencies installed within the virtual environment, Pootle is
almost ready to run. In development environments you will want to use settings
that vastly differ from those used in production environments.</p>
<p>For that purpose there is a sample configuration file with settings adapted for
development scenarios, <tt class="file docutils literal"><span class="pre">pootle/settings/90-dev-local.conf.sample</span></tt>. Copy
this file and rename it by removing the <em>.sample</em> extension:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>env-name<span class="o">)</span> <span class="nv">$ </span>cp pootle/settings/90-dev-local.conf.sample pootle/settings/90-dev-local.conf
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To learn more about how settings work in Pootle head over the
<a class="reference internal" href="../server/settings.html#settings"><em>Settings</em></a> section in the documentation.</p>
</div>
<p>Once the configuration is in place, you&#8217;ll need to setup the database
schema and add initial data.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>env-name<span class="o">)</span> <span class="nv">$ </span>python manage.py syncdb --noinput
<span class="o">(</span>env-name<span class="o">)</span> <span class="nv">$ </span>python manage.py migrate
<span class="o">(</span>env-name<span class="o">)</span> <span class="nv">$ </span>python manage.py initdb
</pre></div>
</div>
<p>Finally, just run the development server.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>env-name<span class="o">)</span> <span class="nv">$ </span>python manage.py runserver
</pre></div>
</div>
<p>Once all is done, you can start the development server anytime by enabling the
virtual environment (using the <strong class="command">workon</strong> command) and running the
<strong class="command">manage.py runserver</strong> command.</p>
<p>Happy hacking!!</p>
</div>
</div>
<div class="section" id="workflow">
<span id="hacking-workflow"></span><h2>Workflow<a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h2>
<p>Any time you want to fix a bug or work on a new feature, create a new local
branch:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git checkout -b &lt;my_new_branch&gt;
</pre></div>
</div>
<p>Then safely work there, create the needed commits and once the work is ready
for being incorporated upstream, either:</p>
<ul class="simple">
<li>Push the changes to your own GitHub fork and send us a pull request, or</li>
<li>Create a patch against the <tt class="docutils literal"><span class="pre">HEAD</span></tt> of the <tt class="docutils literal"><span class="pre">master</span></tt> branch using
<strong class="command">git diff</strong> or <strong class="command">git format-patch</strong> and attach it to the
affected bug.</li>
</ul>
</div>
<div class="section" id="commits">
<span id="hacking-committing"></span><h2>Commits<a class="headerlink" href="#commits" title="Permalink to this headline">¶</a></h2>
<p>When creating commits take into account the following:</p>
<dl class="docutils">
<dt>What to commit</dt>
<dd><p class="first">As far as possible, try to commit individual changes in individual commits.
Where different changes depend on each other, but are related to different
parts of a problem / solution, try to commit them in quick succession.</p>
<p>If a change in the code requires some change in the documentation then all
those changes must be in the same commit.</p>
<p class="last">If code and documentation changes are unrelated then it is recommended to put
them in separate commits, despite that sometimes it is acceptable to mix
those changes in the same commit, for example cleanups changes both in code
and documentation.</p>
</dd>
<dt>Commit messages</dt>
<dd><p class="first">Begin the commit message with a single short (less than 50 character) line
summarizing the change, followed by a blank line and then a more thorough
(and sometimes optional) description.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Cleanups</span>
</pre></div>
</div>
<p>Another example:</p>
<div class="highlight-python"><div class="highlight"><pre>Factor out common behavior for whatever

These reduces lines of code to maintain, and eases a lot the maintenance
work.

Also was partially reworked to ease extending it in the future.
</pre></div>
</div>
<p>If your change fixes a bug in Bugzilla, mention the bug number. This way the
bug is automatically closed after merging the commit.</p>
<div class="highlight-python"><div class="highlight"><pre>Docs: Update code for this thing

Now the docs are exact and represent the actual behavior introduced in
commits ef4517ab and abc361fd.

Fixes bug #2399
</pre></div>
</div>
<p>If you are reverting a previous commit, mention the sha1 revision that is
being reverted.</p>
<div class="last highlight-python"><div class="highlight"><pre>Revert &quot;Fabric: Cleanup to use the new setup command&quot;

This reverts commit 5c54bd4.
</pre></div>
</div>
</dd>
</dl>
</div>
</div>


</div>
<hr>

<footer class="footer">
  <div class="container">
    <p class="pull-right"><a href="#">Back to top ↑</a></p>
    <ul class="unstyled muted">
      <li><small>
        &copy; 2004-2014, Translate.<br/>
      </small></li>
      <li><small>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.1.
      </small></li>
    </ul>
  </div>
</footer>
  </body>
</html>