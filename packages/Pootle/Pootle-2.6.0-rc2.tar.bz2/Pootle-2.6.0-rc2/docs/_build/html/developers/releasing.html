<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Making a Pootle Release &mdash; Pootle 2.6.0-rc1 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.6.0-rc1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Pootle 2.6.0-rc1 documentation" href="../index.html" />
    <link rel="up" title="Developers" href="index.html" />
    <link rel="next" title="Pootle API" href="../api/index.html" />
    <link rel="prev" title="Styleguide" href="styleguide.html" /> 
  </head>
  <body>
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="brand" href="../index.html">Pootle</a>
        <span class="navbar-text pull-left"><b>2.6.0</b></span>
          <ul class="nav">
            <li class="divider-vertical"></li>
            
              <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../users/index.html">User&#8217;s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/index.html">Administering a server</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Pootle API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external_docs.html">External documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>
</ul>
</li>
              
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Making a Pootle Release</a><ul>
<li><a class="reference internal" href="#summary">Summary</a><ul>
<li><a class="reference internal" href="#other-possible-steps">Other possible steps</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pre-release-instructions">Pre-release instructions</a><ul>
<li><a class="reference internal" href="#upload-and-announce-translations">Upload and announce translations</a></li>
<li><a class="reference internal" href="#string-freeze">String freeze</a></li>
<li><a class="reference internal" href="#double-check-version-dependencies">Double check version dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#detailed-release-instructions">Detailed release instructions</a><ul>
<li><a class="reference internal" href="#get-a-clean-checkout-and-new-virtualenv">Get a clean checkout and new virtualenv</a></li>
<li><a class="reference internal" href="#create-release-notes">Create release notes</a></li>
<li><a class="reference internal" href="#adjust-the-roadmap">Adjust the roadmap</a></li>
<li><a class="reference internal" href="#up-version-numbers">Up version numbers</a></li>
<li><a class="reference internal" href="#check-copyright-dates">Check copyright dates</a></li>
<li><a class="reference internal" href="#update-requirements-versions">Update requirements versions</a></li>
<li><a class="reference internal" href="#update-translations">Update translations</a></li>
<li><a class="reference internal" href="#build-the-package">Build the package</a></li>
<li><a class="reference internal" href="#test-install-and-other-tests">Test install and other tests</a></li>
<li><a class="reference internal" href="#tag-the-release">Tag the release</a></li>
<li><a class="reference internal" href="#publish-on-pypi">Publish on PyPI</a></li>
<li><a class="reference internal" href="#create-a-release-on-github">Create a release on Github</a></li>
<li><a class="reference internal" href="#copy-files-to-sourceforge">Copy files to sourceforge</a></li>
<li><a class="reference internal" href="#add-product-version-to-bugzilla">Add product version to Bugzilla</a></li>
<li><a class="reference internal" href="#release-documentation">Release documentation</a></li>
<li><a class="reference internal" href="#update-pootle-website">Update Pootle website</a></li>
<li><a class="reference internal" href="#update-pootle-dashboard">Update Pootle dashboard</a></li>
<li><a class="reference internal" href="#unstage-on-sourceforge">Unstage on sourceforge</a></li>
<li><a class="reference internal" href="#announce-to-the-world">Announce to the world</a></li>
<li><a class="reference internal" href="#cleanup">Cleanup</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
            
            
              
  <li><a href="styleguide.html"
         title="previous chapter">&laquo; Styleguide</a></li>
  <li><a href="../api/index.html"
         title="next chapter">Pootle API &raquo;</a></li>
            
          </ul>
          <ul class="nav pull-right">
            
              
            
          
            
<form class="navbar-search pull-right" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
          </ul>
        </div>
      </div>
    </div>
  </div>

<div class="container content">
   
  <div class="section" id="making-a-pootle-release">
<h1>Making a Pootle Release<a class="headerlink" href="#making-a-pootle-release" title="Permalink to this headline">¶</a></h1>
<p>These instructions are the guidelines for anyone making a Pootle commit.</p>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>git clone <a class="reference external" href="mailto:git&#37;&#52;&#48;github&#46;com">git<span>&#64;</span>github<span>&#46;</span>com</a>:translate/pootle.git pootle-release</li>
<li>Create release notes</li>
<li>Adjust the roadmap</li>
<li>Up version number</li>
<li>Update translations</li>
<li>make build</li>
<li>Test install and other tests</li>
<li>Tag the release</li>
<li>Publish on PyPI</li>
<li>Upload to Github</li>
<li>Upload to Sourceforge</li>
<li>Add product version to Bugzilla</li>
<li>Release documentation</li>
<li>Update translate website</li>
<li>Update Pootle dashboard</li>
<li>Unstage sourceforge</li>
<li>Announce to the world</li>
<li>Cleanup</li>
</ol>
<div class="section" id="other-possible-steps">
<h3>Other possible steps<a class="headerlink" href="#other-possible-steps" title="Permalink to this headline">¶</a></h3>
<p>We need to check and document these if needed:</p>
<ul class="simple">
<li>Pre-release checks</li>
<li>Build docs: we need to check if we need to build the docs for the release
tarball.</li>
<li>Change URLs to point to the correct docs: do we want to change URLs to point
to the $version docs rather then &#8216;latest&#8217;?</li>
<li>Building on Windows, building for other Linux distros. We have produced</li>
<li>Communicating to upstream packagers</li>
</ul>
</div>
</div>
<div class="section" id="pre-release-instructions">
<h2>Pre-release instructions<a class="headerlink" href="#pre-release-instructions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="upload-and-announce-translations">
<h3>Upload and announce translations<a class="headerlink" href="#upload-and-announce-translations" title="Permalink to this headline">¶</a></h3>
<p>We need to give localizers enough time to localize Pootle.  They need time to
do the actual translation and to feedback on any errors that they might
encounter.</p>
<p>To make a new template:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>make pot
</pre></div>
</div>
<p>And upload the templates to Pootle for translation. Update current translations
against templates either on Pootle or in code and commits these updated files
to Git.</p>
<p>Announce the new translations using these two channels:</p>
<ol class="arabic simple">
<li>The News tab on Pootle &#8211; for those not on any mailing list</li>
<li>The translate-pootle and translate-devel mailing lists &#8211; for those who might
miss the news.</li>
</ol>
</div>
<div class="section" id="string-freeze">
<h3>String freeze<a class="headerlink" href="#string-freeze" title="Permalink to this headline">¶</a></h3>
<p>We want to give a string freeze at least 2-4 weeks before a release.  Announce
that on the mailing lists.</p>
<p>If we do have a string freeze break then announce those to people.</p>
<p>A string freeze would normally run between an RC1 and a released version.</p>
</div>
<div class="section" id="double-check-version-dependencies">
<h3>Double check version dependencies<a class="headerlink" href="#double-check-version-dependencies" title="Permalink to this headline">¶</a></h3>
<p>Make sure the versions listed in docs/server/installation.rst match those in
requirements/base.txt</p>
</div>
</div>
<div class="section" id="detailed-release-instructions">
<h2>Detailed release instructions<a class="headerlink" href="#detailed-release-instructions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="get-a-clean-checkout-and-new-virtualenv">
<h3>Get a clean checkout and new virtualenv<a class="headerlink" href="#get-a-clean-checkout-and-new-virtualenv" title="Permalink to this headline">¶</a></h3>
<p>We work from a clean checkout to ensure that everything you are adding to the
build is what is in VC and doesn&#8217;t contain any of your uncommitted changes.  It
also ensure that someone else could replicate your process.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git clone git@github.com:translate/pootle.git pootle-release
<span class="nv">$ </span><span class="nb">cd </span>pootle-release
<span class="nv">$ </span>git submodule update --init
<span class="nv">$ </span>mkvirtualenv pootle-release
<span class="o">(</span>pootle-release<span class="o">)</span> <span class="nv">$ </span>pip install -r requirements/build.txt
</pre></div>
</div>
</div>
<div class="section" id="create-release-notes">
<h3>Create release notes<a class="headerlink" href="#create-release-notes" title="Permalink to this headline">¶</a></h3>
<p>The release notes will be used in these places:</p>
<ul class="simple">
<li>Pootle website &#8211; <a class="reference external" href="http://pootle.translatehouse.org/download.html">download page</a> (used in gh-pages)</li>
<li>Sourceforge download &#8211; README.rst (used to give user info)</li>
<li>Github releases (converted to Markdown)</li>
<li>Email announcements &#8211; text version</li>
</ul>
<p>We create our release notes in reStructured Text, since we use that elsewhere
and since it can be rendered well in some of our key sites.</p>
<p>First we need to create a log of changes in Pootle, which is done generically
like this:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git log <span class="nv">$version</span>-1..HEAD &gt; docs/release/<span class="nv">$version</span>.rst
</pre></div>
</div>
<p>Or a more specific example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git log 2.5.0..HEAD &gt; docs/releases/2.5.1.rst
</pre></div>
</div>
<p>Edit this new file.  You can use the commits as a guide to build up the release
notes.  You should remove all log messages before the release.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since the release notes will be used in places that allow linking we
use links within the notes.  These should link back to products websites
(<a class="reference external" href="http://virtaal.org">Virtaal</a>, <a class="reference external" href="http://pootle.translatehouse.org">Pootle</a>, etc), references to <a class="reference external" href="http://translatehouse.org">Translate</a> and possibly bug numbers, etc.</p>
</div>
<p>Read for grammar and spelling errors.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When writing the notes please remember:</p>
<ol class="last arabic simple">
<li>The voice is active. &#8216;Translate has released a new version of the
toolkit&#8217;, not &#8216;A new version of the toolkit was released by Translate&#8217;.</li>
<li>The connection to the users is human not distant.</li>
<li>We speak in familiar terms e.g. &#8220;I know you&#8217;ve been waiting for this
release&#8221; instead of formal.</li>
</ol>
</div>
<p>We create a list of contributors using this command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git log 2.5.0..HEAD --format<span class="o">=</span><span class="s1">&#39;%aN, &#39;</span> | awk <span class="s1">&#39;{arr[$0]++} END{for (i in arr){print arr[i], i;}}&#39;</span> | sort -rn | cut -d<span class="se">\ </span> -f2-
</pre></div>
</div>
</div>
<div class="section" id="adjust-the-roadmap">
<h3>Adjust the roadmap<a class="headerlink" href="#adjust-the-roadmap" title="Permalink to this headline">¶</a></h3>
<p>The roadmap file needs to be updated.  Remove things that are part of this
release.  Adjust any version numbering if for example we&#8217;re moving to Django
1.6 we need to change the proposed release numbers.</p>
<p>Look at the actual roamap commitments and change if needed.  These will remain
during the lifetime of this version so it is good to adjust them before we
branch.</p>
</div>
<div class="section" id="up-version-numbers">
<h3>Up version numbers<a class="headerlink" href="#up-version-numbers" title="Permalink to this headline">¶</a></h3>
<p>Update the version number in:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">pootle/__version__.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">docs/conf.py</span></tt></li>
</ul>
<p>In <tt class="docutils literal"><span class="pre">__version__.py</span></tt>, bump the build number if anybody used the toolkit with
the previous number, and there have been any changes to code touching stats or
quality checks.  An increased build number will force a toolkit user, like
Pootle, to regenerate the stats and checks.</p>
<p>For <tt class="docutils literal"><span class="pre">conf.py</span></tt> change <tt class="docutils literal"><span class="pre">version</span></tt> and <tt class="docutils literal"><span class="pre">release</span></tt></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">FIXME &#8211; We might want to automate the version and release info so
that we can update it in one place.</p>
</div>
<p>The version string should follow the pattern:</p>
<div class="highlight-python"><div class="highlight"><pre>$MAJOR-$MINOR-$MICRO[-$EXTRA]
</pre></div>
</div>
<p>E.g.</p>
<div class="highlight-python"><div class="highlight"><pre>1.10.0
0.9.1-rc1
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">$EXTRA</span></tt> is optional but all the three others are required.  The first
release of a <tt class="docutils literal"><span class="pre">$MINOR</span></tt> version will always have a <tt class="docutils literal"><span class="pre">$MICRO</span></tt> of <tt class="docutils literal"><span class="pre">.0</span></tt>. So
<tt class="docutils literal"><span class="pre">1.10.0</span></tt> and never just <tt class="docutils literal"><span class="pre">1.10</span></tt>.</p>
</div>
<div class="section" id="check-copyright-dates">
<h3>Check copyright dates<a class="headerlink" href="#check-copyright-dates" title="Permalink to this headline">¶</a></h3>
<p>Update any copyright dates in <tt class="docutils literal"><span class="pre">docs/conf.py:copright</span></tt> and anywhere else that
needs fixing.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git grep 2013  <span class="c"># Should pick up anything that should be examined</span>
</pre></div>
</div>
</div>
<div class="section" id="update-requirements-versions">
<h3>Update requirements versions<a class="headerlink" href="#update-requirements-versions" title="Permalink to this headline">¶</a></h3>
<p>Update the minimum version number for the requirements in:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">requirements/</span></tt></li>
<li><tt class="docutils literal"><span class="pre">pootle/depcheck.py</span></tt></li>
</ul>
<p>Update the requirements files:</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>make requirements-pinned.txt
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This creates the following files:</p>
<ul class="last simple">
<li>requirements-pinned.txt - the maximum available version when we
released.  Chances are we&#8217;ve tested with these and they are good.
Using this would prevent a person from intalling something newer but
untested.</li>
</ul>
</div>
</div>
<div class="section" id="update-translations">
<h3>Update translations<a class="headerlink" href="#update-translations" title="Permalink to this headline">¶</a></h3>
<p>Update the translations from the <a class="reference external" href="http://pootle.locamotion.org/projects/pootle">Pootle server</a></p>
<ol class="arabic">
<li><p class="first">Download all translations</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>make get-translations
</pre></div>
</div>
</li>
<li><p class="first">Update <tt class="docutils literal"><span class="pre">pootle/locale/LINGUAS</span></tt> to list the languages we would like to
ship. While we package all PO files, this is an indication of which ones we
want packagers to use.  The requirement is roughly 80% translated with no
obvious variable errors. Languages with a small userbase can be included.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>make linguas
</pre></div>
</div>
<p>Check the output and make any adjustments such as adding back languages that
don&#8217;t quite make the target but you wish to ship.</p>
</li>
<li><p class="first">Build translations to check for errors:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>make mo <span class="c"># Build all LINGUAS enabled languages</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="build-the-package">
<h3>Build the package<a class="headerlink" href="#build-the-package" title="Permalink to this headline">¶</a></h3>
<p>Building is the first step to testing that things work.  From your clean
checkout run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>make mo-all <span class="c"># if we are shipping an pre-release</span>
<span class="nv">$ </span>make build
</pre></div>
</div>
<p>This will create a tarball in <tt class="docutils literal"><span class="pre">dist/</span></tt> which you can use for further testing.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We use a clean checkout just to make sure that no inadvertant changes
make it into the release.</p>
</div>
</div>
<div class="section" id="test-install-and-other-tests">
<h3>Test install and other tests<a class="headerlink" href="#test-install-and-other-tests" title="Permalink to this headline">¶</a></h3>
<p>The easiest way to test is in a virtualenv.  You can install the new toolkit
using:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mkvirtualenv pootle-testing
<span class="o">(</span>pootle-testing<span class="o">)</span> <span class="nv">$ </span>pip install <span class="nv">$path</span>-to-dist/Pootle-<span class="nv">$version</span>.tar.bz2
</pre></div>
</div>
<p>This will allow you test installation of the software.</p>
<p>You can then proceed with other tests such as checking:</p>
<ol class="arabic simple">
<li>Quick installation check:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>pootle init
<span class="nv">$ </span>pootle setup
<span class="nv">$ </span>pootle start
<span class="nv">$ </span><span class="c"># browse to localhost:8000</span>
</pre></div>
</div>
<ol class="arabic simple">
<li>Documentation is available</li>
<li>Installation documention is correct<ul>
<li>Follow the <a class="reference internal" href="../server/installation.html"><em>installation</em></a> and <a class="reference internal" href="hacking.html"><em>hacking</em></a> guides to ensure that they are correct.</li>
</ul>
</li>
<li>Meta information about the package is correct. See pypi section of reviewing
meta data.</li>
</ol>
<p>To cleanup:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>deactivate
<span class="nv">$ </span>rmvirtualenv pootle-testing
</pre></div>
</div>
</div>
<div class="section" id="tag-the-release">
<h3>Tag the release<a class="headerlink" href="#tag-the-release" title="Permalink to this headline">¶</a></h3>
<p>You should only tag once you are happy with your release as there are some
things that we can&#8217;t undo.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git tag -a 2.5.0 -m <span class="s2">&quot;Tag version 2.5.0&quot;</span>
<span class="nv">$ </span>git push --tags
</pre></div>
</div>
<p>If this is the final release then there should be a stable branch e.g.
<tt class="docutils literal"><span class="pre">stable/2.5.0</span></tt>, so create one if it does not already exist.</p>
</div>
<div class="section" id="publish-on-pypi">
<h3>Publish on PyPI<a class="headerlink" href="#publish-on-pypi" title="Permalink to this headline">¶</a></h3>
<p>Publish the package on the <a class="reference external" href="https://pypi.python.org/pypi">Python Package Index</a> (PyPI)</p>
<ul class="simple">
<li><a class="reference external" href="http://wiki.python.org/moin/CheeseShopTutorial#Submitting_Packages_to_the_Package_Index">Submitting Packages to the Package Index</a></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You need a username and password on <a class="reference external" href="https://pypi.python.org">https://pypi.python.org</a> and have
rights to the project before you can proceed with this step.</p>
<p class="last">These can be stored in <tt class="docutils literal"><span class="pre">$HOME/.pypirc</span></tt> and will contain your username and
password. A first run of <tt class="docutils literal"><span class="pre">./setup.py</span> <span class="pre">register</span></tt> will create such a file.
It will also actually publish the meta-data so only do it when you are
actually ready.</p>
</div>
<p>Review the meta data. This is stored in <tt class="docutils literal"><span class="pre">setup.py</span></tt>, use <tt class="docutils literal"><span class="pre">./setup.py</span> <span class="pre">--help</span></tt>
to se some options to display meta-data. The actual long description is taken
from <tt class="docutils literal"><span class="pre">/README.rst</span></tt>.</p>
<p>To test before publishing run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>make <span class="nb">test</span>-publish-pypi
</pre></div>
</div>
<p>Then to actually publish:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>make publish-pypi
</pre></div>
</div>
</div>
<div class="section" id="create-a-release-on-github">
<h3>Create a release on Github<a class="headerlink" href="#create-a-release-on-github" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://github.com/translate/pootle/releases/new">https://github.com/translate/pootle/releases/new</a></li>
</ul>
<p>You will need:</p>
<ul class="simple">
<li>Tarball of the release</li>
<li>Release notes in Markdown</li>
</ul>
<ol class="arabic simple">
<li>Draft a new release with the corresponding tag version</li>
<li>Convert the release notes to Markdown with <a class="reference external" href="http://johnmacfarlane.net/pandoc/">Pandoc</a> and add those to the release</li>
<li>Attach the tarball to the release</li>
<li>Mark it as pre-release if it&#8217;s a release candidate.</li>
</ol>
</div>
<div class="section" id="copy-files-to-sourceforge">
<h3>Copy files to sourceforge<a class="headerlink" href="#copy-files-to-sourceforge" title="Permalink to this headline">¶</a></h3>
<p>Publishing files to the Translate Sourceforge project.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need to have release permissions on sourceforge to perform this
step.</p>
</div>
<ul class="simple">
<li><a class="reference external" href="http://sourceforge.net/projects/translate/files/Pootle/">http://sourceforge.net/projects/translate/files/Pootle/</a></li>
</ul>
<p>You will need:</p>
<ul class="simple">
<li>Tarball of the release</li>
<li>Release notes in reStructured Text</li>
</ul>
<ol class="arabic simple">
<li>Create a new folder in the <a class="reference external" href="https://sourceforge.net/projects/translate/files/Pootle/">Pootle Sourceforge release folder</a> using the &#8216;Add
Folder&#8217; button.  The folder name must be the same as the release name e.g.
<tt class="docutils literal"><span class="pre">2.5.0-rc1</span></tt>.  Mark this as being for staging for the moment.</li>
<li><tt class="docutils literal"><span class="pre">make</span> <span class="pre">publish-sourceforge</span></tt> will give you the command to upload your
tarball and <tt class="docutils literal"><span class="pre">README.rst</span></tt>.<ol class="arabic">
<li>Upload tarball for release.</li>
<li>Upload release notes as <tt class="docutils literal"><span class="pre">README.rst</span></tt>.</li>
<li>Click on the info icon for <tt class="docutils literal"><span class="pre">README.rst</span></tt> and tick &#8220;Exclude Stats&#8221; to
exlude the README from stats counting.</li>
</ol>
</li>
<li>Check <tt class="docutils literal"><span class="pre">README.rst</span></tt>. Since this is generated on Sourceforge, without
reference to the docs folder, some of the links will be broken.<ol class="arabic">
<li>Check all links</li>
<li>If broken links exist then download <tt class="docutils literal"><span class="pre">README.rst</span></tt> from Sourceforge, make
changes and upload your adjusted version.  Don&#8217;t change the version in
<tt class="docutils literal"><span class="pre">releases/</span></tt> as we want that to continue to work correctly.</li>
</ol>
</li>
<li>Final checks:<ol class="arabic">
<li>Check that the README.rst for the parent <tt class="docutils literal"><span class="pre">Pootle</span></tt> folder is still
appropriate, this text is the text from <tt class="docutils literal"><span class="pre">/README.rst</span></tt>.</li>
<li>Check all the links in <tt class="docutils literal"><span class="pre">README.rst</span></tt> files for existing releases, new
release and the parent folders.</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="add-product-version-to-bugzilla">
<h3>Add product version to Bugzilla<a class="headerlink" href="#add-product-version-to-bugzilla" title="Permalink to this headline">¶</a></h3>
<p>We need to allow users to report issues against the released version.</p>
<ol class="arabic simple">
<li>In Administration-&gt;Products add a product version.</li>
<li>Review existing versions that are available and disable older version from
accepting bug reports.</li>
</ol>
</div>
<div class="section" id="release-documentation">
<h3>Release documentation<a class="headerlink" href="#release-documentation" title="Permalink to this headline">¶</a></h3>
<p>We need a tagged release or branch before we can do this.  The docs are
published on Read The Docs.</p>
<ul class="simple">
<li><a class="reference external" href="https://readthedocs.org/dashboard/pootle/versions/">https://readthedocs.org/dashboard/pootle/versions/</a></li>
</ul>
<p>Use the admin pages to flag a version that should be published.  When we have
branched the stable release we use the branch rather then the tag i.e.
<tt class="docutils literal"><span class="pre">stable/2.5.0</span></tt> rather than <tt class="docutils literal"><span class="pre">2.5.0</span></tt> as that allows any fixes of
documentation for the <tt class="docutils literal"><span class="pre">2.5.0</span></tt> release to be immediately available.</p>
<p>Change all references to docs in the Pootle code to point to the branched
version as apposed to the latest version.</p>
</div>
<div class="section" id="update-pootle-website">
<h3>Update Pootle website<a class="headerlink" href="#update-pootle-website" title="Permalink to this headline">¶</a></h3>
<p>We use github pages for the website. First we need to checkout the pages:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git checkout gh-pages
</pre></div>
</div>
<ol class="arabic simple">
<li>In <tt class="docutils literal"><span class="pre">_posts/</span></tt> add a new release posting.  This is in Markdown format (for
now), so we need to change the release notes .rst to .md, which mostly means
changing URL links from &#8216;<tt class="docutils literal"><span class="pre">`xxx</span> <span class="pre">&lt;link&gt;`_</span></tt>&#8216; to <tt class="docutils literal"><span class="pre">[xxx](link)</span></tt>.</li>
<li>Change $version as needed. See <tt class="docutils literal"><span class="pre">download.html</span></tt>, <tt class="docutils literal"><span class="pre">_config.yml</span></tt> and
<tt class="docutils literal"><span class="pre">git</span> <span class="pre">grep</span> <span class="pre">$old_release</span></tt></li>
<li><tt class="docutils literal"><span class="pre">git</span> <span class="pre">commit</span></tt> and <tt class="docutils literal"><span class="pre">git</span> <span class="pre">push</span></tt> &#8211; changes are quite quick so easy to
review.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">FIXME it would be great if gh-pages accepted .rst, maybe it can if we
prerender just that page?</p>
</div>
</div>
<div class="section" id="update-pootle-dashboard">
<h3>Update Pootle dashboard<a class="headerlink" href="#update-pootle-dashboard" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Do not do this for release candidates, only for final releases.</p>
</div>
<p>The dashboard used in Pootle&#8217;s dashboard is updated in its own project:</p>
<ol class="arabic simple">
<li>git clone <a class="reference external" href="mailto:git&#37;&#52;&#48;github&#46;com">git<span>&#64;</span>github<span>&#46;</span>com</a>:translate/pootle-dashboard.git</li>
<li>Edit index.html to contain the latest release info</li>
<li>Add the same info in alerts.xml pointing to the release in RTD
<tt class="docutils literal"><span class="pre">release/$version.html</span></tt></li>
</ol>
<p>Do a <tt class="docutils literal"><span class="pre">git</span> <span class="pre">pull</span></tt> on the server to get the latest changes from the repo.</p>
</div>
<div class="section" id="unstage-on-sourceforge">
<h3>Unstage on sourceforge<a class="headerlink" href="#unstage-on-sourceforge" title="Permalink to this headline">¶</a></h3>
<p>If you have created a staged release folder, then unstage it now.</p>
</div>
<div class="section" id="announce-to-the-world">
<h3>Announce to the world<a class="headerlink" href="#announce-to-the-world" title="Permalink to this headline">¶</a></h3>
<p>Let people know that there is a new version:</p>
<ol class="arabic simple">
<li>Announce on mailing lists:
Send the announcement to the translate-announce mailing lists on
<a class="reference external" href="mailto:translate-announce&#37;&#52;&#48;lists&#46;sourceforge&#46;net">translate-announce<span>&#64;</span>lists<span>&#46;</span>sourceforge<span>&#46;</span>net</a>
<a class="reference external" href="mailto:translate-pootle&#37;&#52;&#48;lists&#46;sourceforge&#46;net">translate-pootle<span>&#64;</span>lists<span>&#46;</span>sourceforge<span>&#46;</span>net</a></li>
<li>Adjust the #pootle channel notice. Use <tt class="docutils literal"><span class="pre">/topic</span></tt> to change the topic.</li>
<li>Email important users</li>
<li>Tweet about it</li>
<li>Update <a class="reference external" href="http://en.wikipedia.org/wiki/Pootle">Pootle&#8217;s Wikipedia page</a></li>
</ol>
</div>
<div class="section" id="cleanup">
<h3>Cleanup<a class="headerlink" href="#cleanup" title="Permalink to this headline">¶</a></h3>
<p>Some possible cleanup tasks:</p>
<ul class="simple">
<li>Remove any RC builds from the sourceforge download pages and add redirects to
Sourceforge <tt class="docutils literal"><span class="pre">Pootle</span></tt> top level download page.</li>
<li>Checkin any release notes and such (or maybe do that before tagging).</li>
<li>Remove your pootle-release checkout.</li>
<li>Remove pootle-release virtualenv: <tt class="docutils literal"><span class="pre">deactivate;</span> <span class="pre">rmvirtualenv</span> <span class="pre">pootle-release</span></tt></li>
<li>Update and change things based on what you learnt, don&#8217;t wait:<ul>
<li>Update and fix these release notes and make sure they are on <tt class="docutils literal"><span class="pre">master</span></tt>.</li>
<li>Dicuss any changes that should be made or new things that could be added</li>
<li>Add automation if you can</li>
</ul>
</li>
</ul>
</div>
</div>
</div>


</div>
<hr>

<footer class="footer">
  <div class="container">
    <p class="pull-right"><a href="#">Back to top ↑</a></p>
    <ul class="unstyled muted">
      <li><small>
        &copy; 2004-2014, Translate.<br/>
      </small></li>
      <li><small>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.1.
      </small></li>
    </ul>
  </div>
</footer>
  </body>
</html>