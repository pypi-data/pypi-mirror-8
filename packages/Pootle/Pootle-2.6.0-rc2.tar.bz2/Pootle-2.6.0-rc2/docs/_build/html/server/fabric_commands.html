<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Available Fabric commands &mdash; Pootle 2.6.0-rc1 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.6.0-rc1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Pootle 2.6.0-rc1 documentation" href="../index.html" />
    <link rel="up" title="Administering a server" href="index.html" />
    <link rel="next" title="Running under a Web Server" href="web.html" />
    <link rel="prev" title="Automated deployment using Fabric" href="fabric_deployment.html" /> 
  </head>
  <body>
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="brand" href="../index.html">Pootle</a>
        <span class="navbar-text pull-left"><b>2.6.0</b></span>
          <ul class="nav">
            <li class="divider-vertical"></li>
            
              <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../users/index.html">User&#8217;s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Administering a server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Pootle API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external_docs.html">External documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>
</ul>
</li>
              
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Available Fabric commands</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#available-commands">Available commands</a><ul>
<li><a class="reference internal" href="#bootstrap">bootstrap</a></li>
<li><a class="reference internal" href="#compile-translations">compile_translations</a></li>
<li><a class="reference internal" href="#create-db">create_db</a></li>
<li><a class="reference internal" href="#deploy">deploy</a></li>
<li><a class="reference internal" href="#deploy-static">deploy_static</a></li>
<li><a class="reference internal" href="#disable-site">disable_site</a></li>
<li><a class="reference internal" href="#drop-db">drop_db</a></li>
<li><a class="reference internal" href="#drop-deployment">drop_deployment</a></li>
<li><a class="reference internal" href="#dump-db">dump_db</a></li>
<li><a class="reference internal" href="#enable-site">enable_site</a></li>
<li><a class="reference internal" href="#initdb">initdb</a></li>
<li><a class="reference internal" href="#install-site">install_site</a></li>
<li><a class="reference internal" href="#load-db">load_db</a></li>
<li><a class="reference internal" href="#migrate-app">migrate_app</a></li>
<li><a class="reference internal" href="#migratedb">migratedb</a></li>
<li><a class="reference internal" href="#mysql-conf">mysql_conf</a></li>
<li><a class="reference internal" href="#production">production</a></li>
<li><a class="reference internal" href="#send-file">send_file</a></li>
<li><a class="reference internal" href="#setup">setup</a></li>
<li><a class="reference internal" href="#setup-db">setup_db</a></li>
<li><a class="reference internal" href="#stage-feature">stage_feature</a></li>
<li><a class="reference internal" href="#staging">staging</a></li>
<li><a class="reference internal" href="#syncdb">syncdb</a></li>
<li><a class="reference internal" href="#touch">touch</a></li>
<li><a class="reference internal" href="#unstage-feature">unstage_feature</a></li>
<li><a class="reference internal" href="#update-code">update_code</a></li>
<li><a class="reference internal" href="#update-config">update_config</a></li>
<li><a class="reference internal" href="#update-db">update_db</a></li>
<li><a class="reference internal" href="#upgrade">upgrade</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
            
            
              
  <li><a href="fabric_deployment.html"
         title="previous chapter">&laquo; Automated deployment using Fabric</a></li>
  <li><a href="web.html"
         title="next chapter">Running under a Web Server &raquo;</a></li>
            
          </ul>
          <ul class="nav pull-right">
            
              
            
          
            
<form class="navbar-search pull-right" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
          </ul>
        </div>
      </div>
    </div>
  </div>

<div class="container content">
   
  <div class="section" id="available-fabric-commands">
<span id="fabric-commands"></span><h1>Available Fabric commands<a class="headerlink" href="#available-fabric-commands" title="Permalink to this headline">¶</a></h1>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5: </span>Starting in this release, Pootle includes Fabric deployment scripts.</p>
</div>
<div class="section" id="introduction">
<span id="fabric-commands-introduction"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The sample Fabric scripts provide several commands that you can use to easily
deploy your Pootle site.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Most of the examples in this section will use the <tt class="docutils literal"><span class="pre">production</span></tt>
environment, but remember that other environments can be used as well.</p>
</div>
<p>Please read first the <a class="reference internal" href="fabric_deployment.html#fabric-deployment-how-to-run-fabric-commands"><em>How to run Fabric commands</em></a> section in order to know how
this commands can be run. Reading the <a class="reference internal" href="fabric_deployment.html#fabric-deployment-typical-usage-example"><em>Typical Usage Example</em></a> section might be helpful as well.</p>
</div>
<div class="section" id="available-commands">
<span id="fabric-commands-available-commands"></span><h2>Available commands<a class="headerlink" href="#available-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="bootstrap">
<span id="fabric-commands-bootstrap"></span><h3>bootstrap<a class="headerlink" href="#bootstrap" title="Permalink to this headline">¶</a></h3>
<p>This command:</p>
<ul class="simple">
<li>Creates the required directories, asking to remove them first if they already
exist</li>
<li>Creates a virtual environment (virtualenv) and activates it</li>
<li>Clones the Pootle repository from GitHub</li>
<li>Checks out the specified branch, using master if no branch is specified</li>
<li>Installs the deployment requirements as listed in <tt class="file docutils literal"><span class="pre">requirements/</span></tt>,
including the base requirements as well</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While running it may ask for the remote server <tt class="docutils literal"><span class="pre">root</span></tt> password,
or more likely the <tt class="docutils literal"><span class="pre">sudo</span></tt> password, which is the standard password for the
remote user configured in the environment.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last versionchanged">
<p><span class="versionmodified">Changed in version 2.5.1: </span>Added support for bootstrapping from a given
branch on Pootle repository.</p>
</div>
</div>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production bootstrap  <span class="c"># Call that will use the default &#39;master&#39; branch</span>
<span class="nv">$ </span>fab production:branch<span class="o">=</span>stable/2.5.0 bootstrap  <span class="c"># Call which provides a branch</span>
</pre></div>
</div>
</div>
<div class="section" id="compile-translations">
<span id="fabric-commands-compile-translations"></span><h3>compile_translations<a class="headerlink" href="#compile-translations" title="Permalink to this headline">¶</a></h3>
<p>This command:</p>
<ul class="simple">
<li>Compiles the MO files for Pootle translations</li>
</ul>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production compile_translations
</pre></div>
</div>
</div>
<div class="section" id="create-db">
<span id="fabric-commands-create-db"></span><h3>create_db<a class="headerlink" href="#create-db" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.1.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Creates a new blank database using the settings provided to Fabric in the
chosen environment</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While running it may ask for the remote server <tt class="docutils literal"><span class="pre">root</span></tt> password or
the <tt class="docutils literal"><span class="pre">sudo</span></tt> password (standard password for the remote user configured in
the environment) as well as the specified <tt class="docutils literal"><span class="pre">db_user</span></tt> and/or database root
password.  See the <a class="reference internal" href="#fabric-commands-mysql-conf"><em>mysql_conf</em></a> command
for a way to eliminate the need for database password prompting.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command will try to create a database on MySQL, which will fail
if MySQL is not installed or the settings don&#8217;t provide configuration data
for creating the database.</p>
</div>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production create_db
</pre></div>
</div>
</div>
<div class="section" id="deploy">
<span id="fabric-commands-deploy"></span><h3>deploy<a class="headerlink" href="#deploy" title="Permalink to this headline">¶</a></h3>
<p>This command:</p>
<ul class="simple">
<li>Calls the <a class="reference internal" href="#fabric-commands-update-code"><em>update_code</em></a> command</li>
<li>Calls the <a class="reference internal" href="#fabric-commands-syncdb"><em>syncdb</em></a> command</li>
<li>Calls the <a class="reference internal" href="#fabric-commands-migratedb"><em>migratedb</em></a> command</li>
<li>Calls the <a class="reference internal" href="#fabric-commands-deploy-static"><em>deploy_static</em></a> command</li>
<li>Calls the <a class="reference internal" href="#fabric-commands-install-site"><em>install_site</em></a> command</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While running it may ask for the remote server <tt class="docutils literal"><span class="pre">root</span></tt> password or
the <tt class="docutils literal"><span class="pre">sudo</span></tt> password (standard password for the remote user configured in
the environment).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last versionchanged">
<p><span class="versionmodified">Changed in version 2.5.1: </span>Added support for deploying from a given branch
on Pootle repository.</p>
</div>
</div>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production deploy  <span class="c"># Call that will use the default &#39;master&#39; branch</span>
<span class="nv">$ </span>fab production:branch<span class="o">=</span>stable/2.5.0 deploy  <span class="c"># Call which provides a branch</span>
</pre></div>
</div>
</div>
<div class="section" id="deploy-static">
<span id="fabric-commands-deploy-static"></span><h3>deploy_static<a class="headerlink" href="#deploy-static" title="Permalink to this headline">¶</a></h3>
<p>This command:</p>
<ul class="simple">
<li>Creates <tt class="file docutils literal"><span class="pre">pootle/assets/</span></tt> directory if it does not exist</li>
<li>Runs <a class="reference internal" href="commands.html#commands-collectstatic"><em>collectstatic &#8211;noinput &#8211;clear</em></a> to
collect the static files</li>
<li>Runs <a class="reference internal" href="commands.html#commands-assets"><em>assets build</em></a> to create the assets</li>
</ul>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production deploy_static
</pre></div>
</div>
</div>
<div class="section" id="disable-site">
<span id="fabric-commands-disable-site"></span><h3>disable_site<a class="headerlink" href="#disable-site" title="Permalink to this headline">¶</a></h3>
<p>This command:</p>
<ul class="simple">
<li>Disables the Pootle site on Apache using the Apache <strong class="command">a2dissite</strong>
command</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While running it may ask for the remote server <tt class="docutils literal"><span class="pre">root</span></tt> password or
the <tt class="docutils literal"><span class="pre">sudo</span></tt> password (standard password for the remote user configured in
the environment).</p>
</div>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production disable_site
</pre></div>
</div>
</div>
<div class="section" id="drop-db">
<span id="fabric-commands-drop-db"></span><h3>drop_db<a class="headerlink" href="#drop-db" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.1.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Drops a database (losing all data!) using the settings provided to
Fabric in the chosen environment</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While running it may ask for the remote server <tt class="docutils literal"><span class="pre">root</span></tt> password or
the <tt class="docutils literal"><span class="pre">sudo</span></tt> password (standard password for the remote user configured in
the environment) as well as the specified <tt class="docutils literal"><span class="pre">db_user</span></tt> and/or database root
password.  See the <a class="reference internal" href="#fabric-commands-mysql-conf"><em>mysql_conf</em></a> command
for a way to eliminate the need for database password prompting.</p>
</div>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production drop_db
</pre></div>
</div>
</div>
<div class="section" id="drop-deployment">
<span id="fabric-commands-drop-deployment"></span><h3>drop_deployment<a class="headerlink" href="#drop-deployment" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.6.0.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Calls the <a class="reference internal" href="#fabric-commands-disable-site"><em>disable_site</em></a> command</li>
<li>Calls the <a class="reference internal" href="#fabric-commands-drop-db"><em>drop_db</em></a> command</li>
<li>Removes the configuration files created by the <a class="reference internal" href="#fabric-commands-update-config"><em>update_config</em></a> command</li>
<li>Removes the directories created during the deployment, including the ones
holding the translation files and the repositories for those translation
files</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command is capable of removing uncompleted deployments.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While running it may ask for the remote server <tt class="docutils literal"><span class="pre">root</span></tt> password and
the specified <tt class="docutils literal"><span class="pre">db_user</span></tt> password.</p>
</div>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production drop_deployment
</pre></div>
</div>
</div>
<div class="section" id="dump-db">
<span id="fabric-commands-dump-db"></span><h3>dump_db<a class="headerlink" href="#dump-db" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.1.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Dumps the database to the provided filename using the <strong class="command">mysqldump</strong>
command</li>
<li>Downloads the dumpfile to the local computer</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While running it may ask for the remote server <tt class="docutils literal"><span class="pre">root</span></tt> password or
the <tt class="docutils literal"><span class="pre">sudo</span></tt> password (standard password for the remote user configured in
the environment) as well as the specified <tt class="docutils literal"><span class="pre">db_user</span></tt> and/or database root
password.  See the <a class="reference internal" href="#fabric-commands-mysql-conf"><em>mysql_conf</em></a> command
for a way to eliminate the need for database password prompting.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This commands can be used to perform periodic backups, that can be
imported later using the <a class="reference internal" href="#fabric-commands-load-db"><em>load_db</em></a>
command.</p>
</div>
<p>Available arguments:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">dumpfile</span></tt></dt>
<dd><p class="first">The local filename for the file where the database will be dumped.</p>
<p class="last">Default: <tt class="docutils literal"><span class="pre">pootle_DB_backup.sql</span></tt>.</p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production dump_db  <span class="c"># Call that will use the default filename</span>
<span class="nv">$ </span>fab production dump_db:dumpfile<span class="o">=</span>backup_mysql.sql  <span class="c"># Call which provides a filename</span>
</pre></div>
</div>
</div>
<div class="section" id="enable-site">
<span id="fabric-commands-enable-site"></span><h3>enable_site<a class="headerlink" href="#enable-site" title="Permalink to this headline">¶</a></h3>
<p>This command:</p>
<ul class="simple">
<li>Enables the Pootle site on Apache using the Apache <strong class="command">a2ensite</strong>
command</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While running it may ask for the remote server <tt class="docutils literal"><span class="pre">root</span></tt> password or
the <tt class="docutils literal"><span class="pre">sudo</span></tt> password (standard password for the remote user configured in
the environment).</p>
</div>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production enable_site
</pre></div>
</div>
</div>
<div class="section" id="initdb">
<span id="fabric-commands-initdb"></span><h3>initdb<a class="headerlink" href="#initdb" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.1.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Runs <a class="reference internal" href="commands.html#commands-initdb"><em>initdb</em></a> to initialize the database</li>
</ul>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production initdb
</pre></div>
</div>
</div>
<div class="section" id="install-site">
<span id="fabric-commands-install-site"></span><h3>install_site<a class="headerlink" href="#install-site" title="Permalink to this headline">¶</a></h3>
<p>This command:</p>
<ul class="simple">
<li>Calls the <a class="reference internal" href="#fabric-commands-update-config"><em>update_config</em></a> command</li>
<li>Calls the <a class="reference internal" href="#fabric-commands-enable-site"><em>enable_site</em></a> command</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While running it may ask for the remote server <tt class="docutils literal"><span class="pre">root</span></tt> password or
the <tt class="docutils literal"><span class="pre">sudo</span></tt> password (standard password for the remote user configured in
the environment).</p>
</div>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production install_site
</pre></div>
</div>
</div>
<div class="section" id="load-db">
<span id="fabric-commands-load-db"></span><h3>load_db<a class="headerlink" href="#load-db" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.1.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Uploads the given SQL dump file to the remote server</li>
<li>Imports it to the database specified on Fabric settings using the
<strong class="command">mysql</strong> command</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While running it may ask for the remote server <tt class="docutils literal"><span class="pre">root</span></tt> password or
the <tt class="docutils literal"><span class="pre">sudo</span></tt> password (standard password for the remote user configured in
the environment) as well as the specified <tt class="docutils literal"><span class="pre">db_user</span></tt> and/or database root
password.  See the <a class="reference internal" href="#fabric-commands-mysql-conf"><em>mysql_conf</em></a> command
for a way to eliminate the need for database password prompting.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You must first create the database you will import (e.g. using the
<a class="reference internal" href="#fabric-commands-create-db"><em>create_db</em></a> command) before calling this
command,</p>
</div>
<p>Available arguments:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">dumpfile</span></tt></dt>
<dd><p class="first">The local SQL dump filename that will be uploaded to the remote server and
imported into an existing database on the remote server. This file can be
created using the <a class="reference internal" href="#fabric-commands-dump-db"><em>dump_db</em></a> command.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is a required argument.</p>
</div>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production create_db  <span class="c"># Remember to create the DB first</span>
<span class="nv">$ </span>fab production load_db:dumpfile<span class="o">=</span>backup_mysql.sql
</pre></div>
</div>
</div>
<div class="section" id="migrate-app">
<span id="fabric-commands-migrate-app"></span><h3>migrate_app<a class="headerlink" href="#migrate-app" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.6.0.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Runs <a class="reference internal" href="commands.html#commands-migrate"><em>migrate</em></a> to run the migrations for the
specified Pootle app</li>
</ul>
<p>Available arguments:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">appname</span></tt></dt>
<dd><p class="first">The name of the Pootle app for which the migrations should be run for.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is a required argument.</p>
</div>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production migrate_app:appname<span class="o">=</span>pootle_store
</pre></div>
</div>
</div>
<div class="section" id="migratedb">
<span id="fabric-commands-migratedb"></span><h3>migratedb<a class="headerlink" href="#migratedb" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.1.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Runs <a class="reference internal" href="commands.html#commands-migrate"><em>migrate</em></a> to update the 2.5 or later database
schema to the latest version</li>
</ul>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production migratedb
</pre></div>
</div>
</div>
<div class="section" id="mysql-conf">
<span id="fabric-commands-mysql-conf"></span><h3>mysql_conf<a class="headerlink" href="#mysql-conf" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.1.</span></p>
</div>
<p>This command creates a <tt class="file docutils literal"><span class="pre">.my.cnf</span></tt> MySQL options file on the remote system
with the password(s) for database access stored in them (the passwords are
taken from the <tt class="file docutils literal"><span class="pre">fabric.py</span></tt> settings file).  Once you have done this, you
can un-comment the alternate <tt class="docutils literal"><span class="pre">db_password_opt</span></tt> and <tt class="docutils literal"><span class="pre">db_root_password_opt</span></tt>
settings in <tt class="file docutils literal"><span class="pre">fabric.py</span></tt>, which will eliminate the need for password
prompting on all MySQL operations.</p>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production mysql_conf
</pre></div>
</div>
</div>
<div class="section" id="production">
<span id="fabric-commands-production"></span><h3>production<a class="headerlink" href="#production" title="Permalink to this headline">¶</a></h3>
<p>This command:</p>
<ul class="simple">
<li>Sets up the configuration for the <tt class="docutils literal"><span class="pre">production</span></tt> environment in Fabric
settings</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command is useless unless it is called before another command or
commands.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This command allows changing the settings. To do so just pass it any
of its arguments when calling it.</p>
<p class="last">Note that some commands might require passing any or all of these arguments
to this command in order to overwrite the default settings before calling
those commands. For example the command <strong class="command">stage_feature</strong> requires
passing <em class="xref std std-option">branch</em>, <em class="xref std std-option">repo</em> and <em class="xref std std-option">feature</em>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last versionchanged">
<p><span class="versionmodified">Changed in version 2.5.1: </span>Added support for altering the settings based on
the passed arguments.</p>
</div>
</div>
<p>Available arguments:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">branch</span></tt></dt>
<dd>A specific branch to check out in the repository.</dd>
<dt><tt class="docutils literal"><span class="pre">repo</span></tt></dt>
<dd><p class="first">A repository URL to clone from.</p>
<p class="last">This allows to checkout from a fork repository (not necessarily on GitHub)
and try new features developed on that repository. It must be an URL that the
<tt class="docutils literal"><span class="pre">git</span> <span class="pre">clone</span></tt> command is able to clone.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">feature</span></tt></dt>
<dd>Allows specifying if the deployment is for a feature-staging server. Such
servers are used by Pootle developers in order to allow quick test of new
features using a live Pootle server.</dd>
</dl>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production bootstrap
</pre></div>
</div>
<p>In the previous example <strong class="command">production</strong> is called to set up the
environment for calling <strong class="command">bootstrap</strong> afterwards.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production:branch<span class="o">=</span>feature/extension-actions bootstrap
</pre></div>
</div>
<p>In the previous example <strong class="command">production</strong> is called to set up the
environment for calling <strong class="command">bootstrap</strong> afterwards.</p>
<p>The <em class="xref std std-option">branch</em> argument overwrites the default branch in the settings,
which are then used for all the subsequent commands (just <strong class="command">bootstrap</strong>
in this example).</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production:branch<span class="o">=</span>feature/extension-actions,repo<span class="o">=</span>git://github.com/unho/pootle.git bootstrap
</pre></div>
</div>
<p>In the previous example <strong class="command">production</strong> is called to set up the
environment for calling <strong class="command">bootstrap</strong> afterwards.</p>
<p>The <em class="xref std std-option">branch</em> and <em class="xref std std-option">repo</em> arguments overwrite the default
settings, which are then used for all the subsequent commands (just
<strong class="command">bootstrap</strong> in this example).</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production:branch<span class="o">=</span>feature/extension-actions,repo<span class="o">=</span>git://github.com/unho/pootle.git,feature<span class="o">=</span>yes stage_feature
</pre></div>
</div>
<p>This example is like the previous one, with the addition of the
<em class="xref std std-option">feature</em> argument that triggers the altering of several settings. That
altering is necessary for working with feature-staging servers.</p>
</div>
<div class="section" id="send-file">
<span id="fabric-commands-send-file"></span><h3>send_file<a class="headerlink" href="#send-file" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.6.0.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Uploads the specified file to the server</li>
</ul>
<p>Available arguments:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">upfile</span></tt></dt>
<dd><p class="first">The name of the file to upload.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is a required argument.</p>
</div>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production send_file:upfile<span class="o">=</span>translation-files.tar.gz
</pre></div>
</div>
</div>
<div class="section" id="setup">
<span id="fabric-commands-setup"></span><h3>setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.1.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Runs <a class="reference internal" href="commands.html#commands-setup"><em>setup</em></a> to create or upgrade the database as
required</li>
</ul>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production setup
</pre></div>
</div>
</div>
<div class="section" id="setup-db">
<span id="fabric-commands-setup-db"></span><h3>setup_db<a class="headerlink" href="#setup-db" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.1.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Runs <a class="reference internal" href="commands.html#commands-syncdb"><em>syncdb &#8211;noinput</em></a> to create the database schema</li>
<li>Runs <a class="reference internal" href="commands.html#commands-initdb"><em>initdb</em></a> to populate the standard schema objects</li>
<li>Runs <a class="reference internal" href="commands.html#commands-migrate"><em>migrate</em></a> to bring the database schema
up to the latest version</li>
</ul>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production setup_db
</pre></div>
</div>
</div>
<div class="section" id="stage-feature">
<span id="fabric-commands-stage-feature"></span><h3>stage_feature<a class="headerlink" href="#stage-feature" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.1.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Calls the <a class="reference internal" href="#fabric-commands-bootstrap"><em>bootstrap</em></a> command</li>
<li>Calls the <a class="reference internal" href="#fabric-commands-create-db"><em>create_db</em></a> command</li>
<li>Copies the data in the specified source DB into the DB that will be used for
the deployed Pootle</li>
<li>Calls the <a class="reference internal" href="#fabric-commands-update-db"><em>update_db</em></a> command</li>
<li>Calls the <a class="reference internal" href="#fabric-commands-deploy-static"><em>deploy_static</em></a> command</li>
<li>Calls the <a class="reference internal" href="#fabric-commands-install-site"><em>install_site</em></a> command</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While running it may ask for the remote server <tt class="docutils literal"><span class="pre">root</span></tt> password and
the specified <tt class="docutils literal"><span class="pre">db_user</span></tt> password.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command is intended primarily for deploying ad-hoc Pootle
servers for easing the test of feature branches during Pootle development.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This command might require changing the <strong>source_db</strong> field in the
<tt class="file docutils literal"><span class="pre">deploy/ENVIRONMENT/fabric.py</span></tt> file. Note that the database specified
on this field must exist.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This command requires using the <tt class="docutils literal"><span class="pre">staging</span></tt> environment passing to
it the <em class="xref std std-option">feature</em> argument, the desired branch and optionally a
repository URL.</p>
</div>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab staging:branch<span class="o">=</span>feature/extension-actions,feature<span class="o">=</span>yes stage_feature
<span class="nv">$ </span>fab staging:branch<span class="o">=</span>feature/extension-actions,repo<span class="o">=</span>git://github.com/unho/pootle.git,feature<span class="o">=</span>yes stage_feature
</pre></div>
</div>
</div>
<div class="section" id="staging">
<span id="fabric-commands-staging"></span><h3>staging<a class="headerlink" href="#staging" title="Permalink to this headline">¶</a></h3>
<p>This command:</p>
<ul class="simple">
<li>Sets up the configuration for the <tt class="docutils literal"><span class="pre">staging</span></tt> environment in Fabric settings</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command is useless unless it is called before another command or
commands.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This command allows changing the settings. To do so just pass it any
of its arguments when calling it.</p>
<p class="last">Note that some commands might require passing any or all of these arguments
to this command in order to overwrite the default settings before calling
those commands. For example the command <strong class="command">stage_feature</strong> requires
passing <em class="xref std std-option">branch</em>, <em class="xref std std-option">repo</em> and <em class="xref std std-option">feature</em>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last versionchanged">
<p><span class="versionmodified">Changed in version 2.5.1: </span>Added support for altering the settings based on
the passed arguments.</p>
</div>
</div>
<p>Available arguments:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">branch</span></tt></dt>
<dd>A specific branch to check out in the repository.</dd>
<dt><tt class="docutils literal"><span class="pre">repo</span></tt></dt>
<dd><p class="first">A repository URL to clone from.</p>
<p class="last">This allows to checkout from a fork repository (not necessarily on GitHub)
and try new features developed on that repository. It must be an URL that the
<tt class="docutils literal"><span class="pre">git</span> <span class="pre">clone</span></tt> command is able to clone.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">feature</span></tt></dt>
<dd>Allows specifying if the deployment is for a feature-staging server. Such
servers are used by Pootle developers in order to allow quick test of new
features using a live Pootle server.</dd>
</dl>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab staging bootstrap
</pre></div>
</div>
<p>In the previous example <strong class="command">staging</strong> is called to set up the environment
for calling <strong class="command">bootstrap</strong> afterwards.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab staging:branch<span class="o">=</span>feature/extension-actions bootstrap
</pre></div>
</div>
<p>In the previous example <strong class="command">staging</strong> is called to set up the environment
for calling <strong class="command">bootstrap</strong> afterwards.</p>
<p>The <em class="xref std std-option">branch</em> argument overwrites the default branch in the settings,
which are then used for all the subsequent commands (just <strong class="command">bootstrap</strong>
in this example).</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab staging:branch<span class="o">=</span>feature/extension-actions,repo<span class="o">=</span>git://github.com/unho/pootle.git bootstrap
</pre></div>
</div>
<p>In the previous example <strong class="command">staging</strong> is called to set up the environment
for calling <strong class="command">bootstrap</strong> afterwards.</p>
<p>The <em class="xref std std-option">branch</em> and <em class="xref std std-option">repo</em> arguments overwrite the default
settings, which are then used for all the subsequent commands (just
<strong class="command">bootstrap</strong> in this example).</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab staging:branch<span class="o">=</span>feature/extension-actions,repo<span class="o">=</span>git://github.com/unho/pootle.git,feature<span class="o">=</span>yes stage_feature
</pre></div>
</div>
<p>This example is like the previous one, with the addition of the
<em class="xref std std-option">feature</em> argument that triggers the altering of several settings. That
altering is necessary for working with feature-staging servers.</p>
</div>
<div class="section" id="syncdb">
<span id="fabric-commands-syncdb"></span><h3>syncdb<a class="headerlink" href="#syncdb" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.1.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Runs <a class="reference internal" href="commands.html#commands-syncdb"><em>syncdb &#8211;noinput</em></a> to create the database schema</li>
</ul>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production syncdb
</pre></div>
</div>
</div>
<div class="section" id="touch">
<span id="fabric-commands-touch"></span><h3>touch<a class="headerlink" href="#touch" title="Permalink to this headline">¶</a></h3>
<p>This command:</p>
<ul class="simple">
<li>Reloads daemon processes by touching the WSGI file</li>
</ul>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production touch
</pre></div>
</div>
</div>
<div class="section" id="unstage-feature">
<span id="fabric-commands-unstage-feature"></span><h3>unstage_feature<a class="headerlink" href="#unstage-feature" title="Permalink to this headline">¶</a></h3>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.6.0.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Calls the <a class="reference internal" href="#fabric-commands-drop-deployment"><em>drop_deployment</em></a> command</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While running it may ask for the remote server <tt class="docutils literal"><span class="pre">root</span></tt> password and
the specified <tt class="docutils literal"><span class="pre">db_user</span></tt> password.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command is intended for removing Pootle deployments performed
using the <a class="reference internal" href="#fabric-commands-stage-feature"><em>stage_feature</em></a> command.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This command requires using the <tt class="docutils literal"><span class="pre">staging</span></tt> environment passing to
it the <em class="xref std std-option">feature</em> argument and the desired branch.</p>
</div>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab staging:branch<span class="o">=</span>feature/extension-actions,feature<span class="o">=</span>yes unstage_feature
</pre></div>
</div>
</div>
<div class="section" id="update-code">
<span id="fabric-commands-update-code"></span><h3>update_code<a class="headerlink" href="#update-code" title="Permalink to this headline">¶</a></h3>
<p>This command:</p>
<ul class="simple">
<li>Updates the Pootle repository from GitHub</li>
<li>Checks out the specified branch, using master if no branch is specified</li>
<li>Updates the deployment requirements as listed in <tt class="file docutils literal"><span class="pre">requirements/</span></tt>,
including the base requirements as well</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last versionchanged">
<p><span class="versionmodified">Changed in version 2.5.1: </span>Added support for updating code from a given branch
on Pootle repository.</p>
</div>
</div>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production update_code  <span class="c"># Call that will use the default &#39;master&#39; branch</span>
<span class="nv">$ </span>fab production:branch<span class="o">=</span>stable/2.5.0 update_code  <span class="c"># Call which provides a branch</span>
</pre></div>
</div>
</div>
<div class="section" id="update-config">
<span id="fabric-commands-update-config"></span><h3>update_config<a class="headerlink" href="#update-config" title="Permalink to this headline">¶</a></h3>
<p>This command:</p>
<ul class="simple">
<li>Will upload the configuration files included in the chosen environment to the
remote server:<ul>
<li>Configure VirtualHost using the provided <tt class="file docutils literal"><span class="pre">virtualhost.conf</span></tt></li>
<li>Configure WSGI application using the provided <tt class="file docutils literal"><span class="pre">pootle.wsgi</span></tt></li>
<li>Configure and install custom settings for Pootle using the provided
<tt class="file docutils literal"><span class="pre">settings.conf</span></tt></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While running it may ask for the remote server <tt class="docutils literal"><span class="pre">root</span></tt> password or
the <tt class="docutils literal"><span class="pre">sudo</span></tt> password (standard password for the remote user configured in
the environment).</p>
</div>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production update_config
</pre></div>
</div>
</div>
<div class="section" id="update-db">
<span id="fabric-commands-update-db"></span><h3>update_db<a class="headerlink" href="#update-db" title="Permalink to this headline">¶</a></h3>
<p>This command:</p>
<ul class="simple">
<li>Runs <a class="reference internal" href="commands.html#commands-updatedb"><em>updatedb</em></a> and <a class="reference internal" href="commands.html#commands-migrate"><em>migrate</em></a> to update the database schema to the latest version</li>
</ul>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production update_db
</pre></div>
</div>
</div>
<div class="section" id="upgrade">
<span id="fabric-commands-upgrade"></span><h3>upgrade<a class="headerlink" href="#upgrade" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.1.</span></p>
</div>
<p>This command:</p>
<ul class="simple">
<li>Runs <a class="reference internal" href="commands.html#commands-upgrade"><em>upgrade</em></a> to apply any special
post-schema-upgrade actions (including changes needed for updated Translate
Toolkit version).  This would typically be performed after running the
<a class="reference internal" href="#fabric-commands-update-code"><em>update_code</em></a> command. If you haven&#8217;t
just upgraded Pootle or the Translate Toolkit to a new release, this isn&#8217;t
generally required, so there is no need to run it unless release notes or
other instructions direct you to do so.</li>
</ul>
<p>Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>fab production upgrade
</pre></div>
</div>
</div>
</div>
</div>


</div>
<hr>

<footer class="footer">
  <div class="container">
    <p class="pull-right"><a href="#">Back to top ↑</a></p>
    <ul class="unstyled muted">
      <li><small>
        &copy; 2004-2014, Translate.<br/>
      </small></li>
      <li><small>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.1.
      </small></li>
    </ul>
  </div>
</footer>
  </body>
</html>