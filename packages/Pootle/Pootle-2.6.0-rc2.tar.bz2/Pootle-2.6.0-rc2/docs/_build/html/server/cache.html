<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Caching System &mdash; Pootle 2.6.0-rc1 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.6.0-rc1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Pootle 2.6.0-rc1 documentation" href="../index.html" />
    <link rel="up" title="Administering a server" href="index.html" />
    <link rel="next" title="Text indexing for Pootle" href="indexing.html" />
    <link rel="prev" title="Optimization" href="optimization.html" /> 
  </head>
  <body>
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="brand" href="../index.html">Pootle</a>
        <span class="navbar-text pull-left"><b>2.6.0</b></span>
          <ul class="nav">
            <li class="divider-vertical"></li>
            
              <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../users/index.html">User&#8217;s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Administering a server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Pootle API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external_docs.html">External documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>
</ul>
</li>
              
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Caching System</a><ul>
<li><a class="reference internal" href="#cache-backends">Cache Backends</a><ul>
<li><a class="reference internal" href="#memcached">Memcached</a><ul>
<li><a class="reference internal" href="#memcached-on-unix-sockets">Memcached on Unix sockets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#database">Database</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
            
            
              
  <li><a href="optimization.html"
         title="previous chapter">&laquo; Optimization</a></li>
  <li><a href="indexing.html"
         title="next chapter">Text indexing for Pootle &raquo;</a></li>
            
          </ul>
          <ul class="nav pull-right">
            
              
            
          
            
<form class="navbar-search pull-right" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
          </ul>
        </div>
      </div>
    </div>
  </div>

<div class="container content">
   
  <div class="section" id="caching-system">
<span id="cache"></span><h1>Caching System<a class="headerlink" href="#caching-system" title="Permalink to this headline">¶</a></h1>
<p>Pootle uses a caching system to improve performance. It is an essential part
of <a class="reference internal" href="optimization.html"><em>optimizing</em></a> your Pootle installation. It is based on
<a class="reference external" href="http://docs.djangoproject.com/en/dev/topics/cache/"><em>Django&#8217;s caching system</em></a>, and is used for various things:</p>
<ul class="simple">
<li>To serve cached (possibly slightly outdated) versions of most pages to
anonymous users to reduce their impact on server performance.</li>
<li>To cache bits of the user interface, even for logged in users. Data will not
be out of date but Pootle still tries to use the cache to reduce the impact
on server performance.</li>
<li>To store the result of expensive calculations like translation statistics.</li>
<li>To keep track of last update timestamps to avoid unnecessary and expensive
file operations (for example don&#8217;t attempt to save translations before a
download if there are no new translations).</li>
</ul>
<p>Without a well functioning cache system, Pootle could be slow.</p>
<div class="section" id="cache-backends">
<span id="cache-cache-backends"></span><h2>Cache Backends<a class="headerlink" href="#cache-backends" title="Permalink to this headline">¶</a></h2>
<p>Django supports <a class="reference external" href="https://docs.djangoproject.com/en/dev/topics/cache/#setting-up-the-cache" title="(in Django v1.8)"><em class="xref std std-ref">multiple cache backends</em></a>
(methods of storing cache data). You can specify which backend to use by
overriding the value of <a class="reference external" href="https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-CACHES" title="(in Django v1.8)"><tt class="xref std std-setting docutils literal"><span class="pre">CACHES</span></tt></a> in your configuration file.</p>
<div class="section" id="memcached">
<span id="cache-memcached"></span><h3>Memcached<a class="headerlink" href="#memcached" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s">&#39;django.core.cache.backends.memcached.MemcachedCache&#39;</span><span class="p">,</span>
        <span class="s">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s">&#39;127.0.0.1:11211&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a class="reference external" href="https://docs.djangoproject.com/en/dev/topics/cache/#memcached" title="(in Django v1.8)"><em class="xref std std-ref">Memcached</em></a> is the <strong>recommended cache backend</strong>, it
provides the best performance.  And works fine with multiprocessing servers
like Apache. It requires the <cite>python-memcached</cite> package and a running
memcached server. Due to extra dependencies it is not enabled by default.</p>
<div class="section" id="memcached-on-unix-sockets">
<span id="cache-memcached-on-unix-sockets"></span><h4>Memcached on Unix sockets<a class="headerlink" href="#memcached-on-unix-sockets" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s">&#39;django.core.cache.backends.memcached.MemcachedCache&#39;</span><span class="p">,</span>
        <span class="s">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s">&#39;unix:/path/to/memcached.sock&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you don&#8217;t want Pootle using TCP/IP to access memcached then you can use Unix
sockets.  This is often a situation in hardened installations using SELinux.</p>
<p>You will need to ensure that memcached is running with the <tt class="docutils literal"><span class="pre">-s</span></tt> option:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>memcached -u nobody -s /path/to/memcached.sock -a 0777
</pre></div>
</div>
</div>
</div>
<div class="section" id="database">
<span id="cache-database"></span><h3>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s">&#39;django.core.cache.backends.db.DatabaseCache&#39;</span><span class="p">,</span>
        <span class="s">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s">&#39;my_cache_table&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a class="reference external" href="https://docs.djangoproject.com/en/dev/topics/cache/#database-caching" title="(in Django v1.8)"><em class="xref std std-ref">Database caching</em></a> relies on a table in the main
Pootle database for storing the cached data, which makes it suitable for
multiprocessing servers, with the added benefit that the cached data remains
intact after a server reboot (unlike memcached) but it is considerably slower
than memcached.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.1.1.</span></p>
</div>
<p>This is the default cache backend. On new installs and upgrades the required
database will be created.</p>
<p>Users of older versions need to create the cache tables manually if they would
like to switch to the database cache backend using this <a class="reference internal" href="commands.html"><em>management
command</em></a>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>pootle createcachetable pootlecache
</pre></div>
</div>
</div>
</div>
</div>


</div>
<hr>

<footer class="footer">
  <div class="container">
    <p class="pull-right"><a href="#">Back to top ↑</a></p>
    <ul class="unstyled muted">
      <li><small>
        &copy; 2004-2014, Translate.<br/>
      </small></li>
      <li><small>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.1.
      </small></li>
    </ul>
  </div>
</footer>
  </body>
</html>