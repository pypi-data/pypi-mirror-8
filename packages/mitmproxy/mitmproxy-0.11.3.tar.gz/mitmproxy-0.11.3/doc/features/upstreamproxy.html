<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta  content="text/html; charset=utf-8" http-equiv="Content-Type"/>


<link  href="../01-bootstrap.min.css" type="text/css" rel="StyleSheet"/>
<link  href="../02-docstyle.css" type="text/css" rel="StyleSheet"/>
<link  href="../syntax.css" type="text/css" rel="StyleSheet"/>
<title>mitmproxy 0.11.3 - Upstream proxy mode</title></head><body><div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="../index.html">mitmproxy 0.11.3 docs</a>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="span3">
      <div class="well sidebar-nav">
            <ul class="nav nav-list">
    <li><a href="../index.html">Introduction</a></li>
    <li><a href="../install.html">Installation</a></li>
    <li><a href="../howmitmproxy.html">How mitmproxy works</a></li>
    <li><a href="../modes.html">Modes of Operation</a></li>

    <li class="nav-header">Tools</li>
        <li><a href="../mitmproxy.html">mitmproxy</a></li>
        <li><a href="../mitmdump.html">mitmdump</a></li>
        <li><a href="../config.html">configuration</a></li>

    <li class="nav-header">Features</li>
        <li><a href="anticache.html">Anticache</a></li>

        <li><a href="filters.html">Filter expressions</a></li>
        <li><a href="replacements.html">Replacements</a></li>
        <li><a href="clientreplay.html">Client-side replay</a></li>
        <li><a href="serverreplay.html">Server-side replay</a></li>
        <li><a href="setheaders.html">Set Headers</a></li>
        <li><a href="passthrough.html">Ignore Domains</a></li>
        <li><a href="proxyauth.html">Proxy Authentication</a></li>
        <li><a href="reverseproxy.html">Reverse proxy mode</a></li>
        <li><a href="responsestreaming.html">Response Streaming</a></li>
        <li><a href="socksproxy.html">SOCKS Mode</a></li>
        <li><a href="sticky.html">Sticky cookies and auth</a></li>
        <li><a href="tcpproxy.html">TCP Proxy</a></li>
        <li class="active"><a href="upstreamproxy.html">Upstream proxy mode</a></li>
        <li><a href="upstreamcerts.html">Upstream Certs</a></li>


    <li class="nav-header">Installing Certificates</li>
        <li><a href="../ssl.html">Overview</a></li>
        <li><a href="../certinstall/webapp.html">Using the Web App</a></li>
        <li><a href="../certinstall/android.html">Android</a></li>
        <li><a href="../certinstall/firefox.html">Firefox</a></li>
        <li><a href="../certinstall/ios.html">IOS</a></li>
        <li><a href="../certinstall/ios-simulator.html">IOS Simulator</a></li>
        <li><a href="../certinstall/java.html">Java</a></li>
        <li><a href="../certinstall/osx.html">OSX</a></li>
        <li><a href="../certinstall/windows7.html">Windows 7</a></li>

    <li class="nav-header">Transparent Proxying</li>
        <li><a href="../transparent.html">Overview</a></li>
        <li><a href="../transparent/linux.html">Linux</a></li>
        <li><a href="../transparent/osx.html">OSX</a></li>

    <li class="nav-header">Scripting mitmproxy</li>
        <li><a href="../scripting/inlinescripts.html">Inline Scripts</a></li>
        <li><a href="../scripting/libmproxy.html">libmproxy</a></li>

    <li class="nav-header">Tutorials</li>
        <li><a href="../tutorials/30second.html">Client playback: a 30 second example</a></li>
        <li><a href="../tutorials/gamecenter.html">Setting highscores on Apple's GameCenter</a></li>
        <li><a href="../tutorials/transparent-dhcp.html">Transparently proxify virtual machines</a></li>

    <li class="nav-header">Hacking</li>
        <li><a href="../dev/architecture.html">Architecture</a></li>
        <li><a href="../dev/testing.html">Testing</a></li>
</ul>

      </div>
    </div>

    <div class="span9">
        <div class="page-header">
        <h1>Upstream proxy mode</h1>
        </div>
        <p>In this mode, mitmproxy accepts proxy requests and unconditionally forwards all
requests to a specified upstream proxy server. This is in contrast to <a
href="reverseproxy.html">reverse proxy mode</a>, in which
mitmproxy forwards ordinary HTTP requests to an upstream server.</p>

<table class="table">
    <tbody>
        <tr>
            <th width="20%">command-line</th> <td>-U http://hostname[:port]</td>
        </tr>
    </tbody>
</table>

<p>Here, <strong>schema</strong> is one of http, https, http2https or https2http. The latter
two extended schema specifications control the use of HTTP and HTTPS on
mitmproxy and the upstream server. You can indicate that mitmproxy should use
HTTP, and the upstream server uses HTTPS like this:</p>

<pre><code>http2https://hostname:port
</code></pre>

<p>And you can indicate that mitmproxy should use HTTPS while the upstream
service uses HTTP like this:</p>

<pre><code>https2http://hostname:port
</code></pre>

    </div>
  </div>

  <hr>

  <footer>
    <p>Â© mitmproxy project, 2014</p>
  </footer>
</div>
</body></html>