<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<title>htmltemplate | defining html templates</title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css" media="all"><!--@import url(full.css);--></style>

<!--[if !IE 7]>
	<style type="text/css">
		#wrap {display:table;height:100%}
	</style>
<![endif]-->

</head>
<body>

<div id="wrap">

	<div id="main">

		<h1>Defining HTML templates</h1>

		<div class="navbar">
			<a href="tutorial_1.html">Prev</a> | <a href="index.html">TOC</a> | <a href="template_object_model.html">Next</a>
		</div>

		<h2>Template structure</h2>

<p>An HTML template is usually a complete HTML/XHTML document, though it may also be a fragment of one – htmltemplate doesn't require the document be complete, or even have a single root element.</p>

<p>To create a Template object model, selected HTML elements must be annotated with <em>compiler directives</em> – special tag attributes that indicate how the object model is to be constructed. By default, the special attribute is named 'node', though a different name may be specified via <code>Template.__init__()</code> if needed. Here are some examples:</p>

<pre><code>&lt;h1 node="con:title"&gt;Welcome&lt;/h1&gt;

&lt;img node="con:photo" src="" /&gt;

&lt;a node="rep:link" href="#"&gt;LINK&lt;/a&gt;

&lt;span node="-sep:link"&gt; | &lt;/span&gt;

&lt;div node="del:"&gt; ... &lt;/div&gt;
</code></pre>

<p>One restriction does apply when authoring templates: all HTML elements must be correctly closed according to XHTML rules: elements containing content must have both opening and closing tags, and empty tags must include a trailing slash. For example, this markup is acceptable:</p>

<pre><code>&lt;p&gt;Hello World&lt;/p&gt;

&lt;hr /&gt;
</code></pre>

<p>but this is not:</p>

<pre><code>&lt;p&gt;Hello World

&lt;hr&gt;
</code></pre>

<p>Since the htmltemplate parser already requires templates to be partially XHTML compatible, it is often convenient to develop templates using full XHTML markup and generate valid XHTML documents as output; therefore, htmltemplate preserves empty tags' trailing slashes by default. However, if you do not intend to produce XML-compatible documents, the <code>Template.__init__()</code> method's <code>isxhtml</code> argument can be used to omit trailing slashes from the final output instead.</p>

<h2>Compiler directives</h2>

<p>htmltemplate defines four types of compiler directive:</p>

<ul>
<li><code>con</code> -- defines a <strong>Container</strong> node that can appear only once at the given location</li>
<li><code>rep</code> -- defines a <strong>Repeater</strong> node that can appear any number of times</li>
<li><code>sep</code> -- defines a <strong>Separator</strong> string to be inserted between each iteration of a Repeater object of the same name</li>
<li><code>del</code> -- indicates a section of dummy markup to <strong>Delete</strong> so that it never appears in generated output.</li>
</ul>

<p>and its values are typically of form "FOO:BAR", where FOO is a three-letter code indicating the type of directive and BAR is the name of the node to create. For example, <code>con:title</code> directs the parser to create a Container node named 'title', while <code>rep:link</code> will produce a Repeater node named 'link'.</p>

<p>Directives and node names are both case-sensitive. Each node name must be a valid Python identifier with two additional restrictions: 1. it cannot begin with an underscore, and 2. it cannot match the name of any property or method defined by the <a href="class_definitions.html"><code>Container</code>, <code>Repeater</code> and <code>Template</code> classes</a>.</p>

<p>Directives also supports an 'omit tags' modifier, '-',. When prepended to a directive, e.g. "-con:foo", the minus tags modifier indicates that the HTML element's tags should be omitted in the compiled node/separator string. Use this modifier when adding an arbitrary HTML element (typically <code>&lt;div&gt;</code> or <code>&lt;span&gt;</code>) to an HTML template purely to construct a node or separator string to prevent the rendered page being cluttered with the leftover tags.</p>

<p>Only the (<code>con</code>) and Repeater (<code>rep</code>) directives actually describe nodes within the template object mode; these will be discussed in the <a href="template_object_model.html">next chapter</a>. The two remaining directives, Separator and Delete, only affect how the template HTML is parsed, so are described below.</p>

<h3>Using Separator directives</h3>

<p>The Separator (<code>sep</code>) directive indicates a section of markup that should appear between multiple instances of a Repeater node. The default separator for all Repeater nodes is a single linefeed (<code>"\n"</code>) character; for example:</p>

<pre><code>&lt;ul&gt;
    &lt;li node="rep:item"&gt;...&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p>will render as:</p>

<pre><code>&lt;ul&gt;
    &lt;li&gt;ITEM 1&lt;/li&gt;
&lt;li&gt;ITEM 2&lt;/li&gt;
&lt;li&gt;ITEM 3&lt;/li&gt;
&lt;ul&gt;
</code></pre>

<p>If a particular Repeater node requires a different separator, this can be defined by adding a <code>sep</code> directive to a second element that appears after the Repeater element. For example to insert a <code>&lt;br /&gt;</code> tag between each instance of a Repeater node named 'foo':</p>

<pre><code>&lt;br node="sep:foo" /&gt;
</code></pre>

<p>Note that the Separator element must appear <em>after</em> the Repeater element to which it applies and its name must match the Repeater's name exactly. </p>

<p>If the Separator element's tags are not required in the final output, just prefix the <code>sep</code> directive with an 'omit tags' modifier (<code>-</code>) and only the element's content will be used as the separator string:</p>

<pre><code>&lt;p&gt;&lt;span node="-rep:item"&gt;...&lt;/span&gt; &lt;span node="-sep:link"&gt;, &lt;/span&gt;&lt;/p&gt;
</code></pre>

<p>will render as:</p>

<pre><code>&lt;p&gt;ITEM 1, ITEM 2, ITEM 3, ITEM 4&lt;/p&gt;
</code></pre>

<h3>Using Delete directives</h3>

<p>The Delete (<code>del</code>) directive is used to strip any dummy markup that a template designer has added to the template purely for preview purposes and which should never appear in any rendered output. For example, the following template defines a <code>table</code> element whose rows and cells will be dynamically created:</p>

<pre><code>&lt;table&gt;
    &lt;tr node="rep:row"&gt;
        &lt;td node="rep:cell"&gt;1&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;
</code></pre>

<p>While this template is perfectly functional, previewing it in a web browser won't provide a realistic impression of the final output. One way to create a more convincing preview is to insert dummy HTML elements into the template, adding a <code>del</code> directive to each one to ensure it will never appear in any rendered output:</p>

<pre><code>&lt;table&gt;
    &lt;tr node="rep:row"&gt;
        &lt;td node="rep:cell"&gt;1&lt;/td&gt;
        &lt;td node="del:"&gt;2&lt;/td&gt;
        &lt;td node="del:"&gt;3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr node="del:"&gt;
        &lt;td&gt;4&lt;/td&gt;
        &lt;td&gt;5&lt;/td&gt;
        &lt;td&gt;6&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;
</code></pre>

<p>Deleted elements do not need to be named (for obvious reasons), so their special attributes are normally just written as <code>node="del:"</code>.</p>

<h2>Notes</h2>

<p>The parser will automatically remove the special attribute from any element it converts into a template node. Tag attributes whose name is the same as that used for special attributes but whose value isn't a valid directive are left as-is. For example, should you use an existing HTML attribute such as <code>id</code> as your special attribute name, <code>id="con:foo"</code> will be recognized as a valid directive and omitted from the output while <code>id="some-anchor"</code> will be recognized as non-special and left as-is.</p>

	
	</div>

</div>

<div id="footer">

	<div class="navbar">
			<a href="tutorial_1.html">Prev</a> | <a href="index.html">TOC</a> | <a href="template_object_model.html">Next</a>
		</div>

	<p class="footer">© 2007-2014 HAS</p>

</div>

</body>
</html>
