<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial &mdash; circuits 3.1.0.dev documentation</title>
    
    <link rel="stylesheet" href="../../_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.1.0.dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="circuits 3.1.0.dev documentation" href="../../index.html" />
    <link rel="up" title="circuits Tutorials" href="../index.html" />
    <link rel="next" title="Telnet Tutorial" href="../telnet/index.html" />
    <link rel="prev" title="circuits Tutorials" href="../index.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18486793-1']);
  _gaq.push(['_setDomainName', '.fabfile.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../telnet/index.html" title="Telnet Tutorial"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="circuits Tutorials"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">circuits 3.1.0.dev documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">circuits Tutorials</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Welcome to the circuits tutorial. This 5-minute tutorial will guide you
through the basic concepts of circuits. The goal is to introduce
new concepts incrementally with walk-through examples that you can try out!
By the time you&#8217;ve finished, you should have a good basic understanding
of circuits, how it feels and where to go from there.</p>
</div>
<div class="section" id="the-component">
<h2>The Component<a class="headerlink" href="#the-component" title="Permalink to this headline">¶</a></h2>
<p>First up, let&#8217;s show how you can use the <tt class="docutils literal"><span class="pre">Component</span></tt> and run it in a very
simple application.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">circuits</span> <span class="kn">import</span> <span class="n">Component</span>

<span class="n">Component</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference download internal" href="../../_downloads/001.py"><tt class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">001.py</span></tt></a></p>
<p>Okay so that&#8217;s pretty boring as it doesn&#8217;t do very much! But that&#8217;s okay...
Read on!</p>
<p>Let&#8217;s try to create our own custom Component called <tt class="docutils literal"><span class="pre">MyComponent</span></tt>. This is done
using normal Python subclassing.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">circuits</span> <span class="kn">import</span> <span class="n">Component</span>


<span class="k">class</span> <span class="nc">MyComponent</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;My Component&quot;&quot;&quot;</span>

<span class="n">MyComponent</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference download internal" href="../../_downloads/002.py"><tt class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">002.py</span></tt></a></p>
<p>Okay, so this still isn&#8217;t very useful! But at least we can create
custom components with the behavior we want.</p>
<p>Let&#8217;s move on to something more interesting...</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Component(s) in circuits are what sets circuits apart from other Asynchronous or Concurrent
Application Frameworks. Components(s) are used as building blocks from simple behaviors to
complex ones (<em>composition of simpler components to form more complex ones</em>).</p>
</div>
</div>
<div class="section" id="event-handlers">
<h2>Event Handlers<a class="headerlink" href="#event-handlers" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s now extend our little example to say &#8220;Hello World!&#8221; when it&#8217;s started.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">circuits</span> <span class="kn">import</span> <span class="n">Component</span>


<span class="k">class</span> <span class="nc">MyComponent</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">started</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">)</span>

<span class="n">MyComponent</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference download internal" href="../../_downloads/003.py"><tt class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">003.py</span></tt></a></p>
<p>Here we&#8217;ve created a simple <strong>Event Handler</strong> that listens for the <tt class="docutils literal"><span class="pre">started</span></tt> Event.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Methods defined in a custom subclassed <tt class="docutils literal"><span class="pre">Component</span></tt> are automatically turned into
<strong>Event Handlers</strong>. The only exception to this are methods prefixed with an underscore (<tt class="docutils literal"><span class="pre">_</span></tt>).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you do not want this <em>automatic</em> behavior, inherit from <tt class="docutils literal"><span class="pre">BaseComponent</span></tt> instead which means
you will <strong>have to</strong> use the <tt class="docutils literal"><span class="pre">~circuits.core.handlers.handler</span></tt> decorator to define
your <strong>Event Handlers</strong>.</p>
</div>
<p>Running this we get:</p>
<div class="highlight-python"><div class="highlight"><pre>Hello World!
</pre></div>
</div>
<p>Alright! We have something slightly more useful! Whoohoo it says hello!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Press ^C (<em>CTRL + C</em>) to exit.</p>
</div>
</div>
<div class="section" id="registering-components">
<h2>Registering Components<a class="headerlink" href="#registering-components" title="Permalink to this headline">¶</a></h2>
<p>So now that we&#8217;ve learned how to use a Component, create a custom Component
and create simple Event Handlers, let&#8217;s try something a bit more complex
by creating a complex component made up of two simpler ones.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We call this <strong>Component Composition</strong> which is the very essence of the circuits Application Framework.</p>
</div>
<p>Let&#8217;s create two components:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Bob</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Fred</span></tt></li>
</ul>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">circuits</span> <span class="kn">import</span> <span class="n">Component</span>


<span class="k">class</span> <span class="nc">Bob</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">started</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Hello I&#39;m Bob!&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Fred</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">started</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Hello I&#39;m Fred!&quot;</span><span class="p">)</span>

<span class="p">(</span><span class="n">Bob</span><span class="p">()</span> <span class="o">+</span> <span class="n">Fred</span><span class="p">())</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference download internal" href="../../_downloads/004.py"><tt class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">004.py</span></tt></a></p>
<p>Notice the way we register the two components <tt class="docutils literal"><span class="pre">Bob</span></tt> and <tt class="docutils literal"><span class="pre">Fred</span></tt> together
? Don&#8217;t worry if this doesn&#8217;t make sense right now. Think of it as putting
two components together and plugging them into a circuit board.</p>
<p>Running this example produces the following result:</p>
<div class="highlight-python"><div class="highlight"><pre>Hello I&#39;m Bob!
Hello I&#39;m Fred!
</pre></div>
</div>
<p>Cool! We have two components that each do something and print a simple
message on the screen!</p>
</div>
<div class="section" id="complex-components">
<h2>Complex Components<a class="headerlink" href="#complex-components" title="Permalink to this headline">¶</a></h2>
<p>Now, what if we wanted to create a Complex Component? Let&#8217;s say we wanted
to create a new Component made up of two other smaller components?</p>
<p>We can do this by simply registering components to a Complex Component
during initialization.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is also called <strong>Component Composition</strong> and avoids the
classical <a class="reference external" href="http://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem">Diamond problem</a>
of Multiple Inheritance. In circuits we do not use Multiple Inheritance to create <strong>Complex Components</strong>
made up of two or more base classes of components, we instead compose them together via registration.</p>
</div>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">circuits</span> <span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">circuits.tools</span> <span class="kn">import</span> <span class="n">graph</span>


<span class="k">class</span> <span class="nc">Pound</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Pound</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bob</span> <span class="o">=</span> <span class="n">Bob</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fred</span> <span class="o">=</span> <span class="n">Fred</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">started</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">graph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">Bob</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">started</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Hello I&#39;m Bob!&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Fred</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">started</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Hello I&#39;m Fred!&quot;</span><span class="p">)</span>

<span class="n">Pound</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference download internal" href="../../_downloads/005.py"><tt class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">005.py</span></tt></a></p>
<p>So now <tt class="docutils literal"><span class="pre">Pound</span></tt> is a Component that consists of two other components
registered to it: <tt class="docutils literal"><span class="pre">Bob</span></tt> and <tt class="docutils literal"><span class="pre">Fred</span></tt></p>
<p>The output of this is identical to the previous:</p>
<div class="highlight-python"><div class="highlight"><pre>* &lt;Pound/* 3391:MainThread (queued=0, channels=1, handlers=3) [R]&gt;
 * &lt;Bob/* 3391:MainThread (queued=0, channels=1, handlers=1) [S]&gt;
 * &lt;Fred/* 3391:MainThread (queued=0, channels=1, handlers=1) [S]&gt;
Hello I&#39;m Bob!
Hello I&#39;m Fred!
</pre></div>
</div>
<p>The only difference is that <tt class="docutils literal"><span class="pre">Bob</span></tt> and <tt class="docutils literal"><span class="pre">Fred</span></tt> are now part of a more
Complex Component called <tt class="docutils literal"><span class="pre">Pound</span></tt>. This can be illustrated by the
following diagram:</p>
<p class="graphviz">
<img src="../../_images/graphviz-fa9bbccfbcc0c44bc0636e85a3c610dc406600cf.png" alt="digraph G {
   &quot;Pound-1344&quot; -&gt; &quot;Bob-9b0c&quot;;
   &quot;Pound-1344&quot; -&gt; &quot;Fred-e98a&quot;;
}" />
</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The extra lines in the above output are an ASCII representation of the
above graph (<em>produced by pydot + graphviz</em>).</p>
</div>
<p>Cool :-)</p>
</div>
<div class="section" id="component-inheritance">
<h2>Component Inheritance<a class="headerlink" href="#component-inheritance" title="Permalink to this headline">¶</a></h2>
<p>Since circuits is a framework written for the <a class="reference external" href="http://www.python.org/">Python Programming
Language</a> it naturally inherits properties of Object Orientated
Programming (OOP) &#8211; such as inheritance.</p>
<p>So let&#8217;s take our <tt class="docutils literal"><span class="pre">Bob</span></tt> and <tt class="docutils literal"><span class="pre">Fred</span></tt> components and create a Base
Component called <tt class="docutils literal"><span class="pre">Dog</span></tt> and modify our two dogs (<tt class="docutils literal"><span class="pre">Bob</span></tt> and <tt class="docutils literal"><span class="pre">Fred</span></tt>) to
subclass this.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">circuits</span> <span class="kn">import</span> <span class="n">Component</span><span class="p">,</span> <span class="n">Event</span>


<span class="k">class</span> <span class="nc">woof</span><span class="p">(</span><span class="n">Event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;woof Event&quot;&quot;&quot;</span>


<span class="k">class</span> <span class="nc">Pound</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Pound</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bob</span> <span class="o">=</span> <span class="n">Bob</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fred</span> <span class="o">=</span> <span class="n">Fred</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">started</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fire</span><span class="p">(</span><span class="n">woof</span><span class="p">())</span>


<span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">woof</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Woof! I&#39;m </span><span class="si">%s</span><span class="s">!&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Bob</span><span class="p">(</span><span class="n">Dog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Bob&quot;&quot;&quot;</span>


<span class="k">class</span> <span class="nc">Fred</span><span class="p">(</span><span class="n">Dog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Fred&quot;&quot;&quot;</span>

<span class="n">Pound</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference download internal" href="../../_downloads/006.py"><tt class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">006.py</span></tt></a></p>
<p>Now let&#8217;s try to run this and see what happens:</p>
<div class="highlight-python"><div class="highlight"><pre>Woof! I&#39;m Bob!
Woof! I&#39;m Fred!
</pre></div>
</div>
<p>So both dogs barked! Hmmm</p>
</div>
<div class="section" id="component-channels">
<h2>Component Channels<a class="headerlink" href="#component-channels" title="Permalink to this headline">¶</a></h2>
<p>What if we only want one of our dogs to bark? How do we do this without
causing the other one to bark as well?</p>
<p>Easy! Use a separate <tt class="docutils literal"><span class="pre">channel</span></tt> like so:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">circuits</span> <span class="kn">import</span> <span class="n">Component</span><span class="p">,</span> <span class="n">Event</span>


<span class="k">class</span> <span class="nc">woof</span><span class="p">(</span><span class="n">Event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;woof Event&quot;&quot;&quot;</span>


<span class="k">class</span> <span class="nc">Pound</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Pound</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bob</span> <span class="o">=</span> <span class="n">Bob</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fred</span> <span class="o">=</span> <span class="n">Fred</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">started</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fire</span><span class="p">(</span><span class="n">woof</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">bob</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">woof</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Woof! I&#39;m </span><span class="si">%s</span><span class="s">!&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Bob</span><span class="p">(</span><span class="n">Dog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Bob&quot;&quot;&quot;</span>

    <span class="n">channel</span> <span class="o">=</span> <span class="s">&quot;bob&quot;</span>


<span class="k">class</span> <span class="nc">Fred</span><span class="p">(</span><span class="n">Dog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Fred&quot;&quot;&quot;</span>

    <span class="n">channel</span> <span class="o">=</span> <span class="s">&quot;fred&quot;</span>

<span class="n">Pound</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference download internal" href="../../_downloads/007.py"><tt class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">007.py</span></tt></a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Events can be fired with either the <tt class="docutils literal"><span class="pre">.fire(...)</span></tt> or <tt class="docutils literal"><span class="pre">.fireEvent(...)</span></tt>
method.</p>
</div>
<p>If you run this, you&#8217;ll get:</p>
<div class="highlight-python"><div class="highlight"><pre>Woof! I&#39;m Bob!
</pre></div>
</div>
</div>
<div class="section" id="event-objects">
<h2>Event Objects<a class="headerlink" href="#event-objects" title="Permalink to this headline">¶</a></h2>
<p>So far in our tutorial we have been defining an Event Handler for a builtin
Event called <tt class="docutils literal"><span class="pre">started</span></tt>. What if we wanted to define our own Event Handlers and our own
Events? You&#8217;ve already seen how easy it is to create a new Event Handler
by simply defining a normal Python method on a Component.</p>
<p>Defining your own Events helps with documentation and testing and makes
things a little easier.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyEvent</span><span class="p">(</span><span class="n">Event</span><span class="p">):</span>
   <span class="sd">&quot;&quot;&quot;MyEvent&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>So here&#8217;s our example where we&#8217;ll define a new Event called <tt class="docutils literal"><span class="pre">Bark</span></tt>
and make our <tt class="docutils literal"><span class="pre">Dog</span></tt> fire a <tt class="docutils literal"><span class="pre">Bark</span></tt> event when our application starts up.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">circuits</span> <span class="kn">import</span> <span class="n">Component</span><span class="p">,</span> <span class="n">Event</span>


<span class="k">class</span> <span class="nc">bark</span><span class="p">(</span><span class="n">Event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;bark Event&quot;&quot;&quot;</span>


<span class="k">class</span> <span class="nc">Pound</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Pound</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bob</span> <span class="o">=</span> <span class="n">Bob</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fred</span> <span class="o">=</span> <span class="n">Fred</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">started</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fire</span><span class="p">(</span><span class="n">bark</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">bark</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Woof! I&#39;m </span><span class="si">%s</span><span class="s">!&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Bob</span><span class="p">(</span><span class="n">Dog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Bob&quot;&quot;&quot;</span>

    <span class="n">channel</span> <span class="o">=</span> <span class="s">&quot;bob&quot;</span>


<span class="k">class</span> <span class="nc">Fred</span><span class="p">(</span><span class="n">Dog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Fred&quot;&quot;&quot;</span>

    <span class="n">channel</span> <span class="o">=</span> <span class="s">&quot;fred&quot;</span>

<span class="n">Pound</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference download internal" href="../../_downloads/008.py"><tt class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">008.py</span></tt></a></p>
<p>If you run this, you&#8217;ll get:</p>
<div class="highlight-python"><div class="highlight"><pre>Woof! I&#39;m Bob!
Woof! I&#39;m Fred!
</pre></div>
</div>
</div>
<div class="section" id="the-debugger">
<h2>The Debugger<a class="headerlink" href="#the-debugger" title="Permalink to this headline">¶</a></h2>
<p>Lastly...</p>
<p>Asynchronous programming has many advantages but can be a little harder to
write and follow. A silently caught exception in an Event Handler, or an Event
that never gets fired, or any number of other weird things can cause your
application to fail and leave you scratching your head.</p>
<p>Fortunately circuits comes with a <tt class="docutils literal"><span class="pre">Debugger</span></tt> Component to help you keep
track of what&#8217;s going on in your application, and allows you to tell what
your application is doing.</p>
<p>Let&#8217;s say that we defined out <tt class="docutils literal"><span class="pre">bark</span></tt> Event Handler in our <tt class="docutils literal"><span class="pre">Dog</span></tt>
Component as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">bark</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
   <span class="k">print</span><span class="p">(</span><span class="s">&quot;Woof! I&#39;m </span><span class="si">%s</span><span class="s">!&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Now clearly there is no such variable as <tt class="docutils literal"><span class="pre">name</span></tt> in the local scope.</p>
<p>For reference here&#8217;s the entire example...</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">circuits</span> <span class="kn">import</span> <span class="n">Component</span><span class="p">,</span> <span class="n">Event</span>


<span class="k">class</span> <span class="nc">bark</span><span class="p">(</span><span class="n">Event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;bark Event&quot;&quot;&quot;</span>


<span class="k">class</span> <span class="nc">Pound</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Pound</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bob</span> <span class="o">=</span> <span class="n">Bob</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fred</span> <span class="o">=</span> <span class="n">Fred</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">started</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fire</span><span class="p">(</span><span class="n">bark</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">bark</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Woof! I&#39;m </span><span class="si">%s</span><span class="s">!&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>  <span class="c"># noqa</span>


<span class="k">class</span> <span class="nc">Bob</span><span class="p">(</span><span class="n">Dog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Bob&quot;&quot;&quot;</span>

    <span class="n">channel</span> <span class="o">=</span> <span class="s">&quot;bob&quot;</span>


<span class="k">class</span> <span class="nc">Fred</span><span class="p">(</span><span class="n">Dog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Fred&quot;&quot;&quot;</span>

    <span class="n">channel</span> <span class="o">=</span> <span class="s">&quot;fred&quot;</span>

<span class="n">Pound</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference download internal" href="../../_downloads/009.py"><tt class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">009.py</span></tt></a></p>
<p>If you run this, you&#8217;ll get:</p>
<p>That&#8217;s right! You get nothing! Why? Well in circuits any error or
exception that occurs in a running application is automatically caught and
dealt with in a way that lets your application &#8220;keep on going&#8221;. Crashing is
unwanted behavior in a system so we expect to be able to recover from
horrible situations.</p>
<p>SO what do we do? Well that&#8217;s easy. circuits comes with a <tt class="docutils literal"><span class="pre">Debugger</span></tt>
that lets you log all events as well as all errors so you can quickly and
easily discover which Event is causing a problem and which Event Handler to
look at.</p>
<p>If you change Line 34 of our example...</p>
<p>From:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Fred</span><span class="p">(</span><span class="n">Dog</span><span class="p">):</span>
</pre></div>
</div>
<p>To:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">circuits</span> <span class="kn">import</span> <span class="n">Debugger</span>

<span class="p">(</span><span class="n">Pound</span><span class="p">()</span> <span class="o">+</span> <span class="n">Debugger</span><span class="p">())</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>Then run this, you&#8217;ll get the following:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;Registered[bob:registered] [&lt;Bob/bob 3191:MainThread (queued=0, channels=2, handlers=2) [S]&gt;, &lt;Pound/* 3191:MainThread (queued=0, channels=5, handlers=5) [R]&gt;] {}&gt;
&lt;Registered[fred:registered] [&lt;Fred/fred 3191:MainThread (queued=0, channels=2, handlers=2) [S]&gt;, &lt;Pound/* 3191:MainThread (queued=0, channels=5, handlers=5) [R]&gt;] {}&gt;
&lt;Registered[*:registered] [&lt;Debugger/* 3191:MainThread (queued=0, channels=1, handlers=1) [S]&gt;, &lt;Pound/* 3191:MainThread (queued=0, channels=5, handlers=5) [R]&gt;] {}&gt;
&lt;Started[*:started] [&lt;Pound/* 3191:MainThread (queued=0, channels=5, handlers=5) [R]&gt;, None] {}&gt;
&lt;Bark[bob:bark] [] {}&gt;
&lt;Bark[fred:bark] [] {}&gt;
&lt;Error[*:exception] [&lt;type &#39;exceptions.NameError&#39;&gt;, NameError(&quot;global name &#39;name&#39; is not defined&quot;,), [&#39;  File &quot;/home/prologic/work/circuits/circuits/core/manager.py&quot;, line 459, in __handleEvent\n    retval = handler(*eargs, **ekwargs)\n&#39;, &#39;  File &quot;source/tutorial/009.py&quot;, line 22, in bark\n    print(&quot;Woof! I\&#39;m %s!&quot; % name)\n&#39;], &lt;bound method ?.bark of &lt;Bob/bob 3191:MainThread (queued=0, channels=2, handlers=2) [S]&gt;&gt;] {}&gt;
ERROR &lt;listener on (&#39;bark&#39;,) {target=&#39;bob&#39;, priority=0.0}&gt; (&lt;type &#39;exceptions.NameError&#39;&gt;): global name &#39;name&#39; is not defined
  File &quot;/home/prologic/work/circuits/circuits/core/manager.py&quot;, line 459, in __handleEvent
 retval = handler(*eargs, **ekwargs)
  File &quot;source/tutorial/009.py&quot;, line 22, in bark
    print(&quot;Woof! I&#39;m %s!&quot; % name)

&lt;Error[*:exception] [&lt;type &#39;exceptions.NameError&#39;&gt;, NameError(&quot;global name &#39;name&#39; is not defined&quot;,), [&#39;  File &quot;/home/prologic/work/circuits/circuits/core/manager.py&quot;, line 459, in __handleEvent\n    retval = handler(*eargs, **ekwargs)\n&#39;, &#39;  File &quot;source/tutorial/009.py&quot;, line 22, in bark\n    print(&quot;Woof! I\&#39;m %s!&quot; % name)\n&#39;], &lt;bound method ?.bark of &lt;Fred/fred 3191:MainThread (queued=0, channels=2, handlers=2) [S]&gt;&gt;] {}&gt;
ERROR &lt;listener on (&#39;bark&#39;,) {target=&#39;fred&#39;, priority=0.0}&gt; (&lt;type &#39;exceptions.NameError&#39;&gt;): global name &#39;name&#39; is not defined
  File &quot;/home/prologic/work/circuits/circuits/core/manager.py&quot;, line 459, in __handleEvent
    retval = handler(*eargs, **ekwargs)
  File &quot;source/tutorial/009.py&quot;, line 22, in bark
    print(&quot;Woof! I&#39;m %s!&quot; % name)

^C&lt;Signal[*:signal] [2, &lt;frame object at 0x808e8ec&gt;] {}&gt;
&lt;Stopped[*:stopped] [&lt;Pound/* 3191:MainThread (queued=0, channels=5, handlers=5) [S]&gt;] {}&gt;
&lt;Stopped[*:stopped] [&lt;Pound/* 3191:MainThread (queued=0, channels=5, handlers=5) [S]&gt;] {}&gt;
</pre></div>
</div>
<p>You&#8217;ll notice whereas there was no output before there is now a pretty
detailed output with the <tt class="docutils literal"><span class="pre">Debugger</span></tt> added to the application. Looking
through the output, we find that the application does indeed start
correctly, but when we fire our <tt class="docutils literal"><span class="pre">Bark</span></tt> Event it coughs up two exceptions,
one for each of our dogs (<tt class="docutils literal"><span class="pre">Bob</span></tt> and <tt class="docutils literal"><span class="pre">Fred</span></tt>).</p>
<p>From the error we can tell where the error is and roughly where to look in
the code.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You&#8217;ll notice many other events that are displayed in the above output.
These are all default events that circuits has builtin which your
application can respond to. Each builtin Event has a special meaning
with relation to the state of the application at that point.</p>
<p class="last">See: <a class="reference internal" href="../../api/circuits.core.events.html#module-circuits.core.events" title="circuits.core.events"><tt class="xref py py-mod docutils literal"><span class="pre">circuits.core.events</span></tt></a> for detailed documentation regarding
these events.</p>
</div>
<p>The correct code for the <tt class="docutils literal"><span class="pre">bark</span></tt> Event Handler should be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">bark</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Woof! I&#39;m </span><span class="si">%s</span><span class="s">!&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Running again with our correction results in the expected output:</p>
<div class="highlight-python"><div class="highlight"><pre>Woof! I&#39;m Bob!
Woof! I&#39;m Fred!
</pre></div>
</div>
<p>That&#8217;s it folks!</p>
<p>Hopefully this gives you a feel of what circuits is all about and an easy
tutorial on some of the basic concepts. As you&#8217;re no doubt itching to get
started on your next circuits project, here&#8217;s some recommended reading:</p>
<ul class="simple">
<li><tt class="xref doc docutils literal"><span class="pre">../faq</span></tt></li>
<li><tt class="xref doc docutils literal"><span class="pre">../api/index</span></tt></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">



  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tutorial</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#the-component">The Component</a></li>
<li><a class="reference internal" href="#event-handlers">Event Handlers</a></li>
<li><a class="reference internal" href="#registering-components">Registering Components</a></li>
<li><a class="reference internal" href="#complex-components">Complex Components</a></li>
<li><a class="reference internal" href="#component-inheritance">Component Inheritance</a></li>
<li><a class="reference internal" href="#component-channels">Component Channels</a></li>
<li><a class="reference internal" href="#event-objects">Event Objects</a></li>
<li><a class="reference internal" href="#the-debugger">The Debugger</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../index.html"
                        title="previous chapter">circuits Tutorials</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../telnet/index.html"
                        title="next chapter">Telnet Tutorial</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/tutorials/woof/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../telnet/index.html" title="Telnet Tutorial"
             >next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="circuits Tutorials"
             >previous</a> |</li>
        <li><a href="../../index.html">circuits 3.1.0.dev documentation</a> &raquo;</li>
          <li><a href="../index.html" >circuits Tutorials</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2004-2013, James Mills.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>