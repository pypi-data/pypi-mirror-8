<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>circuits.protocols.line module &mdash; circuits 3.1.0.dev documentation</title>
    
    <link rel="stylesheet" href="../_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.1.0.dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="circuits 3.1.0.dev documentation" href="../index.html" />
    <link rel="up" title="API Documentation" href="index.html" />
    <link rel="next" title="circuits.protocols.websocket module" href="circuits.protocols.websocket.html" />
    <link rel="prev" title="circuits.protocols.irc module" href="circuits.protocols.irc.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18486793-1']);
  _gaq.push(['_setDomainName', '.fabfile.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="circuits.protocols.websocket.html" title="circuits.protocols.websocket module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="circuits.protocols.irc.html" title="circuits.protocols.irc module"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">circuits 3.1.0.dev documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">API Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-circuits.protocols.line">
<span id="circuits-protocols-line-module"></span><h1>circuits.protocols.line module<a class="headerlink" href="#module-circuits.protocols.line" title="Permalink to this headline">¶</a></h1>
<p>Line Protocol</p>
<p>This module implements the basic Line protocol.</p>
<p>This module can be used in both server and client implementations.</p>
<dl class="function">
<dt id="circuits.protocols.line.splitLines">
<tt class="descclassname">circuits.protocols.line.</tt><tt class="descname">splitLines</tt><big>(</big><em>s</em>, <em>buffer</em><big>)</big> &rarr; lines, buffer<a class="headerlink" href="#circuits.protocols.line.splitLines" title="Permalink to this definition">¶</a></dt>
<dd><p>Append s to buffer and find any new lines of text in the
string splitting at the standard IRC delimiter CRLF. Any
new lines found, return them as a list and the remaining
buffer for further processing.</p>
</dd></dl>

<dl class="class">
<dt id="circuits.protocols.line.line">
<em class="property">class </em><tt class="descclassname">circuits.protocols.line.</tt><tt class="descname">line</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#circuits.protocols.line.line" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="circuits.core.events.html#circuits.core.events.Event" title="circuits.core.events.Event"><tt class="xref py py-class docutils literal"><span class="pre">circuits.core.events.Event</span></tt></a></p>
<p>line Event</p>
<p>An event is a message send to one or more channels.
It is eventually dispatched to all components
that have handlers for one of the channels and the event type.</p>
<p>All normal arguments and keyword arguments passed to the constructor
of an event are passed on to the handler. When declaring a
handler, its argument list must therefore match the arguments
used for creating the event.</p>
<p>Every event has a <a class="reference internal" href="#circuits.protocols.line.line.name" title="circuits.protocols.line.line.name"><tt class="xref py py-attr docutils literal"><span class="pre">name</span></tt></a> attribute that is used for matching
the event with the handlers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first last simple">
<li><strong>channels</strong> &#8211; <p>an optional attribute that may be set before firing
the event. If defined (usually as a class variable), the attribute
specifies the channels that the event should be delivered
to as a tuple. This overrides the default behavior
of sending the event to the firing component&#8217;s channel.</p>
<p>When an event is fired, the value in this attribute
is replaced for the instance with the channels that
the event is actually sent to. This information may be used
e.g. when the event is passed as a parameter to a handler.</p>
</li>
<li><strong>value</strong> &#8211; this is a <a class="reference internal" href="circuits.core.values.html#circuits.core.values.Value" title="circuits.core.values.Value"><tt class="xref py py-class docutils literal"><span class="pre">circuits.core.values.Value</span></tt></a>
object that holds the results returned by the handlers invoked
for the event.</li>
<li><strong>success</strong> &#8211; if this optional attribute is set to
<tt class="docutils literal"><span class="pre">True</span></tt>, an associated event <tt class="docutils literal"><span class="pre">success</span></tt> (original name
with &#8220;_success&#8221; appended) will automatically be fired when all
handlers for the event have been invoked successfully.</li>
<li><strong>success_channels</strong> &#8211; the success event is, by default, delivered
to same channels as the successfully dispatched event itself.
This may be overridden by specifying an alternative list of
destinations using this attribute.</li>
<li><strong>complete</strong> &#8211; if this optional attribute is set to
<tt class="docutils literal"><span class="pre">True</span></tt>, an associated event <tt class="docutils literal"><span class="pre">complete</span></tt> (original name
with &#8220;_complete&#8221; appended) will automatically be fired when all
handlers for the event and all events fired by these handlers
(recursively) have been invoked successfully.</li>
<li><strong>complete_channels</strong> &#8211; the complete event is, by default, delivered
to same channels as the initially dispatched event itself.
This may be overridden by specifying an alternative list of
destinations using this attribute.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="circuits.protocols.line.line.name">
<tt class="descname">name</tt><em class="property"> = 'line'</em><a class="headerlink" href="#circuits.protocols.line.line.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="circuits.protocols.line.Line">
<em class="property">class </em><tt class="descclassname">circuits.protocols.line.</tt><tt class="descname">Line</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#circuits.protocols.line.Line" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="circuits.core.components.html#circuits.core.components.BaseComponent" title="circuits.core.components.BaseComponent"><tt class="xref py py-class docutils literal"><span class="pre">circuits.core.components.BaseComponent</span></tt></a></p>
<p>Line Protocol</p>
<p>Implements the Line Protocol.</p>
<p>Incoming data is split into lines with a splitter function. For each
line of data processed a Line Event is created. Any unfinished lines
are appended into an internal buffer.</p>
<p>A custom line splitter function can be passed to customize how data
is split into lines. This function must accept two arguments, the data
to process and any left over data from a previous invocation of the
splitter function. The function must also return a tuple of two items,
a list of lines and any left over data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>splitter</strong> (<em>function</em>) &#8211; a line splitter function</td>
</tr>
</tbody>
</table>
<p>This Component operates in two modes. In normal operation it&#8217;s expected
to be used in conjunction with components that expose a Read Event on
a &#8220;read&#8221; channel with only one argument (data). Some builtin components
that expose such events are:
- circuits.net.sockets.TCPClient
- circuits.io.File</p>
<p>The second mode of operation works with circuits.net.sockets.Server
components such as TCPServer, UNIXServer, etc. It&#8217;s expected that
two arguments exist in the Read Event, sock and data. The following
two arguments can be passed to affect how unfinished data is stored
and retrieved for such components:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>getBuffer</strong> (<em>function</em>) &#8211; function to retrieve the buffer for a client sock</td>
</tr>
</tbody>
</table>
<p>This function must accept one argument (sock,) the client socket
whoose buffer is to be retrieved.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>updateBuffer</strong> (<em>function</em>) &#8211; function to update the buffer for a client sock</td>
</tr>
</tbody>
</table>
<p>This function must accept two arguments (sock, buffer,) the client
socket and the left over buffer to be updated.</p>
<dl class="docutils">
<dt>&#64;note: This Component must be used in conjunction with a Component that</dt>
<dd>exposes Read events on a &#8220;read&#8221; Channel.</dd>
</dl>
<p>initializes x; see x.__class__.__doc__ for signature</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">



  <h4>Previous topic</h4>
  <p class="topless"><a href="circuits.protocols.irc.html"
                        title="previous chapter">circuits.protocols.irc module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="circuits.protocols.websocket.html"
                        title="next chapter">circuits.protocols.websocket module</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/api/circuits.protocols.line.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="circuits.protocols.websocket.html" title="circuits.protocols.websocket module"
             >next</a> |</li>
        <li class="right" >
          <a href="circuits.protocols.irc.html" title="circuits.protocols.irc module"
             >previous</a> |</li>
        <li><a href="../index.html">circuits 3.1.0.dev documentation</a> &raquo;</li>
          <li><a href="index.html" >API Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2004-2013, James Mills.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>