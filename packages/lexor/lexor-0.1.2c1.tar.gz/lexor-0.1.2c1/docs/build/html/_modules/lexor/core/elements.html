

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>lexor.core.elements &mdash; lexor 0.1.2c0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="lexor 0.1.2c0 documentation" href="../../../index.html"/>
        <link rel="up" title="lexor" href="../../lexor.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../../index.html" class="fa fa-home"> lexor</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../lexor.html"> What is lexor?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../lexor.html#motivation">Motivation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html"> Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#pip-or-manual-installation">Pip or Manual Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#lexor-languages">Lexor Languages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../start.html"> Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../commands/index.html"> Commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../commands/install.html">install</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/index.html"> API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../api/lexor.html">lexor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/lexor.core.html">lexor.core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/lexor.core.node.html">lexor.core.node</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/lexor.core.elements.html">lexor.core.elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/lexor.command.html">lexor.command</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">lexor</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Module code</a> &raquo;</li>
      
          <li><a href="../../lexor.html">lexor</a> &raquo;</li>
      
    <li>lexor.core.elements</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <h1>Source code for lexor.core.elements</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module defines the elements of the document object model (DOM).</span>
<span class="sd">This implementation follows most of the recommendations of w3_.</span>

<span class="sd">.. _w3: http://www.w3.org/TR/2012/WD-dom-20121206/</span>

<span class="sd">Inheritance Tree</span>
<span class="sd">----------------</span>

<span class="sd">|   :class:`lexor.core.node.Node` (``__builtin__.object``)</span>
<span class="sd">|        :class:`.CharacterData`</span>
<span class="sd">|             :class:`.Text`</span>
<span class="sd">|             :class:`.ProcessingInstruction`</span>
<span class="sd">|             :class:`.Comment`</span>
<span class="sd">|             :class:`.CData`</span>
<span class="sd">|             :class:`.Entity`</span>
<span class="sd">|             :class:`.DocumentType`</span>
<span class="sd">|        :class:`.Element`</span>
<span class="sd">|             :class:`.RawText` (:class:`.Element`, :class:`.CharacterData`)</span>
<span class="sd">|             :class:`.Void`</span>
<span class="sd">|             :class:`.Document`</span>
<span class="sd">|                  :class:`.DocumentFragment`</span>

<span class="sd">----------------------------------------------------------------------</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">lexor.core</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="n">LC</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s">&#39;lexor.core&#39;</span><span class="p">]</span>
<span class="c"># pylint: disable=too-many-public-methods</span>
<span class="c"># pylint: disable=too-many-instance-attributes</span>


<div class="viewcode-block" id="CharacterData"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.CharacterData">[docs]</a><span class="k">class</span> <span class="nc">CharacterData</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A simple interface to deal with strings. &quot;&quot;&quot;</span>

    <span class="n">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;data&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="CharacterData.__init__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.CharacterData.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the data property to the value of `text` and set its</span>
<span class="sd">        name to ``&#39;#character-data&#39;``. &quot;&quot;&quot;</span>
        <span class="n">Node</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;#character-data&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">text</span>
</div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return or set the value of the node. This property is a</span>
<span class="sd">        wrapper for the ``data`` attribute. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>

    <span class="nd">@node_value.setter</span>
<div class="viewcode-block" id="CharacterData.node_value"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.CharacterData.node_value">[docs]</a>    <span class="k">def</span> <span class="nf">node_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setter function for data attribute. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">value</span>

</div></div>
<div class="viewcode-block" id="Text"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Text">[docs]</a><span class="k">class</span> <span class="nc">Text</span><span class="p">(</span><span class="n">CharacterData</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A node to represent a string object.&quot;&quot;&quot;</span>

    <span class="n">__slots__</span> <span class="o">=</span> <span class="p">()</span>

<div class="viewcode-block" id="Text.__init__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Text.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call its base constructor and set its name to ``&#39;#text&#39;``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">CharacterData</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;#text&#39;</span>
</div>
<div class="viewcode-block" id="Text.clone_node"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Text.clone_node">[docs]</a>    <span class="k">def</span> <span class="nf">clone_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a new ``Text`` node with the same data content. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="ProcessingInstruction"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.ProcessingInstruction">[docs]</a><span class="k">class</span> <span class="nc">ProcessingInstruction</span><span class="p">(</span><span class="n">CharacterData</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents a &quot;processing instruction&quot;, used to keep</span>
<span class="sd">    processor-specific information in the text of the document. &quot;&quot;&quot;</span>
    <span class="n">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;_target&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="ProcessingInstruction.__init__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.ProcessingInstruction.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a `Text` node with its `data` set to data. &quot;&quot;&quot;</span>
        <span class="n">CharacterData</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">target</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target</span> <span class="o">=</span> <span class="n">target</span>
</div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">target</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The target of this processing instruction.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target</span>

    <span class="nd">@target.setter</span>
<div class="viewcode-block" id="ProcessingInstruction.target"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.ProcessingInstruction.target">[docs]</a>    <span class="k">def</span> <span class="nf">target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_target</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setter function. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">new_target</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target</span> <span class="o">=</span> <span class="n">new_target</span>
</div>
<div class="viewcode-block" id="ProcessingInstruction.clone_node"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.ProcessingInstruction.clone_node">[docs]</a>    <span class="k">def</span> <span class="nf">clone_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a new PI with the same data content. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ProcessingInstruction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Comment"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Comment">[docs]</a><span class="k">class</span> <span class="nc">Comment</span><span class="p">(</span><span class="n">CharacterData</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A node to store comments. &quot;&quot;&quot;</span>

    <span class="n">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="Comment.__init__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Comment.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a comment node. &quot;&quot;&quot;</span>
        <span class="n">CharacterData</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;#comment&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="bp">None</span>
</div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">comment_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Type of comment. This property is meant to help with</span>
<span class="sd">        documents that support different styles of comments. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>

    <span class="nd">@comment_type.setter</span>
<div class="viewcode-block" id="Comment.comment_type"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Comment.comment_type">[docs]</a>    <span class="k">def</span> <span class="nf">comment_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">comment_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setter function for comment_type. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">comment_type</span>
</div>
<div class="viewcode-block" id="Comment.clone_node"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Comment.clone_node">[docs]</a>    <span class="k">def</span> <span class="nf">clone_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a new comment with the same data content. &quot;&quot;&quot;</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">Comment</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
        <span class="k">return</span> <span class="n">node</span>

</div></div>
<div class="viewcode-block" id="CData"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.CData">[docs]</a><span class="k">class</span> <span class="nc">CData</span><span class="p">(</span><span class="n">CharacterData</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Although this node has been deprecated from the DOM_, it</span>
<span class="sd">    seems that xml still uses it.</span>

<span class="sd">    .. _DOM: https://developer.mozilla.org/en-US/docs/Web/API/Node.nodeType</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__slots__</span> <span class="o">=</span> <span class="p">()</span>

<div class="viewcode-block" id="CData.__init__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.CData.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a CDATA node and set the node name to</span>
<span class="sd">        ``&#39;#cdata-section&#39;``.&quot;&quot;&quot;</span>
        <span class="n">CharacterData</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;#cdata-section&#39;</span>
</div>
<div class="viewcode-block" id="CData.clone_node"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.CData.clone_node">[docs]</a>    <span class="k">def</span> <span class="nf">clone_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a new ``CData`` node with the same data content.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="Entity"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Entity">[docs]</a><span class="k">class</span> <span class="nc">Entity</span><span class="p">(</span><span class="n">CharacterData</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;From merriam-webster definition_:</span>

<span class="sd">    - *Something that exists by itself*.</span>
<span class="sd">    - *Something that is separate from other things*.</span>

<span class="sd">    This node acts in the same way as a :class:`.Text` node but it</span>
<span class="sd">    has one main difference. The data it contains should contain no</span>
<span class="sd">    white spaces. This node should be reserved for special characters</span>
<span class="sd">    or words that have different meanings across different languages.</span>
<span class="sd">    For instance in HTML you have the ``&amp;amp;`` to represent ``&amp;``.</span>
<span class="sd">    In LaTeX you have to type ``\\$`` to represent ``$``. Using this</span>
<span class="sd">    node will help you handle these Entities hopefully more</span>
<span class="sd">    efficiently than simply finding and replacing them in a Text node.</span>

<span class="sd">    .. _definition: http://www.merriam-webster.com/dictionary/entity</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__slots__</span> <span class="o">=</span> <span class="p">()</span>

<div class="viewcode-block" id="Entity.__init__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Entity.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create an ``Entity`` node and set the node name to</span>
<span class="sd">        ``#entity``.&quot;&quot;&quot;</span>
        <span class="n">CharacterData</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;#entity&#39;</span>
</div>
<div class="viewcode-block" id="Entity.clone_node"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Entity.clone_node">[docs]</a>    <span class="k">def</span> <span class="nf">clone_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a new ``Entity`` with the same data content. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Entity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="DocumentType"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.DocumentType">[docs]</a><span class="k">class</span> <span class="nc">DocumentType</span><span class="p">(</span><span class="n">CharacterData</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A node to store the doctype declaration. This node will not</span>
<span class="sd">    follow the specifications at this point (May 30, 2013). It will</span>
<span class="sd">    simply recieve the string in between ``&lt;!doctype`` and ``&gt;``.</span>

<span class="sd">    Specs: http://www.w3.org/TR/2012/WD-dom-20121206/#documenttype</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__slots__</span> <span class="o">=</span> <span class="p">()</span>

<div class="viewcode-block" id="DocumentType.__init__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.DocumentType.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a ``DocumentType`` node and set its name to</span>
<span class="sd">        ``#doctype``. &quot;&quot;&quot;</span>
        <span class="n">CharacterData</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;#doctype&#39;</span>
        <span class="c"># The next properties should be obtained from data</span>
        <span class="c"># The specs do not mention type, instead they mention name.</span>
        <span class="c"># The node name here is #doctype so that it can be easily</span>
        <span class="c"># identified. The doctype &quot;name&quot; as they refer is called type.</span>
</div>
<div class="viewcode-block" id="DocumentType.clone_node"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.DocumentType.clone_node">[docs]</a>    <span class="k">def</span> <span class="nf">clone_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a new doctype with the same data content. &quot;&quot;&quot;</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">DocumentType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">node</span>

</div></div>
<div class="viewcode-block" id="Element"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element">[docs]</a><span class="k">class</span> <span class="nc">Element</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Node object configured to have child Nodes and attributes. &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Element.__init__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The parameter ``data`` should be a ``dict`` object. The</span>
<span class="sd">        element will use the keys and values to populate its</span>
<span class="sd">        attributes. You may modify the elements internal dictionary.</span>
<span class="sd">        However, this may unintentially overwrite the attributes</span>
<span class="sd">        defined by the ``__setitem__`` method. If you wish to add</span>
<span class="sd">        another attribute to the ``Element`` object use the</span>
<span class="sd">        convention of adding an underscore at the end of the</span>
<span class="sd">        attribute. i.e</span>

<span class="sd">        &gt;&gt;&gt; strong = Element(&#39;strong&#39;)</span>
<span class="sd">        &gt;&gt;&gt; strong.message_ = &#39;An internal message&#39;</span>
<span class="sd">        &gt;&gt;&gt; strong[&#39;message&#39;] = &#39;Attribute message&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Node</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_order</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_order</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">child</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Element.__call__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.__call__">[docs]</a>    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selector</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a :class:`lexor.core.selector.Selector` object. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">LC</span><span class="o">.</span><span class="n">Selector</span><span class="p">(</span><span class="n">selector</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Element.update_attributes"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.update_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">update_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Copies the attributes of the input node into the calling</span>
<span class="sd">        node. &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">node</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Element.__getitem__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.__getitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the `k`-th child of this node if `k` is an integer.</span>
<span class="sd">        Otherwise return the attribute of name with value of `k`.</span>

<span class="sd">        &gt;&gt;&gt; x.__getitem__(k) is x[k]</span>
<span class="sd">        True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="Element.get"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the attribute of name with value of `k`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Element.__setitem__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.__setitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Overloaded array operator. Appends or modifies an</span>
<span class="sd">        attribute. See its base method</span>
<span class="sd">        :meth:`lexor.core.node.Node.__setitem__` for documentation on</span>
<span class="sd">        when `val` is not string.</span>

<span class="sd">        &gt;&gt;&gt; x.__setitem__(attname) = &#39;att&#39; &lt;==&gt; x[attname] = &#39;att&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s">&#39;id&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">id_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Node</span><span class="o">.</span><span class="n">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Element.__delitem__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.__delitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove a child or attribute.</span>

<span class="sd">        &gt;&gt;&gt; x.__delitem__(k) &lt;==&gt; del x[k]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">__delitem__</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Node</span><span class="o">.</span><span class="n">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Element.__contains__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.__contains__">[docs]</a>    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return ``True`` if `obj` is a node and it is a child</span>
<span class="sd">        of this element or if `obj` is an attribute of this</span>
<span class="sd">        element. Return ``False`` otherwise.</span>

<span class="sd">        &gt;&gt;&gt; x.__contains__(obj) == obj in x</span>
<span class="sd">        True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Node</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">__contains__</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="o">.</span><span class="n">__contains__</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Element.contains"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.contains">[docs]</a>    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unlike ``__contains__``, this method returns ``True`` if</span>
<span class="sd">        `obj` is any of the desendents of the node. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">level</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">while</span> <span class="n">obj</span><span class="o">.</span><span class="n">level</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">parent</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="Element.__iter__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.__iter__">[docs]</a>    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Iterate over the element attributes names.</span>

<span class="sd">        &gt;&gt;&gt; for attribute_name in node: ...</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">k</span>
</div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="Element.attlen"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.attlen">[docs]</a>    <span class="k">def</span> <span class="nf">attlen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The number of attributes. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">)</span>
</div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="Element.attributes"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.attributes">[docs]</a>    <span class="k">def</span> <span class="nf">attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of the attribute names in the element. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">)</span>
</div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="Element.values"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.values">[docs]</a>    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of the attribute values in the Element. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Element.attribute"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.attribute">[docs]</a>    <span class="k">def</span> <span class="nf">attribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the name of the attribute at the specified index. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Element.attr"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.attr">[docs]</a>    <span class="k">def</span> <span class="nf">attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the value of the attribute at the specified index.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Element.items"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.items">[docs]</a>    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;return all the items. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Element.update"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dict_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;update with the values of `dict_`. useful when the element</span>
<span class="sd">        is empty and you created an Attr object. then just update the</span>
<span class="sd">        values.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">dict_</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setitem__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Element.rename"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.rename">[docs]</a>    <span class="k">def</span> <span class="nf">rename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old_name</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Renames an attribute. </span>

<span class="sd">        &gt;&gt;&gt; from lexor.core.elements import Element</span>
<span class="sd">        &gt;&gt;&gt; node = Element(&#39;div&#39;)</span>
<span class="sd">        &gt;&gt;&gt; node[&#39;att1&#39;] = &#39;val1&#39;</span>
<span class="sd">        &gt;&gt;&gt; node</span>
<span class="sd">        div[0x10a090750 att1=&quot;val1&quot;]:</span>
<span class="sd">        &gt;&gt;&gt; node.rename(&#39;att1&#39;, &#39;new-att-name&#39;)</span>
<span class="sd">        &gt;&gt;&gt; node</span>
<span class="sd">        div[0x10a090750 new-att-name=&quot;val1&quot;]:</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">old_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">old_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">old_name</span>  <span class="c"># Assume old_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">new_name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_name</span>
</div>
<div class="viewcode-block" id="Element.clone_node"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.clone_node">[docs]</a>    <span class="k">def</span> <span class="nf">clone_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a new node. When deep is True, it will clone also</span>
<span class="sd">        clone all the child nodes.&quot;&quot;&quot;</span>
        <span class="c"># May want to provide a node to which the clone will be</span>
        <span class="c"># appended to. If this is done then we will not have to</span>
        <span class="c"># traverse through all the elements of the node to adjust</span>
        <span class="c"># the level of the child nodes when we move the node around</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">node</span><span class="o">.</span><span class="n">update_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">deep</span> <span class="ow">is</span> <span class="bp">False</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">node</span>
        <span class="n">crt</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">crtcopy</span> <span class="o">=</span> <span class="n">node</span>
        <span class="n">direction</span> <span class="o">=</span> <span class="s">&#39;d&#39;</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">direction</span> <span class="ow">is</span> <span class="s">&#39;d&#39;</span><span class="p">:</span>
                <span class="n">crt</span> <span class="o">=</span> <span class="n">crt</span><span class="o">.</span><span class="n">child</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">clone</span> <span class="o">=</span> <span class="n">crt</span><span class="o">.</span><span class="n">clone_node</span><span class="p">()</span>
                <span class="n">crtcopy</span><span class="o">.</span><span class="n">append_child</span><span class="p">(</span><span class="n">clone</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">direction</span> <span class="ow">is</span> <span class="s">&#39;r&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">crt</span><span class="o">.</span><span class="n">next</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">direction</span> <span class="o">=</span> <span class="s">&#39;u&#39;</span>
                    <span class="k">continue</span>
                <span class="n">crt</span> <span class="o">=</span> <span class="n">crt</span><span class="o">.</span><span class="n">next</span>
                <span class="n">clone</span> <span class="o">=</span> <span class="n">crt</span><span class="o">.</span><span class="n">clone_node</span><span class="p">()</span>
                <span class="n">crtcopy</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">append_child</span><span class="p">(</span><span class="n">clone</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">direction</span> <span class="ow">is</span> <span class="s">&#39;u&#39;</span><span class="p">:</span>
                <span class="n">crtcopy</span> <span class="o">=</span> <span class="n">crtcopy</span><span class="o">.</span><span class="n">parent</span>
                <span class="k">if</span> <span class="n">normalize</span><span class="p">:</span>
                    <span class="n">crtcopy</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">crt</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="k">if</span> <span class="n">crt</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">next</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">crt</span> <span class="o">=</span> <span class="n">crt</span><span class="o">.</span><span class="n">parent</span>
                    <span class="k">continue</span>
                <span class="n">crt</span> <span class="o">=</span> <span class="n">crt</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">next</span>
                <span class="n">clone</span> <span class="o">=</span> <span class="n">crt</span><span class="o">.</span><span class="n">clone_node</span><span class="p">()</span>
                <span class="n">crtcopy</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">append_child</span><span class="p">(</span><span class="n">clone</span><span class="p">)</span>
            <span class="n">crtcopy</span> <span class="o">=</span> <span class="n">clone</span>
            <span class="k">if</span> <span class="n">crt</span><span class="o">.</span><span class="n">child</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="s">&#39;d&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="s">&#39;r&#39;</span>
        <span class="k">return</span> <span class="n">node</span>
</div>
<div class="viewcode-block" id="Element.get_elements_by_class_name"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.get_elements_by_class_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_elements_by_class_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">classname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of all child elements which have all of the</span>
<span class="sd">        given class names. &quot;&quot;&quot;</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">nodes</span>
        <span class="n">patterns</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">i</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">classname</span><span class="o">.</span><span class="n">split</span><span class="p">()])</span>
        <span class="n">crt</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">direction</span> <span class="o">=</span> <span class="s">&#39;d&#39;</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">direction</span> <span class="ow">is</span> <span class="s">&#39;d&#39;</span><span class="p">:</span>
                <span class="n">crt</span> <span class="o">=</span> <span class="n">crt</span><span class="o">.</span><span class="n">child</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">direction</span> <span class="ow">is</span> <span class="s">&#39;r&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">crt</span><span class="o">.</span><span class="n">next</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">direction</span> <span class="o">=</span> <span class="s">&#39;u&#39;</span>
                    <span class="k">continue</span>
                <span class="n">crt</span> <span class="o">=</span> <span class="n">crt</span><span class="o">.</span><span class="n">next</span>
            <span class="k">elif</span> <span class="n">direction</span> <span class="ow">is</span> <span class="s">&#39;u&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">crt</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="k">if</span> <span class="n">crt</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">next</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">crt</span> <span class="o">=</span> <span class="n">crt</span><span class="o">.</span><span class="n">parent</span>
                    <span class="k">continue</span>
                <span class="n">crt</span> <span class="o">=</span> <span class="n">crt</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">next</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">crt</span><span class="p">,</span> <span class="n">Element</span><span class="p">)</span> <span class="ow">and</span> <span class="s">&#39;class&#39;</span> <span class="ow">in</span> <span class="n">crt</span><span class="p">:</span>
                <span class="n">crtclass</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">crt</span><span class="p">[</span><span class="s">&#39;class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
                <span class="k">if</span> <span class="n">patterns</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">crtclass</span><span class="p">)):</span>
                    <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">crt</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">crt</span><span class="o">.</span><span class="n">child</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="s">&#39;d&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="s">&#39;r&#39;</span>
        <span class="k">return</span> <span class="n">nodes</span>
</div>
<div class="viewcode-block" id="Element.children"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Element.children">[docs]</a>    <span class="k">def</span> <span class="nf">children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">keywords</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the elements children by providing a list of nodes or</span>
<span class="sd">        a string. If using a string then you may provide any of the</span>
<span class="sd">        following keywords to dictate how to parse and convert:</span>

<span class="sd">        - parser_style: ``&#39;_&#39;``</span>
<span class="sd">        - parser_lang: ``&#39;html``</span>
<span class="sd">        - parser_defaults: ``None``,</span>
<span class="sd">        - convert_style: ``&#39;_&#39;``,</span>
<span class="sd">        - convert_from: ``None``,</span>
<span class="sd">        - convert_to: ``&#39;html&#39;``,</span>
<span class="sd">        - convert_defaults: ``None``,</span>
<span class="sd">        - convert: ``&#39;false&#39;``</span>

<span class="sd">        If no children are provided then it returns a string of the children</span>
<span class="sd">        written in plain html. To change this behavior provide the</span>
<span class="sd">        following keywords:</span>

<span class="sd">        - writer_style: ``&#39;plain&#39;``</span>
<span class="sd">        - writer_lang: ``&#39;html``</span>

<span class="sd">        .. important::</span>

<span class="sd">            This requires the installation of lexor styles.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">children</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">lang</span> <span class="o">=</span> <span class="n">keywords</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;writer_lang&#39;</span><span class="p">,</span> <span class="s">&#39;html&#39;</span><span class="p">)</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">keywords</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;writer_style&#39;</span><span class="p">,</span> <span class="s">&#39;plain&#39;</span><span class="p">)</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">LC</span><span class="o">.</span><span class="n">Writer</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">style</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">defaults</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">defaults</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                    <span class="n">writer</span><span class="o">.</span><span class="n">defaults</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expandvars</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">keywords</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">defaults</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expandvars</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
            <span class="n">result</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="p">:</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">writer</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">children</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">info</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s">&#39;parser_style&#39;</span><span class="p">:</span> <span class="s">&#39;_&#39;</span><span class="p">,</span>
                <span class="s">&#39;parser_lang&#39;</span><span class="p">:</span> <span class="s">&#39;html&#39;</span><span class="p">,</span>
                <span class="s">&#39;parser_defaults&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;convert_style&#39;</span><span class="p">:</span> <span class="s">&#39;_&#39;</span><span class="p">,</span>
                <span class="s">&#39;convert_from&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;convert_to&#39;</span><span class="p">:</span> <span class="s">&#39;html&#39;</span><span class="p">,</span>
                <span class="s">&#39;convert_defaults&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                <span class="s">&#39;convert&#39;</span><span class="p">:</span> <span class="s">&#39;false&#39;</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">:</span>
                <span class="n">info</span><span class="p">[</span><span class="n">att</span><span class="p">]</span> <span class="o">=</span> <span class="n">keywords</span><span class="p">[</span><span class="n">att</span><span class="p">]</span>
            <span class="n">parser</span> <span class="o">=</span> <span class="n">LC</span><span class="o">.</span><span class="n">Parser</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s">&#39;parser_lang&#39;</span><span class="p">],</span>
                               <span class="n">info</span><span class="p">[</span><span class="s">&#39;parser_style&#39;</span><span class="p">],</span>
                               <span class="n">info</span><span class="p">[</span><span class="s">&#39;parser_defaults&#39;</span><span class="p">])</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">children</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">info</span><span class="p">[</span><span class="s">&#39;convert&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;true&#39;</span> <span class="ow">and</span> <span class="n">info</span><span class="p">[</span><span class="s">&#39;convert_to&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">info</span><span class="p">[</span><span class="s">&#39;convert_from&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">info</span><span class="p">[</span><span class="s">&#39;convert_from&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s">&#39;parser_lang&#39;</span><span class="p">]</span>
                <span class="n">converter</span> <span class="o">=</span> <span class="n">LC</span><span class="o">.</span><span class="n">Converter</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s">&#39;convert_from&#39;</span><span class="p">],</span>
                                         <span class="n">info</span><span class="p">[</span><span class="s">&#39;convert_to&#39;</span><span class="p">],</span>
                                         <span class="n">info</span><span class="p">[</span><span class="s">&#39;convert_style&#39;</span><span class="p">],</span>
                                         <span class="n">info</span><span class="p">[</span><span class="s">&#39;convert_defaults&#39;</span><span class="p">])</span>
                <span class="n">converter</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">doc</span><span class="p">)</span>
                <span class="n">children</span> <span class="o">=</span> <span class="n">converter</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="n">converter</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">children</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">doc</span>
            <span class="n">children</span><span class="o">.</span><span class="n">temporary</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_children</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extend_children</span><span class="p">(</span><span class="n">children</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="RawText"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.RawText">[docs]</a><span class="k">class</span> <span class="nc">RawText</span><span class="p">(</span><span class="n">Element</span><span class="p">,</span> <span class="n">CharacterData</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A few elements do not have children, instead they have data.</span>
<span class="sd">    Such elements exist in HTML: ``script``, ``title`` among</span>
<span class="sd">    others.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="RawText.__init__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.RawText.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">att</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;You may provide `att` as a ``dict`` object. &quot;&quot;&quot;</span>
        <span class="n">CharacterData</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">Element</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">att</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">child</span> <span class="o">=</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="RawText.clone_node"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.RawText.clone_node">[docs]</a>    <span class="k">def</span> <span class="nf">clone_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a new ``RawText`` element&quot;&quot;&quot;</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">RawText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">node</span><span class="o">.</span><span class="n">update_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">deep</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">node</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="k">return</span> <span class="n">node</span>

</div></div>
<div class="viewcode-block" id="Void"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Void">[docs]</a><span class="k">class</span> <span class="nc">Void</span><span class="p">(</span><span class="n">Element</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An element with no children. &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Void.__init__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Void.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">att</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;You may provide `att` as a `dict` object. &quot;&quot;&quot;</span>
        <span class="n">Element</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">att</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">child</span> <span class="o">=</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="Void.clone_node"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Void.clone_node">[docs]</a>    <span class="k">def</span> <span class="nf">clone_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a new ``Void`` element. &quot;&quot;&quot;</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">Void</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">node</span><span class="o">.</span><span class="n">update_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">node</span>

</div></div>
<div class="viewcode-block" id="Document"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Document">[docs]</a><span class="k">class</span> <span class="nc">Document</span><span class="p">(</span><span class="n">Element</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Contains information about the document that it holds. &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Document.__init__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Document.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s">&#39;xml&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s">&#39;default&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a new document object and sets its name to</span>
<span class="sd">        ``#document``.&quot;&quot;&quot;</span>
        <span class="n">Element</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;#document&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">owner</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lang</span> <span class="o">=</span> <span class="n">lang</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">style</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uri_</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defaults</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">meta</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temporary</span> <span class="o">=</span> <span class="bp">True</span>
</div>
<div class="viewcode-block" id="Document.clone_node"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Document.clone_node">[docs]</a>    <span class="k">def</span> <span class="nf">clone_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a new Document. Note: it does not copy</span>
<span class="sd">        the default values. &quot;&quot;&quot;</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">)</span>
        <span class="n">node</span><span class="o">.</span><span class="n">update_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">node</span><span class="o">.</span><span class="n">uri_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uri_</span>
        <span class="n">node</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">meta</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">deep</span> <span class="ow">is</span> <span class="bp">False</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">node</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="n">Element</span><span class="o">.</span><span class="n">clone_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deep</span><span class="p">,</span> <span class="n">normalize</span><span class="p">)</span>
        <span class="n">clone</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>  <span class="c"># not a document</span>
        <span class="n">node</span><span class="o">.</span><span class="n">extend_children</span><span class="p">(</span><span class="n">clone</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">node</span>
</div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">language</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The current document&#39;s language. This property is used by</span>
<span class="sd">        the writer to determine how to write the document.</span>

<span class="sd">        This property is a wrapper for the ``lang`` attribute. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang</span>

    <span class="nd">@language.setter</span>
<div class="viewcode-block" id="Document.language"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Document.language">[docs]</a>    <span class="k">def</span> <span class="nf">language</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setter function for language. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lang</span> <span class="o">=</span> <span class="n">val</span>
</div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">writing_style</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The current document&#39;s style. This property is used by</span>
<span class="sd">        the writer to determine how to write the document.</span>

<span class="sd">        This property is a wrapper for the ``style`` attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span>

    <span class="nd">@writing_style.setter</span>
<div class="viewcode-block" id="Document.writing_style"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Document.writing_style">[docs]</a>    <span class="k">def</span> <span class="nf">writing_style</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Docstring for setter. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">val</span>
</div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="Document.uri"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Document.uri">[docs]</a>    <span class="k">def</span> <span class="nf">uri</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The Uniform Resource Identifier. This property may become</span>
<span class="sd">        useful if the document represents a file. This property</span>
<span class="sd">        should be set by the a :class:`~lexor.core.parser.Parser`</span>
<span class="sd">        object telling us the location of the file that it parsed</span>
<span class="sd">        into the Document object. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">uri_</span>
</div>
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Document.create_element"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Document.create_element">[docs]</a>    <span class="k">def</span> <span class="nf">create_element</span><span class="p">(</span><span class="n">tagname</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Utility function to avoid having to import</span>
<span class="sd">        ``lexor.core.elements`` module. Returns an element object. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Element</span><span class="p">(</span><span class="n">tagname</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Document.get_element_by_id"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.Document.get_element_by_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_element_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the first element, in tree order, within the</span>
<span class="sd">        document whose ID is element_id, or None if there is none. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element_id</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="DocumentFragment"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.DocumentFragment">[docs]</a><span class="k">class</span> <span class="nc">DocumentFragment</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Takes in an element and &quot;steals&quot; its children. This element</span>
<span class="sd">    should only be used as a temporary container. Note that the</span>
<span class="sd">    ``__str__`` method may not yield the expected results since all</span>
<span class="sd">    the function will do is use the ``__str__`` method in each of its</span>
<span class="sd">    children. First assign this object to an actual Document. &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s">&#39;xml&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s">&#39;default&#39;</span><span class="p">):</span>
        <span class="n">Document</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lang</span><span class="p">,</span> <span class="n">style</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;#document-fragment&#39;</span>

<div class="viewcode-block" id="DocumentFragment.append_child"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.DocumentFragment.append_child">[docs]</a>    <span class="k">def</span> <span class="nf">append_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_child</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds the node new_child to the end of the list of children</span>
<span class="sd">        of this node. The children contained in a</span>
<span class="sd">        ``DocumentFragment`` only have a parent (the</span>
<span class="sd">        ``DocumentFragment``). As opposed as</span>
<span class="sd">        :meth:`lexor.core.node.Node.append_child` which also takes</span>
<span class="sd">        care of the ``prev`` and ``next`` attributes. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_child</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">new_child</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">new_child</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_child</span><span class="p">,</span> <span class="n">Node</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;Only Nodes can be appended.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_child</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">new_child</span><span class="o">.</span><span class="n">parent</span><span class="p">[</span><span class="n">new_child</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_child</span><span class="p">)</span>
        <span class="n">new_child</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">new_child</span><span class="o">.</span><span class="n">owner</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">return</span> <span class="n">new_child</span>
</div>
<div class="viewcode-block" id="DocumentFragment.__repr__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.DocumentFragment.__repr__">[docs]</a>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &gt;&gt;&gt; x.__repr__() &lt;==&gt; repr(x)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">repr</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="DocumentFragment.__str__"><a class="viewcode-back" href="../../../api/lexor.core.elements.html#lexor.core.elements.DocumentFragment.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &gt;&gt;&gt; x.__str__() &lt;==&gt; str(x)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="p">])</span></div></div>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Manuel Lopez.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.1.2c0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>