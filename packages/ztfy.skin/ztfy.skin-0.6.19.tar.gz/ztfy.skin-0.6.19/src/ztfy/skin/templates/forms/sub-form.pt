<div tal:replace="structure provider:form_prefix" />
<fieldset class="inner" tal:define="legend view/legend | nothing;
									visible python:getattr(view,'visible',True);
									switchable python:getattr(view,'switchable',False);
									cssClass python:getattr(view, 'cssClass', '');
									klass python:'switched' if not visible else '';"
						tal:omit-tag="not:legend"
						tal:attributes="class string:${cssClass} ${klass};
										data-ztfy-submit-callback view/submitCallback | nothing">
	<legend tal:condition="legend">
		<img tal:define="src python:'/--static--/ztfy.skin/img/%s.png' % ('mi' if visible else 'pl');"
			 tal:condition="switchable "
			 tal:attributes="src src;
							 onclick string:$$.ZTFY.dialog.switchGroup(this, 'subform_${view/prefix}');" />
		<tal:var tal:content="legend" i18n:translate="" />
	</legend>
	<div tal:omit-tag="not:switchable"
		 tal:attributes="id string:group_subform_${view/prefix};
						 class python:'visible' if visible else 'hidden';">
		<tal:var define="help view/help | nothing" condition="help">
			<div class="help" tal:define="i18n_help help/i18n:translate" tal:content="structure i18n_help/html:text" />
		</tal:var>
		<div class="widgets-prefix" tal:define="prefix provider:widgets_prefix"
									tal:condition="prefix"
									tal:content="structure prefix" />
		<div class="widgets">
			<tal:loop repeat="widget view/widgets/values">
				<div id="" class="row"
					 tal:condition="python:widget.mode != 'hidden'"
					 tal:attributes="id string:${widget/id}-row;
									 class string:row ${widget/mode};">
					<div class="label" tal:condition="widget/label">
						<label tal:attributes="for widget/id">
							<span i18n:translate="" tal:content="widget/label">label</span>
							<span class="required"  tal:condition="python:widget.required and (view.mode != 'display')">*</span>
						</label>
						<a tal:define="description widget/field/description"
						   tal:condition="description"
						   class="hint" tal:attributes="id string:tip_${widget/name};
														title description;"><span class="icon icon-info-sign"></span></a>
					</div>
					<div class="error" tal:define="error widget/error" tal:omit-tag="not:error">
						<span tal:condition="error" tal:replace="structure error/render">error</span>
						<div class="widget" tal:content="structure widget/render"
							 tal:attributes="data-ztfy-submit-callback python:view.getWidgetCallback(widget.field.getName());">
							<input type="text" size="24" value="" />
						</div>
					</div>
				</div>
				<input type="hidden" value=""
					   tal:condition="python:widget.mode == 'hidden'"
					   tal:replace="structure widget/render" />
			</tal:loop>
		</div>
		<div class="widgets-suffix" tal:define="suffix provider:widgets_suffix"
									tal:condition="suffix"
									tal:content="structure suffix" />
	</div>
</fieldset>
<div tal:replace="structure provider:form_suffix" />
