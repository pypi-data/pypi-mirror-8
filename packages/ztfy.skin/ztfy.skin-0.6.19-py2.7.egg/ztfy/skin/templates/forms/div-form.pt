<div tal:replace="structure provider:form_prefix" />
<div class="form" tal:attributes="id string:form_${view/id};
								  class view/cssClass | default;
								  data-ztfy-inputs-hints python:'true' if view.display_hints_on_widgets else 'false';"
				  i18n:domain="ztfy.skin">
	<fieldset tal:attributes="class view/fieldset_class | nothing">
		<legend tal:condition="view/legend | nothing" tal:content="view/legend" i18n:translate="" />
		<div class="required-info" tal:condition="python:(view.mode != 'display') and view.widgets">
			<span class="required">*</span> &ndash; <span i18n:translate="">required</span>
		</div>
		<tal:var define="help view/help | nothing" condition="help">
			<div class="help" tal:define="i18n_help help/i18n:translate" tal:content="structure i18n_help/html:text" />
		</tal:var>
		<div class="status"
			 tal:define="status view/status; errors view/errors;"
			 tal:condition="status"
			 tal:attributes="class view/status_class">
			<div class="summary" tal:define="status status/text:translate" tal:content="structure status/html:text">Form status summary</div>
			<ul class="errors"
				tal:condition="errors">
				<li tal:repeat="error errors" i18n:translate="">
					<tal:if condition="error/widget">
						<span tal:replace="python:error.widget.label" i18n:name="error_widget" />:
					</tal:if>
					<span tal:replace="structure error/render" i18n:name="error_type">Error Type</span>
				</li>
			</ul>
		</div>
		<form action="." method="post" enctype="multipart/form-data"
			  class="edit-form"
			  tal:attributes="method view/method;
							  enctype view/enctype;
							  acceptCharset view/acceptCharset;
							  accept view/accept;
							  action view/action;
							  autocomplete view/autocomplete | default;
							  name view/name;
							  id view/id;
							  data-ztfy-disable-submit-flag view/disable_submit_flag | default;">
			<div class="viewspace"
				 tal:attributes="class string:viewspace ${view/mode};">
				<h2 tal:condition="view/label|nothing"
					tal:content="view/label">Form Label</h2>
				<div class="widgets-prefix" tal:define="prefix provider:widgets_prefix"
											tal:condition="prefix"
											tal:content="structure prefix" />
				<div class="widgets">
					<tal:loop repeat="group view/groups">
						<fieldset tal:define="legend group/legend;
											  klass python:'switched' if not group.visible else '';"
								  tal:attributes="id string:group_${group/id};
												  class string:${group/cssClass} ${klass};"
								  tal:omit-tag="not:legend">
							<legend tal:condition="legend">
								<img tal:define="src python:'/--static--/ztfy.skin/img/%s.png' % ('mi' if group.visible else 'pl')"
									 tal:condition="group/switch"
									 tal:attributes="src src;
													 onclick string:$$.ZTFY.dialog.switchGroup(this, '${group/id}');" />
								<tal:var define="checkbox_widget nocall:group/checkbox_widget">
									<tal:if condition="group/checkbox_switch">
										<input type="hidden" value="1"
											   tal:attributes="name string:${checkbox_widget/name}-empty-marker" />
										<input type="checkbox" value="selected"
											   tal:attributes="name string:${checkbox_widget/name}:list;
															   id string:${checkbox_widget/id}-0;
															   checked python:bool(checkbox_widget.value) or group.visible;
															   onclick string:$$.ZTFY.dialog.switchGroup(this, '${group/id}');" />
									</tal:if>
									<label tal:omit-tag="not:group/checkbox_switch"
										   tal:define="widget_id checkbox_widget/id | nothing"
										   tal:attributes="for string:${widget_id}-0">
										<span tal:content="legend" i18n:translate="" />
									</label>
								</tal:var>
							</legend>
							<div tal:omit-tag="not:group/switchable"
								 tal:attributes="id string:group_${group/id};
												 class python:'visible' if group.visible else 'hidden';">
								<tal:var define="help group/help" condition="help">
									<div class="help" tal:define="i18n_help help/i18n:translate" tal:content="structure i18n_help/html:text" />
								</tal:var>
								<tal:loop repeat="widget group/visible_widgets">
									<div id="" class="row"
										 tal:condition="python:widget.mode != 'hidden'"
										 tal:attributes="id string:${widget/id}-row;
														 class string:row ${widget/mode};">
										<div class="label" tal:condition="widget/label">
											<label tal:attributes="for widget/id">
												<span i18n:translate="" tal:content="widget/label">label</span>
												<span class="required" tal:condition="python:widget.required and (widget.mode != 'display')">*</span>
											</label>
											<a tal:define="description widget/field/description"
											   tal:condition="description"
											   class="hint" tal:attributes="id string:tip_${widget/name};
																			title description;"><span class="icon icon-info-sign"></span></a>
										</div>
										<div class="error" tal:define="error widget/error" tal:omit-tag="not:error">
											<span tal:condition="error" tal:replace="structure error/render">error</span>
											<div class="widget" tal:content="structure widget/render"
												 tal:attributes="data-ztfy-submit-callback python:view.getWidgetCallback(widget.field.getName())">
												<input type="text" size="24" value="" />
											</div>
										</div>
									</div>
									<input type="hidden" value=""
										   tal:condition="python:widget.mode == 'hidden'"
										   tal:replace="structure widget/render" />
								</tal:loop>
							</div>
						</fieldset>
					</tal:loop>
				</div>
				<div class="widgets-suffix" tal:define="suffix provider:widgets_suffix"
											tal:condition="suffix"
											tal:content="structure suffix" />
				<div class="subforms"
					 tal:condition="view/subforms"
					 tal:attributes="class view/subforms_class | default">
					<fieldset tal:define="title view/subforms_legend | nothing"
							  tal:omit-tag="not:title">
						<legend tal:condition="title" tal:content="title" i18n:translate="" />
						<tal:loop repeat="form view/subforms">
							<tal:var replace="structure form/render" />
						</tal:loop>
					</fieldset>
				</div>
				<div id="tabforms" class="tabforms"
					 tal:condition="view/tabforms"
					 tal:attributes="class view/tabforms_class | default">
					<ul class="tabs">
						<li tal:repeat="form view/tabforms"
							tal:attributes="class python:form.widgets.errors and 'error' or ''">
							<a href="#" tal:content="form/tabLabel" i18n:translate="" />
						</li>
					</ul>
					<div class="panes">
						<div class="pane" tal:repeat="form view/tabforms"
							 tal:attributes="id string:tabform_${repeat/form/number}"
							 tal:content="structure form/render" />
					</div>
				</div>
			</div>
			<div class="actions">
				<iframe name="progress" class="progress" frameborder="0" src="/@@progress.html"></iframe>
				<div class="buttons">
					<input tal:repeat="action view/actions/values"
						   tal:replace="structure action/render" />
				</div>
			</div>
		</form>
	</fieldset>
</div>
<div tal:replace="structure provider:form_suffix" />
