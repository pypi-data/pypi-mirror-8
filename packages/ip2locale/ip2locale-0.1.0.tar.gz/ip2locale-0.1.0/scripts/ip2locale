#!/usr/bin/env python

import sys
from ip2locale.scripts import get_ip2locale
from ip2locale.utils import is_ip

def usage():
    sys.stderr.write('%s ip\n' % sys.argv[0])
    sys.exit(1)

def _out(ret):
    for each in ret:
        print "-------------------------------------------------------------"
        print "Data source: ", each['source']
        print "Country: ", each['country']
        print "Area: ", each['area']
        print "Region: ", each['region']
        print "City: ", each['city']
        print "ISP: ", each['isp']
    print "-------------------------------------------------------------"

if __name__ == '__main__':
    if len(sys.argv) != 2:
        usage()
    ip = sys.argv[1]
    if is_ip(ip):
        _out(get_ip2locale(ip))
    else:
        sys.stderr.write('%s is not a valid ip\n' % ip)
        sys.exit(2)
