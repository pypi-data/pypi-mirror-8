<metal:macro define-macro="page"
  tal:define="
  title title | python:view.translate(view.title) + ': ' + view.translate('list_something', default='list');
  "
  i18n:domain="dm_zope_reseller"
  >
<metal:page use-macro="context/@@standard_macros/macros/page">
    <tal:block metal:fill-slot="main" define="objs view/list">
      <tal:condition condition="not:objs" i18n:translate="">This list is empty</tal:condition>
      <tal:condition condition="objs">
	<div class="listform">
	  <metal:form use-macro="context/@@ploneform-macros/form">
	      <table metal:fill-slot="formtop">
		<thead>
		  <tr>
		    <th tal:repeat="widget view/header_widgets">
		      <span tal:condition="widget/title|nothing"
			    tal:attributes="title widget/description|nothing"
			    tal:content="widget/title" />
	            </th>
		  </tr>
		</thead>
		<tbody>
		  <tr tal:repeat="obj_form obj_forms">
		    <td tal:repeat="widget obj_form/widgets/values"
			tal:attributes="class string:field ${widget/field/__name__}">
		      <div tal:condition="widget/error" tal:content="structure widget/error/render" />
		      <div class="widget">
			<tal:div replace="structure widget/render"/>
		      </div>
		    </td>
		    <td tal:repeat="action obj_form/actions/values" class="action">
		      <tal:div replace="structure action/render"/>
		    </td>
		  </tr>
		</tbody>
	      </table>
	  </metal:form>
	</div>
      </tal:condition>
    </tal:block>
</metal:page>  
</metal:macro>  

