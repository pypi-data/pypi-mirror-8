 <html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="plone.z3cform"
      tal:omit-tag=""
      tal:condition="view/subforms">


  <div metal:use-macro="context/@@ploneform-macros/form">
    <metal:fill-slot fill-slot="formtop">

    <tal:batch tal:replace="structure view/navigation" />
    <tal:errors repeat="ev view/widgets/errors">
      <tal:condition condition="not: ev/widget" tal:replace="structure ev/render" />
    </tal:errors>
    <table class="listing" tal:define="rows view/subforms">
        <thead tal:define="row1 python:len(rows) and rows[0] or None"
               tal:condition="python:row1 is not None">
          <tr>
	    <!-- state cell -->
	    <th></th>
	    <!-- widget cells -->
            <th tal:repeat="widget row1/widgets/values">

              <span tal:content="widget/field/title"
                    tal:attributes="title widget/field/description;
                                    class python: 'header-' + widget.field.__name__">
                Field
              </span>

              <span class="fieldRequired"
                    tal:condition="python:widget.required and widget.mode == 'input'">
                *
              </span>
            </th>
	    <!-- action cell -->
	    <th class="actioncell"></th>
          </tr>
        </thead>
        <tbody>
          <tal:block repeat="row view/subforms">
            <tr tal:content="structure row/render"
                tal:attributes="class python:(repeat['row'].odd() and 'even' or 'odd') + ' ' + row.class_">
            </tr>
          </tal:block>
        </tbody>
    </table>
    <tal:batch tal:replace="structure view/navigation" />
    <div class="summary" tal:condition="view/bottom|nothing" tal:content="structure view/bottom" />
    </metal:fill-slot>
  </div>
</html>
