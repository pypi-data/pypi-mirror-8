define(["cilantro","marionette","../sample"],function(e,t,n){var r=e.ui.WorkspaceWorkflow.extend({template:"varify/workflows/workspace",ui:{sampleVariantSetHelp:"[data-target=sample-variant-set-help]",createVariantSetButton:"[data-target=create-variant-set]"},events:{"click @ui.createVariantSetButton":"onCreateVariantSetClicked"},regions:{queries:"[data-target=query-region]",publicQueries:"[data-target=public-query-region]",sampleDetail:"[data-target=sample-details-region]",sampleVariantSets:"[data-target=sample-variant-sets-region]"},regionViews:{queries:e.ui.QueryList,publicQueries:e.ui.QueryList,sampleDetail:n.SampleDetail,sampleVariantSets:n.SampleVariantSets},initialize:function(t){e.ui.WorkspaceWorkflow.prototype.initialize.call(this,t);if(!(this.data.samples=this.options.samples))throw new Error("samples collection required")},onCreateVariantSetClicked:function(){e.dialogs.variantSet.open(this.sample)},onRender:function(){e.ui.WorkspaceWorkflow.prototype.onRender.call(this),this.ui.sampleVariantSetHelp.tooltip({title:"A variant set is a fixed set of sample variants that can be annotated and augmented at the creator's discretion."}),this.listenTo(this.data.samples,"select",this.onSampleSelected)},onSampleSelected:function(e){this.sample=e,this.renderSampleDetail(),this.renderSampleVariantSets()},renderSampleDetail:function(){var e=new this.regionViews.sampleDetail({model:this.sample});this.sampleDetail.show(e)},renderSampleVariantSets:function(){if(!this.sample)return;var e=new this.regionViews.sampleVariantSets({collection:this.sample.variantSets});this.sample.variantSets.fetch({reset:!0}),this.sampleVariantSets.show(e)}});return{WorkspaceWorkflow:r}})