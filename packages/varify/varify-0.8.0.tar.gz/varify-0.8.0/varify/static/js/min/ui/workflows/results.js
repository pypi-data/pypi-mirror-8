define(["jquery","underscore","cilantro","cilantro/ui/numbers","../tables","../../utils"],function(e,t,n,r,i,s){var o=n.ui.ResultCount.extend({initialize:function(){this.data={};if(!(this.data.context=this.options.context))throw new Error("context model required");if(!(this.data.samples=this.options.samples))throw new Error("samples collection required");this.listenTo(this.data.samples,"sync",this.renderLabel)},renderCount:function(e,t){r.renderCount(this.ui.count,t),this.renderLabel()},renderLabel:function(){var e=s.samplesInContext(this.data.context,this.data.samples);e.length===0?(this.ui.label.text("records in unknown sample"),this.ui.label.attr("title","Unknown Sample"),this.ui.label.tooltip("destroy")):e.length===1?(this.ui.label.text("records in "+e[0]),this.ui.label.attr("title",e[0]),this.ui.label.tooltip({animation:!1,html:!0,placement:"bottom",container:"body"})):(this.ui.label.text("records in various samples"),this.ui.label.attr("title","Various Samples"),this.ui.label.tooltip("destroy"))}}),u=n.ui.ResultsWorkflow.extend({template:"varify/workflows/results",events:function(){return t.extend({"click [data-toggle=phenotype-dialog]":"showPhenotypesModal"},n.ui.ResultsWorkflow.prototype.events)},initialize:function(){t.bindAll(this,"hideLoadingOverlay"),n.ui.ResultsWorkflow.prototype.initialize.call(this),this.stopListening(this.data.results,"sync");if(!(this.data.context=this.options.context))throw new Error("context model required");if(!(this.data.samples=this.options.samples))throw new Error("samples collection required")},showPhenotypesModal:function(){n.dialogs.phenotype.open()},onRender:function(){e(document).on("scroll",this.onPageScroll),this.paginator.show(new n.ui.Paginator({model:this.data.results})),this.count.show(new o({model:this.data.results,context:this.data.context,samples:this.data.samples})),this.table.show(new i.ResultTable({view:this.data.view,collection:this.data.results})),this.table.currentView.on("itemview:synced",this.hideLoadingOverlay),this.ui.navbarButtons.tooltip({animation:!1,placement:"bottom"})}});return{ResultsWorkflow:u}})