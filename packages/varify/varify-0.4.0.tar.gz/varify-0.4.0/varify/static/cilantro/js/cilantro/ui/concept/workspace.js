define(["underscore","marionette","loglevel","../core","../base","../welcome","../config","./form"],function(e,t,i,o,r,n,s,c){var a=r.ErrorView.extend({template:"concept/error"}),w=t.Layout.extend({className:"concept-workspace",template:"concept/workspace",itemView:c.ConceptForm,errorView:a,regions:{main:".main-region"},regionViews:{main:n.Welcome},initialize:function(){if(this.data={},!(this.data.concepts=this.options.concepts))throw new Error("concept collection required");if(!(this.data.context=this.options.context))throw new Error("context model required");this.listenTo(o,o.CONCEPT_FOCUS,this.showItem)},_ensureModel:function(e){return e instanceof o.models.Concept||(e=this.data.concepts.get(e)),e},showItem:function(t){var r=this._ensureModel(t);if(!r)return void i.debug("unknown workspace concept: "+(t.id||t));if(o.router.navigate("query",{trigger:!0}),!this.currentView.model||this.currentView.model.id!==r.id){var n={model:r,context:this.data.context},c=s.resolveFormOptions(r,"concepts");if(n=e.extend(n,c.options),c.module){var a=this;require([c.module],function(e){a.createView(e,n)},function(e){a.showErrorView(r),i.debug(e)})}else this.createView(c.view||this.itemView,n)}},createView:function(e,t){try{var i=new e(t);this.setView(i)}catch(r){if(this.showErrorView(t.model),o.config.get("debug"))throw r}},showErrorView:function(e){var t=new this.errorView({model:e});this.setView(t)},setView:function(e){this.currentView=e,this.main.show(e)},onRender:function(){var e=new this.regionViews.main;this.setView(e)}});return{ConceptWorkspace:w}});
//# sourceMappingURL=workspace.js.map