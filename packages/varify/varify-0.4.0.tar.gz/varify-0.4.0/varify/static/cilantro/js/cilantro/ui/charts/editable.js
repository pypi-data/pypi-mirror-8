var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var s in t)__hasProp.call(t,s)&&(e[s]=t[s]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};define(["jquery","underscore","./dist","./axis"],function(e,t,i,s){var o;return o=function(o){function r(){return r.__super__.constructor.apply(this,arguments)}return __extends(r,o),r.prototype.template="charts/editable-chart",r.prototype.events=t.extend({"click .fullsize":"toggleExpanded"},i.FieldChart.prototype.events),r.prototype.ui=t.extend({toolbar:".btn-toolbar",fullsizeToggle:".fullsize",form:".editable",xAxis:"[name=x-Axis]",yAxis:"[name=y-Axis]",series:"[name=series]"},i.FieldChart.prototype.ui),r.prototype.onRender=function(){var e;return this.options.editable===!1?(this.ui.form.detach(),this.ui.toolbar.detach()):(this.xAxis=new s.FieldAxis({el:this.ui.xAxis,collection:this.collection}),this.yAxis=new s.FieldAxis({el:this.ui.yAxis,collection:this.collection}),this.series=new s.FieldAxis({el:this.ui.series,enumerableOnly:!0,collection:this.collection}),this.model?(this.model.get("xAxis")&&this.ui.form.hide(),(e=this.model.get("expanded"))?this.expand():this.contract()):void 0)},r.prototype.customizeOptions=function(t){var i;return this.ui.status.detach(),this.ui.heading.text(t.title.text),t.title.text="",t.series[0]?(this.ui.form.hide(),i=[],t.clustered&&i.push("Clustered"),i[0]&&(this.ui.status.text(i.join(", ")).show(),this.ui.heading.append(this.$status)),this.interactive(t)&&this.enableChartEvents(),e.extend(!0,t,this.chartOptions),t.chart.renderTo=this.ui.chart[0],t):void this.ui.chart.html("<p class=no-data>Unfortunately, there is no data to graph here.</p>")},r.prototype.changeChart=function(e){return e&&e.preventDefault(),this.collection.when(function(t){return function(){var i,s,o,r,n,l,a;return null==e&&((l=t.model.get("xAxis"))&&t.xAxis.$el.val(l.toString()),(a=t.model.get("yAxis"))&&t.yAxis.$el.val(a.toString()),(o=t.model.get("series"))&&t.series.$el.val(o.toString())),l=t.xAxis.getSelected(),a=t.yAxis.getSelected(),o=t.series.getSelected(),l?(n=t.model.get("_links").distribution.href,s=[l],i="dimension="+l.id,a&&(s.push(a),i=i+"&dimension="+a.id),o&&(r=a?2:1,i=i+"&dimension="+o.id),e&&t.model&&t.model.set({xAxis:l.id,yAxis:a?a.id:void 0,series:o?o.id:void 0}),t.update(n,i,s,r)):void 0}}(this))},r.prototype.disableSelected=function(t){var i,s;return i=e(t.target),this.xAxis.el===t.target?(this.yAxis.$("option").prop("disabled",!1),this.series.$("option").prop("disabled",!1)):this.yAxis.el===t.target?(this.xAxis.$("option").prop("disabled",!1),this.series.$("option").prop("disabled",!1)):(this.xAxis.$("option").prop("disabled",!1),this.yAxis.$("option").prop("disabled",!1)),""!==(s=i.val())?this.xAxis.el===t.target?(this.yAxis.$("option[value="+s+"]").prop("disabled",!0).val(""),this.series.$("option[value="+s+"]").prop("disabled",!0).val("")):this.yAxis.el===t.target?(this.xAxis.$("option[value="+s+"]").prop("disabled",!0).val(""),this.series.$("option[value="+s+"]").prop("disabled",!0).val("")):(this.xAxis.$("option[value="+s+"]").prop("disabled",!0).val(""),this.yAxis.$("option[value="+s+"]").prop("disabled",!0).val("")):void 0},r.prototype.toggleExpanded=function(){var e;return e=this.model.get("expanded"),e?this.contract():this.expand(),this.model.save({expanded:!e})},r.prototype.resize=function(){var e;return e=this.ui.chart.width(),this.chart?this.chart.setSize(e,null,!1):void 0},r.prototype.expand=function(){return this.$fullsizeToggle.children("i").removeClass("icon-resize-small").addClass("icon-resize-full"),this.$el.addClass("expanded"),this.resize()},r.prototype.contract=function(){return this.$fullsizeToggle.children("i").removeClass("icon-resize-full").addClass("icon-resize-small"),this.$el.removeClass("expanded"),this.resize()},r.prototype.hideToolbar=function(){return this.ui.toolbar.fadeOut(200)},r.prototype.showToolbar=function(){return this.ui.toolbar.fadeIn(200)},r.prototype.toggleEdit=function(){return this.ui.form.is(":visible")?this.ui.form.fadeOut(300):this.ui.form.fadeIn(300)},r}(i.FieldChart),{EditableFieldChart:o}});
//# sourceMappingURL=editable.js.map