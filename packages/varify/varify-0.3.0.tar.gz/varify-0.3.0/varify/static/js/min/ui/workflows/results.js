define(["jquery","underscore","cilantro","cilantro/ui/numbers","../tables","../../utils"],function(e,t,n,r,i,s){var o=n.ui.ResultCount.extend({initialize:function(){this.data={};if(!(this.data.context=this.options.context))throw new Error("context model required")},renderCount:function(e,t){var n=s.samplesInContext(this.data.context);r.renderCount(this.ui.count,t),n.length===1?(this.ui.label.text("records in "+n[0]),this.ui.label.attr("title",n[0]),this.ui.label.tooltip({animation:!1,html:!0,placement:"bottom",container:"body"})):(this.ui.label.text("records in various samples"),this.ui.label.attr("title","various samples"),this.ui.label.tooltip("destroy"))}}),u=n.ui.ResultsWorkflow.extend({template:"varify/workflows/results",events:function(){return t.extend({"click [data-toggle=phenotype-dialog]":"showPhenotypesModal"},n.ui.ResultsWorkflow.prototype.events)},initialize:function(){n.ui.ResultsWorkflow.prototype.initialize.call(this);if(!(this.data.context=this.options.context))throw new Error("context model required")},showPhenotypesModal:function(){n.dialogs.phenotype.open()},onRender:function(){e(document).on("scroll",this.onPageScroll),this.paginator.show(new n.ui.Paginator({model:this.data.results})),this.count.show(new o({model:this.data.results,context:this.data.context})),this.table.show(new i.ResultTable({view:this.data.view,collection:this.data.results})),this.ui.navbarButtons.tooltip({animation:!1,placement:"bottom"})}});return{ResultsWorkflow:u}})