#!/usr/bin/env python
# -*- coding: utf-8 -*-

"""hwrt, the handwriting recognition toolkit, is a set of executable scripts
   and Python modules that are useful for handwriting recognition.

   Current scripts include: analyze_data.py, backup.py, download.py, view.py

   For train.py, test.py and get_top_n_error.py you will need an internal
   toolkit for training of neural networks.
"""


import argparse

# hwrt modules
# Every HWR tool that should be available through
#   hwrt TOOL
# has to be added to ``get_parser()`` and to ``main``.
import hwrt
from hwrt import create_pfiles
from hwrt import create_model
from hwrt import selfcheck
from hwrt import view
from hwrt import download


def get_parser():
    """Return the parser object for this script."""
    parser = argparse.ArgumentParser(description=__doc__,
                                     prog='hwrt')
    subparsers = parser.add_subparsers(dest='cmd')
    subparsers.add_parser('create_pfiles',
                          add_help=False,
                          description="Create pfiles",
                          parents=[create_pfiles.get_parser()])
    subparsers.add_parser('create_model',
                          add_help=False,
                          parents=[create_model.get_parser()])
    subparsers.add_parser('view',
                          add_help=False,
                          parents=[view.get_parser()])
    subparsers.add_parser('download',
                          add_help=False,
                          parents=[download.get_parser()])
    subparsers.add_parser('check',
                          add_help=False)
    parser.add_argument('--version',
                        action='version',
                        version=('hwrt %s' % str(hwrt.__version__)))
    return parser


def main(args):
    if args.cmd == 'check':
        selfcheck.main()
    elif args.cmd == 'view':
        view.main(args.list, args.model, args.server, args.id, args.show_raw)
    elif args.cmd == 'download':
        download.main()

if __name__ == '__main__':
    args = get_parser().parse_args()
    main(args)
