{%extends "base.html"%}

{%block content%}
<div class = "pull-left">
		<a href = "#modaladdnew" role="button" class="btn btn-primary" data-toggle="modal">Add New Task</a>
		<a href = "#modalhost" role ="button" class="btn btn-info " data-toggle="modal">Change Host</a>
</div>
<div class = "pull-right">
	<form role="form" method = "post"class="navbar-form navbar-left" action = "/search/"> {% csrf_token %}
		<div class="form-group">
			<input type="text" name = "search" placeholder="Search Task" class="form-control">
		</div>
	</form>
</div>
<div class = "col-xs-12">
	<h4>Default Host :{{host}}</h4>
</div>
<table class = " table table-stripped">
    <thead>
        <tr>
            <th class = "col-md-2">Task Name</th>
            <th class = "col-md-2">Author</th>
            <th class = "col-md-2" colspan = "3">Option</th>
			<th class = "col-md-1">Status</th>
        </tr>
    </thead>
</table>
<div class="div-table-content-2">
		<table class="table table-hover">
			<tbody>
			{%if tasks%}
				{% for tasklist in tasks %}
				<tr>
					<td class = "col-md-2"><a href = "{{tasklist.get_absolute_url}}">{{tasklist.taskname}}</a></td>
					<td class = "col-md-1">{{tasklist.author.usersname}}</td>
					<td class = "col-md-1"><a class = "btn btn-success" role = "button" href = "{{tasklist.get_absolute_url}}">Edit</a></td>
					{% if tasklist.status %}
						<td class = "col-md-1"><a class ="btn btn-warning" role = "button" href = "#">Revert</a></td>
						<td class = "col-md-1"><a href = "#modaldelete" role="button" class="btn btn-danger" data-toggle= "modal">Delete</a></td>
						<td class = "col-md-1">Has been execute</td>
						<div class = "modal fade" id = "modaldelete" aria-hidden="true">
						<div class="modal-dialog modal-sm">
							<div class="modal-body">
								<div class="panel panel-danger">
									<div class="panel-heading">
										<button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
										<h3 class="panel-title">Warning</h3>
									</div>
									<div class="panel-body">
										<div class="col-sm-12"><h3>Are you sure want to delete task this task?</h3></div>
										<div style = "float : center">
											<div class = "col-md-6"><a role="button" class="btn btn-default btn-block" href = "{{tasklist.get_url_path}}">Yes</a> </div>
											<div class = "col-md-6"><button type="button" class="btn btn-default btn-block" data-dismiss="modal">No</button> </div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					{% else %}
						<td class = "col-md-1"><a class ="btn btn-warning" role = "button" href = "#" disabled = "disabled">Revert</a></td>
						<td class = "col-md-1"><a href = "#modaldelete" role="button" class="btn btn-danger" data-toggle= "modal">Delete</a></td>
						<td class = "col-md-1">Has not been execute</td>
						<div class = "modal fade" id = "modaldelete" aria-hidden="true">
						<div class="modal-dialog modal-sm">
							<div class="modal-body">
								<div class="panel panel-danger">
									<div class="panel-heading">
										<button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
										<h3 class="panel-title">Warning</h3>
									</div>
									<div class="panel-body">
										<div class="col-sm-12"><h3>Are you sure want to delete this task?</h3></div>
										<div style = "float : center">
											<div class = "col-md-6"><a role="button" class="btn btn-default btn-block" href = "{{tasklist.get_url_path}}">Yes</a> </div>
											<div class = "col-md-6"><button type="button" class="btn btn-default btn-block" data-dismiss="modal">No</button> </div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					{% endif %}
					</tr>
					{% endfor %}
			{% else %}
			<tr></tr>
			{% endif %}
			</tbody>
		</table>
</div>
{% endblock %}