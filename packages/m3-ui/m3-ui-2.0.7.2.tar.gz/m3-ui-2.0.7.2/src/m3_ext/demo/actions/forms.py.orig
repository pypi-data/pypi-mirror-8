#coding: utf-8

from base import Pack, UIAction
from m3_ext.ui import all_components as ext
from m3_ext.ui.fields.simple import ExtStringField

__author__ = 'prefer'


@Pack.register
class FormAction(UIAction):
    """
    Пример формы
    """
    title = u'Окно с ExtForm'

    def get_ui(self, request, context):
        win = ext.ExtWindow(title=self.title,
                            width=600,
                            height=400,
                            layout='fit')

        win.items.append(ext.ExtForm(title=u'Заголовок формы'))

        return win


@Pack.register
class PanelAction(UIAction):
    """
    Пример ExtPanel, ExtToolBar, ExtPagingBar
    """
    title = u'Окно с ExtPanel, ExtToolBar, ExtPagingBar'

    def get_ui(self, request, context):
        win = ext.ExtWindow(title=self.title,
                            width=600,
                            height=400,
                            layout='fit')

        win.panel = ext.ExtPanel(header=True, title=u'Заголовок панели')

        tbar = ext.ExtToolBar()
        tbar.add_text_item(u'Текст на топбаре')
        tbar.add_spacer(10)
        tbar.items.append(ext.ExtButton(text=u'Кнопка на топбаре'))

        tbar.add_separator()
        tbar.items.append(ext.ExtButton(text=u'Еще одна кнопка'))
        tbar.add_fill()
        tbar.items.append(ext.ExtButton(text=u'Кнопка в дальнем конце'))

        win.panel.top_bar = tbar

        win.panel.bottom_bar = ext.ExtPagingBar()

        win.items.append(win.panel)

        return win

@Pack.register
class ContainerAction(UIAction):
    """
    Пример ExtContainer
    """

    title = u'Окно с ExtContainer'

    def get_ui(self, request, context):
        win = super(ContainerAction, self).get_ui(request, context)
        win.container = ext.ExtContainer()
        win.items.append(win.container)
        return win

@Pack.register
class TitlePanelAction(UIAction):
    """
    Пример Title Panel
    """

    title = u'Окно с ExtTitlePanel'

    def get_ui(self, request, context):
        win = ext.ExtWindow(title=self.title,
                            width=600,
                            height=400,
                            layout='fit')

        # TODO: Пока код не рабочий, что-то странное надо засовывать в header

        win.title_panel = ext.ExtTitlePanel(
            title_items=[
                ext.ExtButton(text=u'Кнопка')
            ])

        win.items.append(win.title_panel)
        return win


@Pack.register
class TabPanelAction(UIAction):
    """
    Пример TabPanel
    """

    title = u'Окно с TabPanel'

    def get_ui(self, request, context):
        win = ext.ExtWindow(title=self.title,
                            width=600,
                            height=400,
                            layout='fit')

        win.tab_panel = ext.ExtTabPanel()
        win.tab_panel.add_tab(title=u'Раз')
        win.tab_panel.add_tab(title=u'Два')
        win.tab_panel.add_tab(title=u'Три')

        win.items.append(win.tab_panel)
        return win


@Pack.register
class FieldSetAction(UIAction):
    """
    Пример ExtFieldSet
    """

    title = u'Окно с ExtFieldSet'

    def get_ui(self, request, context):
        win = ext.ExtWindow(title=self.title,
                            width=600,
                            height=400,
                            layout='fit')

        # TODO: Нужны филды!
        win.field_set = ext.ExtFieldSet()
        win.field_set.items.append(
            ExtStringField(label=u'Текст')
        )

        win.items.append(win.field_set)
        return win