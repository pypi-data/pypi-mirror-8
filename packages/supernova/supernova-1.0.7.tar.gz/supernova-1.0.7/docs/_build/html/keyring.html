<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Working with keyring storage &mdash; supernova trunk documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'trunk',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="supernova trunk documentation" href="index.html" />
    <link rel="next" title="Using supernova" href="usingsupernova.html" />
    <link rel="prev" title="Installing supernova" href="installation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="usingsupernova.html" title="Using supernova"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installing supernova"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">supernova trunk documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="working-with-keyring-storage">
<h1>Working with keyring storage<a class="headerlink" href="#working-with-keyring-storage" title="Permalink to this headline">¶</a></h1>
<p>With supernova, there are three ways you can store credentials:</p>
<ul class="simple">
<li><strong>Best:</strong> Global keyring storage shared between multiple environments</li>
<li><strong>Better:</strong> Keyring storage specific to an environment</li>
<li><strong>Awful:</strong> Plain text in the supernova configuration file</li>
</ul>
<p><cite>NOTE: A temporary environment is spawned by supernova when it actually runs nova &#8211; your credentials aren&#8217;t left in the environment variables of your current shell.</cite></p>
<div class="section" id="global-keyring-storage">
<h2>Global keyring storage<a class="headerlink" href="#global-keyring-storage" title="Permalink to this headline">¶</a></h2>
<p>Storing a credential as a global credential allows you to use it across multiple environments.  The greatest benefit of this option is that you only need to set credentials in one place within your keyring.  If you need to change credentials frequently, this can be a big time saver.</p>
<p>Here&#8217;s how we&#8217;re already doing that in the <a class="reference external" href="http://bit.ly/raxsupernova">Rackspace example configuration</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">dfw</span><span class="p">]</span>
<span class="o">...</span> <span class="n">snip</span> <span class="o">...</span>
<span class="n">OS_PASSWORD</span><span class="o">=</span><span class="n">USE_KEYRING</span><span class="p">[</span><span class="s">&#39;RackspaceAccountAPIKey&#39;</span><span class="p">]</span>
<span class="n">OS_USERNAME</span><span class="o">=</span><span class="n">USE_KEYRING</span><span class="p">[</span><span class="s">&#39;RackspaceAccountUser&#39;</span><span class="p">]</span>
<span class="n">OS_TENANT_NAME</span><span class="o">=</span><span class="n">USE_KEYRING</span><span class="p">[</span><span class="s">&#39;RackspaceAccountDDI&#39;</span><span class="p">]</span>

<span class="p">[</span><span class="nb">ord</span><span class="p">]</span>
<span class="o">...</span> <span class="n">snip</span> <span class="o">...</span>
<span class="n">OS_PASSWORD</span><span class="o">=</span><span class="n">USE_KEYRING</span><span class="p">[</span><span class="s">&#39;RackspaceAccountAPIKey&#39;</span><span class="p">]</span>
<span class="n">OS_USERNAME</span><span class="o">=</span><span class="n">USE_KEYRING</span><span class="p">[</span><span class="s">&#39;RackspaceAccountUser&#39;</span><span class="p">]</span>
<span class="n">OS_TENANT_NAME</span><span class="o">=</span><span class="n">USE_KEYRING</span><span class="p">[</span><span class="s">&#39;RackspaceAccountDDI&#39;</span><span class="p">]</span>

<span class="p">[</span><span class="n">iad</span><span class="p">]</span>
<span class="o">...</span> <span class="n">snip</span> <span class="o">...</span>
<span class="n">OS_PASSWORD</span><span class="o">=</span><span class="n">USE_KEYRING</span><span class="p">[</span><span class="s">&#39;RackspaceAccountAPIKey&#39;</span><span class="p">]</span>
<span class="n">OS_USERNAME</span><span class="o">=</span><span class="n">USE_KEYRING</span><span class="p">[</span><span class="s">&#39;RackspaceAccountUser&#39;</span><span class="p">]</span>
<span class="n">OS_TENANT_NAME</span><span class="o">=</span><span class="n">USE_KEYRING</span><span class="p">[</span><span class="s">&#39;RackspaceAccountDDI&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>You can get global credentials with supernova-keyring:</p>
<div class="highlight-python"><div class="highlight"><pre>supernova-keyring -s global RackspaceAccountAPIKey
</pre></div>
</div>
<p>Retrieving a credential you stored previously is easy as well:</p>
<div class="highlight-python"><div class="highlight"><pre>supernova-keyring -g global RackspaceAccountAPIKey
</pre></div>
</div>
<p><strong>WARNING:</strong> Retrieving a credential will display it on the screen in plain text.  Don&#8217;t worry: supernova will warn you thoroughly before you try this.</p>
</div>
<div class="section" id="environment-specific-keyring-storage">
<h2>Environment-specific keyring storage<a class="headerlink" href="#environment-specific-keyring-storage" title="Permalink to this headline">¶</a></h2>
<p>An older method of storing keyring data is to store it specifically for one environment.  Using the <a class="reference external" href="http://bit.ly/raxsupernova">Rackspace example configuration</a>, your DFW configuration might look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">dfw</span><span class="p">]</span>
<span class="o">...</span> <span class="n">snip</span> <span class="o">...</span>
<span class="n">OS_PASSWORD</span><span class="o">=</span><span class="n">USE_KEYRING</span>
<span class="n">OS_USERNAME</span><span class="o">=</span><span class="n">my_username</span>
<span class="n">OS_TENANT_NAME</span><span class="o">=</span><span class="n">my_account_number</span>
</pre></div>
</div>
<p>This tells supernova to look up the <em>OS_PASSWORD</em> value for the <em>dfw</em> environment.  Setting that credential is done with supernova-keyring:</p>
<div class="highlight-python"><div class="highlight"><pre>supernova-keyring -s dfw OS_PASSWORD
</pre></div>
</div>
<p>This was one of the first methods of keyring storage available in supernova and it&#8217;s the least robust.  It&#8217;s recommended to consider using global keyring storage instead.</p>
</div>
<div class="section" id="plain-text-storage">
<h2>Plain text storage<a class="headerlink" href="#plain-text-storage" title="Permalink to this headline">¶</a></h2>
<p>This is obviously the easiest method, but it&#8217;s generally not recommended.  Any user with access to your home directory would have access to your credentials and could use them against your accounts.  <strong>Don&#8217;t use plain text credential storage unless you know what you&#8217;re doing.</strong></p>
<p>Using the <a class="reference external" href="http://bit.ly/raxsupernova">Rackspace example configuration</a>, plain text credential storage would look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>[dfw]
OS_AUTH_URL=https://identity.api.rackspacecloud.com/v2.0/
OS_AUTH_SYSTEM=rackspace
OS_COMPUTE_API_VERSION=1.1
NOVA_RAX_AUTH=1
OS_REGION_NAME=DFW
NOVA_SERVICE_NAME=cloudServersOpenStack
OS_PASSWORD=482aa30919030cafc08f2d2bda2193bf
OS_USERNAME=my_username
OS_TENANT_NAME=123456
</pre></div>
</div>
<p>When supernova runs, it will take the configuration options and pass them directly to nova (or the executable of your choice) in a subprocess.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Working with keyring storage</a><ul>
<li><a class="reference internal" href="#global-keyring-storage">Global keyring storage</a></li>
<li><a class="reference internal" href="#environment-specific-keyring-storage">Environment-specific keyring storage</a></li>
<li><a class="reference internal" href="#plain-text-storage">Plain text storage</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installing supernova</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="usingsupernova.html"
                        title="next chapter">Using supernova</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/keyring.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="usingsupernova.html" title="Using supernova"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installing supernova"
             >previous</a> |</li>
        <li><a href="index.html">supernova trunk documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Major Hayden.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>