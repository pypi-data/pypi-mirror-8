<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="rer.structured_content">

  <body>
    <metal:fill fill-slot="main">
      <metal:main_macro define-macro="main"
            tal:define="portal_type python:here.getPortalTypeName().lower().replace(' ', '_');
                        view_template python:'%s_view' % portal_type;
                        is_editable context/@@plone_context_state/is_editable;">

        <div tal:replace="structure provider:plone.abovecontenttitle" />
        <h1 class="documentFirstHeading" tal:content="context/Title"> 
            Title
        </h1>
        <div tal:replace="structure provider:plone.belowcontenttitle" />
        
        <div class="contextualbody">
          <p tal:condition="context/Description"
         class="documentDescription rer-contextual-description"
             tal:content="context/Description">
              Description
          </p>
      <div tal:replace="structure provider:plone.abovecontentbody" />
          <div tal:attributes="class python: 'right' in view.name and 'rer-contextual-text rer-contextual-text-right' or 'rer-contextual-text'">
            <p tal:condition="python: not context.getText() and is_editable"
                i18n:translate="no_body_text"
          i18n:domain="plone"
                class="discreet">
                This item does not have any body text, click the edit tab to change it.
        </p>
            <div tal:replace="structure context/getText">
              Body text
            </div>
          </div>
          <div tal:attributes="class python: 'right' in view.name and 'rer-contextual-portlets rer-contextual-portlets-right' or 'rer-contextual-portlets'">
            <tal:foldeeps define="foldeeps view/retrieveFolderDeepening"
                              condition="foldeeps">
                  <tal:foldeep repeat="foldeep foldeeps">
                    <dl class="portlet portletNavigationTree">
              <dt class="portletHeader">
                <span tal:content="foldeep/title">
                  header
                </span>
                </dt>
                <dd class="portletItem lastItem"
                  tal:define="folder_path foldeep/path">
                  <ul class="navTree navTreeLevel0">
                    <tal:objs define="objs python: view.retrieveContentsOfFolderDeepening(folder_path)"
                                condition="objs">
                            <tal:obj repeat="obj objs">
                              <li class="navTreeItem visualNoMarker">
                          <img tal:replace="structure obj/icon" />
                          <a tal:attributes="href obj/url;">
                          <span tal:content="obj/title">body</span></a>
                          <span tal:condition="obj/filesize|nothing"
                              tal:content="string:(${obj/filesize})">1Mb</span>
                            <div class="description" tal:condition="obj/description" tal:content="obj/description">description</div> 
                        
                      </li>
                            </tal:obj>    
                          </tal:objs>
                        </ul>
                </dd>
              </dl>
            </tal:foldeep>
              </tal:foldeeps>
           </div>
      </div>
        
        <div tal:condition="python:here.computeRelatedItems()"
             metal:use-macro="here/document_relateditems/macros/relatedItems">
            show related items if they exist
        </div>
        
        <span class="visualClear"><!-- --></span>

        <div tal:replace="structure provider:plone.belowcontentbody" />

      </metal:main_macro>
    </metal:fill>
  </body>
</html>
