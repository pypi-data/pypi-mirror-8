Ok::

  $ cat <<EOF > tests.py
  > import time
  > import pytest
  > @pytest.mark.benchmark(group="group-name", max_time=0.5, max_iterations=5000, min_iterations=5, timer=time.time, disable_gc=True)
  > def test_fast(benchmark):
  >     with benchmark:
  >         time.sleep(0.000001)
  >     assert 1 == 1
  > EOF

  $ py.test -vv --doctest-modules tests.py
  ============================= test session starts ==============================
  platform linux -- Python 3.4.2 -- py-1.4.26 -- pytest-2.6.4 -- /home/ionel/osp/pytest-benchmark/.tox/py34/bin/python3.4
  plugins: benchmark, cov
  collecting ... collected 1 items
  
  tests.py::test_fast PASSED
  
  ----- benchmark 'group-name': 1 tests, 5 to 5000 iterations, 0.5s max time -----
  Name (time in ms)           Min       Max       Avg      Mean    StdDev  Iterations
  ---------------------------------------------------------------------------------
  test_fast                 3.040     4.034     3.898     3.898     0.087       127
  ---------------------------------------------------------------------------------
  
  =========================== 1 passed in 0.53 seconds ===========================

Bogus args::

  $ cat <<EOF > tests.py
  > """
  >     >>> print('Yay, doctests!')
  >     Yay, doctests!
  > """
  > import time
  > import pytest
  > @pytest.mark.benchmark(group="group-name", max_time=0.5, max_iterations=5000, min_iterations=5, timer=time.time, disable_gc=True, only=True)
  > def test_fast(benchmark):
  >     with benchmark:
  >         time.sleep(0.000001)
  >     assert 1 == 1
  > EOF

  $ py.test -vv --doctest-modules tests.py
  ============================= test session starts ==============================
  platform linux -- Python 3.4.2 -- py-1.4.26 -- pytest-2.6.4 -- /home/ionel/osp/pytest-benchmark/.tox/py34/bin/python3.4
  plugins: benchmark, cov
  collecting ... collected 2 items
  
  tests.py::[doctest] tests PASSED
  tests.py::test_fast ERROR
  
  ==================================== ERRORS ====================================
  _________________________ ERROR at setup of test_fast __________________________
  
  item = <Function 'test_fast'>
  
      def pytest_runtest_setup(item):
          benchmark = item.get_marker('benchmark')
          if benchmark:
              if benchmark.args:
                  raise ValueError("benchmark mark can't have positional arguments.")
              for name in benchmark.kwargs:
                  if name not in ('max_time', 'min_iterations', 'max_iterations', 'timer', 'group', 'disable_gc'):
  >                   raise ValueError("benchmark mark can't have %r keyword argument." % name)
  E                   ValueError: benchmark mark can't have 'only' keyword argument.
  
  /home/ionel/osp/pytest-benchmark/src/pytest_benchmark/plugin.py:235: ValueError
  ====================== 1 passed, 1 error in 0.02 seconds =======================
  [1]
